
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scala、Java、F#、C#、Haskell、Clojure、Elixir で学ぶ関数型プログラミング">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../part-5/">
      
      
        <link rel="next" href="../../rust/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Part VI - 実践 - Grokking Functional Programming</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-vi" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Grokking Functional Programming" class="md-header__button md-logo" aria-label="Grokking Functional Programming" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Grokking Functional Programming
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part VI - 実践
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/grokkingfp-excersice" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    grokkingfp-excersice
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scala/" class="md-tabs__link">
          
  
  
  Scala

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../java/" class="md-tabs__link">
          
  
  
  Java

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../fsharp/" class="md-tabs__link">
          
  
  
  F#

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../csharp/" class="md-tabs__link">
          
  
  
  C#

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../haskell/" class="md-tabs__link">
          
  
  
  Haskell

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../clojure/" class="md-tabs__link">
          
  
  
  Clojure

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Elixir

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../rust/" class="md-tabs__link">
          
  
  
  Rust

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Grokking Functional Programming" class="md-nav__button md-logo" aria-label="Grokking Functional Programming" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Grokking Functional Programming
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/grokkingfp-excersice" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    grokkingfp-excersice
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Scala
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Scala
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Java
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Java
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    F#
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    F#
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期処理とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    C#
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期処理とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Haskell
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Haskell
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clojure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clojure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - nil 安全性
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 副作用とシーケンス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Elixir
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Elixir
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理と OTP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      
        第12章: 実践的なアプリケーションとテスト戦略
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第12章: 実践的なアプリケーションとテスト戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-travelguide" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.1 TravelGuide アプリケーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.2 ドメインモデルの定義
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.3 データアクセス層の抽象化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.4 スタブ実装
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#125-agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.5 Agent を使用したキャッシュ
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#126" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.6 アプリケーションの組み立て
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#127-searchreport" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.7 SearchReport の導入
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        テスト戦略
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="テスト戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#128" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.8 関数型プログラミングのテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#129" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.9 純粋関数のテスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1210" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.10 プロパティベーステスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1211" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.11 ランダムデータ生成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1212" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.12 統合テスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1213" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.13 パフォーマンステスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1214" class="md-nav__link">
    <span class="md-ellipsis">
      
        12.14 テストピラミッド
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-vi_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part VI で学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        キーポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scala" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scala との対比
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        学習の総括
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        演習問題
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="演習問題">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-dataaccess" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 1: DataAccess の拡張
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 2: プロパティベーステスト
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 3: キャッシュの有効期限
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        シリーズ全体の総括
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="シリーズ全体の総括">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        学んだ主な概念
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        関数型プログラミングの利点
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elixir" class="md-nav__link">
    <span class="md-ellipsis">
      
        Elixir 特有の利点
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        次のステップ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Rust
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rust
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="part-vi">Part VI: 実践的なアプリケーション構築とテスト<a class="headerlink" href="#part-vi" title="Permanent link">&para;</a></h1>
<p>本章では、これまで学んだ関数型プログラミングの概念を統合し、実践的なアプリケーションを構築します。また、関数型プログラミングにおけるテスト戦略についても学びます。</p>
<hr />
<h2 id="12">第12章: 実践的なアプリケーションとテスト戦略<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<h3 id="121-travelguide">12.1 TravelGuide アプリケーション<a class="headerlink" href="#121-travelguide" title="Permanent link">&para;</a></h3>
<p>旅行ガイドアプリケーションを例に、実践的な FP アプリケーションの構築方法を学びます。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjM4MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTg4cHg7aGVpZ2h0OjM4MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk4OCAzODEiIHdpZHRoPSI5ODhweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFRyYXZlbEd1aWRlIEFwcGxpY2F0aW9uLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJUcmF2ZWxHdWlkZSBBcHBsaWNhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX1RyYXZlbEd1aWRlIEFwcGxpY2F0aW9uIj48cGF0aCBkPSJNMTMuNSwxMSBMMjAzLjc2NjYsMTEgQTMuNzUsMy43NSAwIDAgMSAyMDYuMjY2NiwxMy41IEwyMTMuMjY2NiwzMy4yOTY5IEw5NzguNSwzMy4yOTY5IEEyLjUsMi41IDAgMCAxIDk4MSwzNS43OTY5IEw5ODEsMzcyLjI4IEEyLjUsMi41IDAgMCAxIDk3OC41LDM3NC43OCBMMTMuNSwzNzQuNzggQTIuNSwyLjUgMCAwIDEgMTEsMzcyLjI4IEwxMSwxMy41IEEyLjUsMi41IDAgMCAxIDEzLjUsMTEiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTEiIHgyPSIyMTMuMjY2NiIgeTE9IjMzLjI5NjkiIHkyPSIzMy4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4OS4yNjY2IiB4PSIxNSIgeT0iMjUuOTk1MSI+VHJhdmVsR3VpZGUgQXBwbGljYXRpb248L3RleHQ+PC9nPjwhLS1jbHVzdGVyIE1vZGVsLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJNb2RlbCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJjbHVzdGVyX01vZGVsIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5Ni43OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM4NCIgeD0iMzUiIHk9IjU0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ3Ljg2NTIiIHg9IjIwMy4wNjc0IiB5PSI2OC45OTUxIj5Nb2RlbDwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgRGF0YSBBY2Nlc3MtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9IkRhdGEgQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJjbHVzdGVyX0RhdGEgQWNjZXNzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI3Mi4zMyIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUxNCIgeD0iNDQzIiB5PSI1NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5NS42NzU4IiB4PSI2NTIuMTYyMSIgeT0iNjguOTk1MSI+RGF0YSBBY2Nlc3M8L3RleHQ+PC9nPjwhLS1jbGFzcyBMb2NhdGlvbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJMb2NhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfTG9jYXRpb24iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0NS43ODYxIiB4PSI1MS4xMSIgeT0iODkiLz48ZWxsaXBzZSBjeD0iOTAuNTIzNiIgY3k9IjEwMyIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTkzLjQ5MjMsMTA4LjY0MDYgUTkyLjkxNDIsMTA4LjkzNzUgOTIuMjczNiwxMDkuMDc4MSBROTEuNjMyOSwxMDkuMjM0NCA5MC45Mjk4LDEwOS4yMzQ0IFE4OC40Mjk4LDEwOS4yMzQ0IDg3LjEwMTcsMTA3LjU5MzggUTg1Ljc4OTIsMTA1LjkzNzUgODUuNzg5MiwxMDIuODEyNSBRODUuNzg5Miw5OS42ODc1IDg3LjEwMTcsOTguMDMxMyBRODguNDI5OCw5Ni4zNzUgOTAuOTI5OCw5Ni4zNzUgUTkxLjYzMjksOTYuMzc1IDkyLjI3MzYsOTYuNTMxMyBROTIuOTI5OCw5Ni42ODc1IDkzLjQ5MjMsOTYuOTg0NCBMOTMuNDkyMyw5OS43MDMxIFE5Mi44NjczLDk5LjEyNSA5Mi4yNzM2LDk4Ljg1OTQgUTkxLjY3OTgsOTguNTc4MSA5MS4wNTQ4LDk4LjU3ODEgUTg5LjcxMTEsOTguNTc4MSA4OS4wMjM2LDk5LjY1NjMgUTg4LjMzNjEsMTAwLjcxODggODguMzM2MSwxMDIuODEyNSBRODguMzM2MSwxMDQuOTA2MyA4OS4wMjM2LDEwNS45ODQ0IFE4OS43MTExLDEwNy4wNDY5IDkxLjA1NDgsMTA3LjA0NjkgUTkxLjY3OTgsMTA3LjA0NjkgOTIuMjczNiwxMDYuNzgxMyBROTIuODY3MywxMDYuNSA5My40OTIzLDEwNS45MjE5IEw5My40OTIzLDEwOC42NDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkuNDU5IiB4PSIxMDguMDIzNiIgeT0iMTA3Ljg0NjciPkxvY2F0aW9uPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Mi4xMSIgeDI9IjE5NS44OTYxIiB5MT0iMTE3IiB5Mj0iMTE3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuNDE4IiB4PSI1Ny4xMSIgeT0iMTMzLjk5NTEiPmlkOiBMb2NhdGlvbklkPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkwLjY1MTQiIHg9IjU3LjExIiB5PSIxNTAuMjkyIj5uYW1lOiBTdHJpbmc8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMzLjc4NjEiIHg9IjU3LjExIiB5PSIxNjYuNTg4OSI+cG9wdWxhdGlvbjogaW50ZWdlcjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTIuMTEiIHgyPSIxOTUuODk2MSIgeTE9IjE3My44OTA2IiB5Mj0iMTczLjg5MDYiLz48L2c+PCEtLWNsYXNzIEF0dHJhY3Rpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iQXR0cmFjdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X0F0dHJhY3Rpb24iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE3MS4wNTg2IiB4PSIyMzEuNDciIHk9Ijg5Ii8+PGVsbGlwc2UgY3g9IjI3OC41NDY3IiBjeT0iMTAzIiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjgxLjUxNTQsMTA4LjY0MDYgUTI4MC45MzczLDEwOC45Mzc1IDI4MC4yOTY3LDEwOS4wNzgxIFEyNzkuNjU2LDEwOS4yMzQ0IDI3OC45NTI5LDEwOS4yMzQ0IFEyNzYuNDUyOSwxMDkuMjM0NCAyNzUuMTI0OCwxMDcuNTkzOCBRMjczLjgxMjMsMTA1LjkzNzUgMjczLjgxMjMsMTAyLjgxMjUgUTI3My44MTIzLDk5LjY4NzUgMjc1LjEyNDgsOTguMDMxMyBRMjc2LjQ1MjksOTYuMzc1IDI3OC45NTI5LDk2LjM3NSBRMjc5LjY1Niw5Ni4zNzUgMjgwLjI5NjcsOTYuNTMxMyBRMjgwLjk1MjksOTYuNjg3NSAyODEuNTE1NCw5Ni45ODQ0IEwyODEuNTE1NCw5OS43MDMxIFEyODAuODkwNCw5OS4xMjUgMjgwLjI5NjcsOTguODU5NCBRMjc5LjcwMjksOTguNTc4MSAyNzkuMDc3OSw5OC41NzgxIFEyNzcuNzM0Miw5OC41NzgxIDI3Ny4wNDY3LDk5LjY1NjMgUTI3Ni4zNTkyLDEwMC43MTg4IDI3Ni4zNTkyLDEwMi44MTI1IFEyNzYuMzU5MiwxMDQuOTA2MyAyNzcuMDQ2NywxMDUuOTg0NCBRMjc3LjczNDIsMTA3LjA0NjkgMjc5LjA3NzksMTA3LjA0NjkgUTI3OS43MDI5LDEwNy4wNDY5IDI4MC4yOTY3LDEwNi43ODEzIFEyODAuODkwNCwxMDYuNSAyODEuNTE1NCwxMDUuOTIxOSBMMjgxLjUxNTQsMTA4LjY0MDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS40MDUzIiB4PSIyOTYuMDQ2NyIgeT0iMTA3Ljg0NjciPkF0dHJhY3Rpb248L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjIzMi40NyIgeDI9IjQwMS41Mjg2IiB5MT0iMTE3IiB5Mj0iMTE3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTAuNjUxNCIgeD0iMjM3LjQ3IiB5PSIxMzMuOTk1MSI+bmFtZTogU3RyaW5nPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1OS4wNTg2IiB4PSIyMzcuNDciIHk9IjE1MC4yOTIiPmRlc2NyaXB0aW9uOiBTdHJpbmcgfCBuaWw8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI0LjE3NDgiIHg9IjIzNy40NyIgeT0iMTY2LjU4ODkiPmxvY2F0aW9uOiBMb2NhdGlvbjwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjMyLjQ3IiB4Mj0iNDAxLjUyODYiIHkxPSIxNzMuODkwNiIgeTI9IjE3My44OTA2Ii8+PC9nPjwhLS1jbGFzcyBUcmF2ZWxHdWlkZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJUcmF2ZWxHdWlkZSIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X1RyYXZlbEd1aWRlIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjkyLjg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMTMuNDg5MyIgeD0iNTEuMjYiIHk9IjI0MS44OSIvPjxlbGxpcHNlIGN4PSIxMTEuODYxNiIgY3k9IjI1NS44OSIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTExNC44MzAzLDI2MS41MzA2IFExMTQuMjUyMiwyNjEuODI3NSAxMTMuNjExNiwyNjEuOTY4MSBRMTEyLjk3MDksMjYyLjEyNDQgMTEyLjI2NzgsMjYyLjEyNDQgUTEwOS43Njc4LDI2Mi4xMjQ0IDEwOC40Mzk3LDI2MC40ODM4IFExMDcuMTI3MiwyNTguODI3NSAxMDcuMTI3MiwyNTUuNzAyNSBRMTA3LjEyNzIsMjUyLjU3NzUgMTA4LjQzOTcsMjUwLjkyMTMgUTEwOS43Njc4LDI0OS4yNjUgMTEyLjI2NzgsMjQ5LjI2NSBRMTEyLjk3MDksMjQ5LjI2NSAxMTMuNjExNiwyNDkuNDIxMyBRMTE0LjI2NzgsMjQ5LjU3NzUgMTE0LjgzMDMsMjQ5Ljg3NDQgTDExNC44MzAzLDI1Mi41OTMxIFExMTQuMjA1MywyNTIuMDE1IDExMy42MTE2LDI1MS43NDk0IFExMTMuMDE3OCwyNTEuNDY4MSAxMTIuMzkyOCwyNTEuNDY4MSBRMTExLjA0OTEsMjUxLjQ2ODEgMTEwLjM2MTYsMjUyLjU0NjMgUTEwOS42NzQxLDI1My42MDg4IDEwOS42NzQxLDI1NS43MDI1IFExMDkuNjc0MSwyNTcuNzk2MyAxMTAuMzYxNiwyNTguODc0NCBRMTExLjA0OTEsMjU5LjkzNjkgMTEyLjM5MjgsMjU5LjkzNjkgUTExMy4wMTc4LDI1OS45MzY5IDExMy42MTE2LDI1OS42NzEzIFExMTQuMjA1MywyNTkuMzkgMTE0LjgzMDMsMjU4LjgxMTkgTDExNC44MzAzLDI2MS41MzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuNzg2MSIgeD0iMTI5LjM2MTYiIHk9IjI2MC43MzY3Ij5UcmF2ZWxHdWlkZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNTIuMjYiIHgyPSIyNjMuNzQ5MyIgeTE9IjI2OS44OSIgeTI9IjI2OS44OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Ni45Nzk1IiB4PSI1Ny4yNiIgeT0iMjg2Ljg4NTEiPmF0dHJhY3Rpb246IEF0dHJhY3Rpb248L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE5LjkwOTIiIHg9IjU3LjI2IiB5PSIzMDMuMTgyIj5zdWJqZWN0czogW1N0cmluZ108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAxLjQ4OTMiIHg9IjU3LjI2IiB5PSIzMTkuNDc4OSI+c2VhcmNoX3JlcG9ydDogU2VhcmNoUmVwb3J0PC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1Mi4yNiIgeDI9IjI2My43NDkzIiB5MT0iMzI2Ljc4MDYiIHkyPSIzMjYuNzgwNiIvPjwvZz48IS0tY2xhc3MgRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJEYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIyNSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfRGF0YUFjY2VzcyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI5Mi44OTA2IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDgxLjUyOTMiIHg9IjQ1OS4yNCIgeT0iODkiLz48ZWxsaXBzZSBjeD0iNjU1LjQ1NDQiIGN5PSIxMDMiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02NTEuMzc2Miw5OC43NjU2IEw2NTEuMzc2Miw5Ni42MDk0IEw2NTguNzY2OSw5Ni42MDk0IEw2NTguNzY2OSw5OC43NjU2IEw2NTYuMjk4MSw5OC43NjU2IEw2NTYuMjk4MSwxMDYuODQzOCBMNjU4Ljc2NjksMTA2Ljg0MzggTDY1OC43NjY5LDEwOSBMNjUxLjM3NjIsMTA5IEw2NTEuMzc2MiwxMDYuODQzOCBMNjUzLjg0NSwxMDYuODQzOCBMNjUzLjg0NSw5OC43NjU2IEw2NTEuMzc2Miw5OC43NjU2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS42MDA2IiB4PSI2NzIuOTU0NCIgeT0iMTA3Ljg0NjciPkRhdGFBY2Nlc3M8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2MC4yNCIgeDI9IjkzOS43NjkzIiB5MT0iMTE3IiB5Mj0iMTE3Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ2MC4yNCIgeDI9IjkzOS43NjkzIiB5MT0iMTI1IiB5Mj0iMTI1Ii8+PGVsbGlwc2UgY3g9IjQ3MC4yNCIgY3k9IjEzOC42NDg0IiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNzkuMDgwMSIgeD0iNDc3LjI0IiB5PSIxNDEuOTk1MSI+ZmluZF9hdHRyYWN0aW9ucygpOiB7Om9rLCBbQXR0cmFjdGlvbl19IHwgezplcnJvciwgU3RyaW5nfTwvdGV4dD48ZWxsaXBzZSBjeD0iNDcwLjI0IiBjeT0iMTU0Ljk0NTMiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ1Ny41MjkzIiB4PSI0NzcuMjQiIHk9IjE1OC4yOTIiPmZpbmRfYXJ0aXN0c19mcm9tX2xvY2F0aW9uKCk6IHs6b2ssIFtNdXNpY0FydGlzdF19IHwgezplcnJvciwgU3RyaW5nfTwvdGV4dD48ZWxsaXBzZSBjeD0iNDcwLjI0IiBjeT0iMTcxLjI0MjIiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQzNS42MzM4IiB4PSI0NzcuMjQiIHk9IjE3NC41ODg5Ij5maW5kX21vdmllc19hYm91dF9sb2NhdGlvbigpOiB7Om9rLCBbTW92aWVdfSB8IHs6ZXJyb3IsIFN0cmluZ308L3RleHQ+PC9nPjwhLS1jbGFzcyBUZXN0RGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJUZXN0RGF0YUFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMzEiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X1Rlc3REYXRhQWNjZXNzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTM5LjU0ODgiIHg9IjUzMS4yMyIgeT0iMjY2LjMzIi8+PGVsbGlwc2UgY3g9IjU0NC4yMyIgY3k9IjI4MC4zMyIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTU0Ny4xOTg4LDI4NS45NzA2IFE1NDYuNjIwNiwyODYuMjY3NSA1NDUuOTgsMjg2LjQwODEgUTU0NS4zMzk0LDI4Ni41NjQ0IDU0NC42MzYzLDI4Ni41NjQ0IFE1NDIuMTM2MywyODYuNTY0NCA1NDAuODA4MSwyODQuOTIzOCBRNTM5LjQ5NTYsMjgzLjI2NzUgNTM5LjQ5NTYsMjgwLjE0MjUgUTUzOS40OTU2LDI3Ny4wMTc1IDU0MC44MDgxLDI3NS4zNjEzIFE1NDIuMTM2MywyNzMuNzA1IDU0NC42MzYzLDI3My43MDUgUTU0NS4zMzk0LDI3My43MDUgNTQ1Ljk4LDI3My44NjEzIFE1NDYuNjM2MywyNzQuMDE3NSA1NDcuMTk4OCwyNzQuMzE0NCBMNTQ3LjE5ODgsMjc3LjAzMzEgUTU0Ni41NzM4LDI3Ni40NTUgNTQ1Ljk4LDI3Ni4xODk0IFE1NDUuMzg2MywyNzUuOTA4MSA1NDQuNzYxMywyNzUuOTA4MSBRNTQzLjQxNzUsMjc1LjkwODEgNTQyLjczLDI3Ni45ODYzIFE1NDIuMDQyNSwyNzguMDQ4OCA1NDIuMDQyNSwyODAuMTQyNSBRNTQyLjA0MjUsMjgyLjIzNjMgNTQyLjczLDI4My4zMTQ0IFE1NDMuNDE3NSwyODQuMzc2OSA1NDQuNzYxMywyODQuMzc2OSBRNTQ1LjM4NjMsMjg0LjM3NjkgNTQ1Ljk4LDI4NC4xMTEzIFE1NDYuNTczOCwyODMuODMgNTQ3LjE5ODgsMjgzLjI1MTkgTDU0Ny4xOTg4LDI4NS45NzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjU0ODgiIHg9IjU1Ni4yMyIgeT0iMjg1LjE3NjciPlRlc3REYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MzIuMjMiIHgyPSI2NjkuNzc4OCIgeTE9IjI5NC4zMyIgeTI9IjI5NC4zMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MzIuMjMiIHgyPSI2NjkuNzc4OCIgeTE9IjMwMi4zMyIgeTI9IjMwMi4zMyIvPjwvZz48IS0tY2xhc3MgQ2FjaGVkRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDYWNoZWREYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIzMiIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfQ2FjaGVkRGF0YUFjY2VzcyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE2Mi4wMjU0IiB4PSI3MDUuOTkiIHk9IjI2Ni4zMyIvPjxlbGxpcHNlIGN4PSI3MTguOTkiIGN5PSIyODAuMzMiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik03MjEuOTU4OCwyODUuOTcwNiBRNzIxLjM4MDYsMjg2LjI2NzUgNzIwLjc0LDI4Ni40MDgxIFE3MjAuMDk5NCwyODYuNTY0NCA3MTkuMzk2MywyODYuNTY0NCBRNzE2Ljg5NjMsMjg2LjU2NDQgNzE1LjU2ODEsMjg0LjkyMzggUTcxNC4yNTU2LDI4My4yNjc1IDcxNC4yNTU2LDI4MC4xNDI1IFE3MTQuMjU1NiwyNzcuMDE3NSA3MTUuNTY4MSwyNzUuMzYxMyBRNzE2Ljg5NjMsMjczLjcwNSA3MTkuMzk2MywyNzMuNzA1IFE3MjAuMDk5NCwyNzMuNzA1IDcyMC43NCwyNzMuODYxMyBRNzIxLjM5NjMsMjc0LjAxNzUgNzIxLjk1ODgsMjc0LjMxNDQgTDcyMS45NTg4LDI3Ny4wMzMxIFE3MjEuMzMzOCwyNzYuNDU1IDcyMC43NCwyNzYuMTg5NCBRNzIwLjE0NjMsMjc1LjkwODEgNzE5LjUyMTMsMjc1LjkwODEgUTcxOC4xNzc1LDI3NS45MDgxIDcxNy40OSwyNzYuOTg2MyBRNzE2LjgwMjUsMjc4LjA0ODggNzE2LjgwMjUsMjgwLjE0MjUgUTcxNi44MDI1LDI4Mi4yMzYzIDcxNy40OSwyODMuMzE0NCBRNzE4LjE3NzUsMjg0LjM3NjkgNzE5LjUyMTMsMjg0LjM3NjkgUTcyMC4xNDYzLDI4NC4zNzY5IDcyMC43NCwyODQuMTExMyBRNzIxLjMzMzgsMjgzLjgzIDcyMS45NTg4LDI4My4yNTE5IEw3MjEuOTU4OCwyODUuOTcwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzNC4wMjU0IiB4PSI3MzAuOTkiIHk9IjI4NS4xNzY3Ij5DYWNoZWREYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDYuOTkiIHgyPSI4NjcuMDE1NCIgeTE9IjI5NC4zMyIgeTI9IjI5NC4zMyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI3MDYuOTkiIHgyPSI4NjcuMDE1NCIgeTE9IjMwMi4zMyIgeTI9IjMwMi4zMyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIERhdGFBY2Nlc3MgdG8gVGVzdERhdGFBY2Nlc3MtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRGF0YUFjY2VzcyIgZGF0YS1lbnRpdHktMj0iVGVzdERhdGFBY2Nlc3MiIGRhdGEtc291cmNlLWxpbmU9IjM1IiBkYXRhLXVpZD0ibG5rMTEiIGlkPSJsaW5rX0RhdGFBY2Nlc3NfVGVzdERhdGFBY2Nlc3MiPjxwYXRoIGNvZGVMaW5lPSIzNSIgZD0iTTY2MC4xNTM4LDE5Ny4xNzg2IEM2NDEuODIzOCwyMjUuMTA4NiA2MjkuMTMsMjQ0LjQ3IDYxNC44OSwyNjYuMTYiIGZpbGw9Im5vbmUiIGlkPSJEYXRhQWNjZXNzLWJhY2t0by1UZXN0RGF0YUFjY2VzcyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNjcwLjAzLDE4Mi4xMyw2NTUuMTM3NiwxOTMuODg2Niw2NjUuMTcsMjAwLjQ3MDcsNjcwLjAzLDE4Mi4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIERhdGFBY2Nlc3MgdG8gQ2FjaGVkRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJEYXRhQWNjZXNzIiBkYXRhLWVudGl0eS0yPSJDYWNoZWREYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIzNiIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19EYXRhQWNjZXNzX0NhY2hlZERhdGFBY2Nlc3MiPjxwYXRoIGNvZGVMaW5lPSIzNiIgZD0iTTczNS4zMjk0LDE5Ny43MjQ2IEM3NTEuNDI5NCwyMjUuNjU0NiA3NjIuMjgsMjQ0LjQ3IDc3NC43OSwyNjYuMTYiIGZpbGw9Im5vbmUiIGlkPSJEYXRhQWNjZXNzLWJhY2t0by1DYWNoZWREYXRhQWNjZXNzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI3MjYuMzQsMTgyLjEzLDczMC4xMzEyLDIwMC43MjEsNzQwLjUyNzYsMTk0LjcyODEsNzI2LjM0LDE4Mi4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtWUDNGSmlDbTNDUmxVT2dtNHVYZjNuMW5nSzEySUVtMnRBUWZ5YkFsMnFrSm80dnR3VlJrZjctc2JaNW56RVZGRl9scE5UblhYSjlPQzR3ODA3ZUY5U2hQNXk0MXhNamoyZkhQMkRQZVlDUXhjTW00ZU94V0lmalNJci1XUkpMaldMYy0gLXp3TDE1RWVJX2JNMjBTTEFsYVBvUlhJMTF6Z3N0TUtEMnZZWUlIRU9jMWFDSEJlV1Y5aGg0M01QNDhfcnNsb0E5c25tV3dCbmZLWlJuZ2E0TjJYZ3lhY21WTmNFd0xZOUxTelUycU9XVkdrOW1vVU9qaE5iSHpUYlUwOUZ0ZDMycUlHY1RSOHQzd1pwS0hScTJaUkhneWQtTjVoTjk2RjVfM3pXdkFEeWxrdk44c3RoNHlmTEFFR29ERHlZN2F3cHI4cTczZFZhZ19vUy1XOVBMY3BxTGJkLVd6Si1PRDFwYzdad3RXSnFfUGwweVF0OGlTbnRJMC1XenZYQ1A2SlZWQTJmLURZU0pydXRWd0ItMDQwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="122">12.2 ドメインモデルの定義<a class="headerlink" href="#122" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/elixir/lib/ch12/travel_guide.ex</code></p>
<p>Elixir では構造体（struct）を使ってドメインモデルを定義します。</p>
<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">LocationId</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s2">&quot;位置情報 ID（Value Object）&quot;</span>
<span class="w">  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p">[</span><span class="ss">:value</span><span class="p">]</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">value</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p">}</span>
<span class="k">end</span>

<span class="kd">defmodule</span><span class="w"> </span><span class="nc">Location</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s2">&quot;ロケーション&quot;</span>
<span class="w">  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:population</span><span class="p">]</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span>
<span class="w">          </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">population</span><span class="p">:</span><span class="w"> </span><span class="n">non_neg_integer</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">non_neg_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">population</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">population</span><span class="p">:</span><span class="w"> </span><span class="n">population</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="kd">defmodule</span><span class="w"> </span><span class="nc">Attraction</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s2">&quot;アトラクション（観光地）&quot;</span>
<span class="w">  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p">[</span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:description</span><span class="p">,</span><span class="w"> </span><span class="ss">:location</span><span class="p">]</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span>
<span class="w">          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span>
<span class="w">          </span><span class="ss">location</span><span class="p">:</span><span class="w"> </span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="ss">location</span><span class="p">:</span><span class="w"> </span><span class="n">location</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="123">12.3 データアクセス層の抽象化<a class="headerlink" href="#123" title="Permanent link">&para;</a></h3>
<p>Elixir では <code>@behaviour</code> を使用してインターフェースを定義します。</p>
<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">DataAccess</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="w">  </span><span class="sh">データアクセス層のインターフェース（振る舞い）</span>

<span class="sh">  実装モジュールはこの振る舞いを実装する必要がある。</span>
<span class="w">  </span><span class="sh">&quot;&quot;&quot;</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">ordering</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="ss">:by_name</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">:by_location_population</span>

<span class="w">  </span><span class="na">@callback</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">ordering</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">              </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>

<span class="w">  </span><span class="na">@callback</span><span class="w"> </span><span class="n">find_artists_from_location</span><span class="p">(</span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">              </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">MusicArtist</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>

<span class="w">  </span><span class="na">@callback</span><span class="w"> </span><span class="n">find_movies_about_location</span><span class="p">(</span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">              </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Movie</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>

<span class="w">  </span><span class="na">@callback</span><span class="w"> </span><span class="n">find_hotels_near_location</span><span class="p">(</span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">              </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Hotel</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI2NHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTEzcHg7aGVpZ2h0OjI2NHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDkxMyAyNjQiIHdpZHRoPSI5MTNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBEYXRhQWNjZXNzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkRhdGFBY2Nlc3MiIGRhdGEtc291cmNlLWxpbmU9IjMiIGRhdGEtdWlkPSJlbnQwMDAyIiBpZD0iZW50aXR5X0RhdGFBY2Nlc3MiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQ4MS41MjkzIiB4PSIxNDUuMzYiIHk9IjEyIi8+PGVsbGlwc2UgY3g9IjM0MS41NzQ0IiBjeT0iMjYiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zMzcuNDk2MiwyMS43NjU2IEwzMzcuNDk2MiwxOS42MDk0IEwzNDQuODg2OSwxOS42MDk0IEwzNDQuODg2OSwyMS43NjU2IEwzNDIuNDE4MSwyMS43NjU2IEwzNDIuNDE4MSwyOS44NDM4IEwzNDQuODg2OSwyOS44NDM4IEwzNDQuODg2OSwzMiBMMzM3LjQ5NjIsMzIgTDMzNy40OTYyLDI5Ljg0MzggTDMzOS45NjUsMjkuODQzOCBMMzM5Ljk2NSwyMS43NjU2IEwzMzcuNDk2MiwyMS43NjU2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS42MDA2IiB4PSIzNTkuMDc0NCIgeT0iMzAuODQ2NyI+RGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTQ2LjM2IiB4Mj0iNjI1Ljg4OTMiIHkxPSI0MCIgeTI9IjQwIi8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjE0Ni4zNiIgeDI9IjYyNS44ODkzIiB5MT0iNDgiIHkyPSI0OCIvPjxlbGxpcHNlIGN4PSIxNTYuMzYiIGN5PSI2MS42NDg0IiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNzkuMDgwMSIgeD0iMTYzLjM2IiB5PSI2NC45OTUxIj5maW5kX2F0dHJhY3Rpb25zKCk6IHs6b2ssIFtBdHRyYWN0aW9uXX0gfCB7OmVycm9yLCBTdHJpbmd9PC90ZXh0PjxlbGxpcHNlIGN4PSIxNTYuMzYiIGN5PSI3Ny45NDUzIiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NTcuNTI5MyIgeD0iMTYzLjM2IiB5PSI4MS4yOTIiPmZpbmRfYXJ0aXN0c19mcm9tX2xvY2F0aW9uKCk6IHs6b2ssIFtNdXNpY0FydGlzdF19IHwgezplcnJvciwgU3RyaW5nfTwvdGV4dD48ZWxsaXBzZSBjeD0iMTU2LjM2IiBjeT0iOTQuMjQyMiIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDM1LjYzMzgiIHg9IjE2My4zNiIgeT0iOTcuNTg4OSI+ZmluZF9tb3ZpZXNfYWJvdXRfbG9jYXRpb24oKTogezpvaywgW01vdmllXX0gfCB7OmVycm9yLCBTdHJpbmd9PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMyIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X0dNTjMiPjxwYXRoIGQ9Ik02NjIuMDIsMzguMzEgTDY2Mi4wMiw1NC40NCBMNjI3LjEsNTguNDQgTDY2Mi4wMiw2Mi40NCBMNjYyLjAyLDc4LjU3NTYgQTAsMCAwIDAgMCA2NjIuMDIsNzguNTc1NiBMOTA2LjIzNTUsNzguNTc1NiBBMCwwIDAgMCAwIDkwNi4yMzU1LDc4LjU3NTYgTDkwNi4yMzU1LDQ4LjMxIEw4OTYuMjM1NSwzOC4zMSBMNjYyLjAyLDM4LjMxIEEwLDAgMCAwIDAgNjYyLjAyLDM4LjMxIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTg5Ni4yMzU1LDM4LjMxIEw4OTYuMjM1NSw0OC4zMSBMOTA2LjIzNTUsNDguMzEgTDg5Ni4yMzU1LDM4LjMxIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTk5LjQzMDgiIHg9IjY2OC4wMiIgeT0iNTUuMzc2OSI+QGJlaGF2aW91ciAmIzEyMzk1OyYjMTI0MjQ7JiMxMjQyNzsmIzI1MzkxOyYjMTI0Mjc7JiMzMzMxMDsmIzEyMzU2OyYjMjM0NTA7JiMzMjY4MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjIzLjIxNTUiIHg9IjY2OC4wMiIgeT0iNzAuNTA5NyI+JiMyMzQ1NTsmIzM1MDEzOyYjMTI1MTQ7JiMxMjQ3MjsmIzEyNTE3OyYjMTI1NDA7JiMxMjUyMzsmIzEyMzk5OyBAaW1wbCB0cnVlICYjMTIzOTE7JiMyMzQ1NTsmIzM1MDEzOzwvdGV4dD48L2c+PCEtLWNsYXNzIFRlc3REYXRhQWNjZXNzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlRlc3REYXRhQWNjZXNzIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfVGVzdERhdGFBY2Nlc3MiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM2MC4yNTI5IiB4PSIxMiIgeT0iMTY0Ljg5Ii8+PGVsbGlwc2UgY3g9IjEzMi42MDIxIiBjeT0iMTc4Ljg5IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTM1LjU3MDgsMTg0LjUzMDYgUTEzNC45OTI3LDE4NC44Mjc1IDEzNC4zNTIxLDE4NC45NjgxIFExMzMuNzExNCwxODUuMTI0NCAxMzMuMDA4MywxODUuMTI0NCBRMTMwLjUwODMsMTg1LjEyNDQgMTI5LjE4MDIsMTgzLjQ4MzggUTEyNy44Njc3LDE4MS44Mjc1IDEyNy44Njc3LDE3OC43MDI1IFExMjcuODY3NywxNzUuNTc3NSAxMjkuMTgwMiwxNzMuOTIxMyBRMTMwLjUwODMsMTcyLjI2NSAxMzMuMDA4MywxNzIuMjY1IFExMzMuNzExNCwxNzIuMjY1IDEzNC4zNTIxLDE3Mi40MjEzIFExMzUuMDA4MywxNzIuNTc3NSAxMzUuNTcwOCwxNzIuODc0NCBMMTM1LjU3MDgsMTc1LjU5MzEgUTEzNC45NDU4LDE3NS4wMTUgMTM0LjM1MjEsMTc0Ljc0OTQgUTEzMy43NTgzLDE3NC40NjgxIDEzMy4xMzMzLDE3NC40NjgxIFExMzEuNzg5NiwxNzQuNDY4MSAxMzEuMTAyMSwxNzUuNTQ2MyBRMTMwLjQxNDYsMTc2LjYwODggMTMwLjQxNDYsMTc4LjcwMjUgUTEzMC40MTQ2LDE4MC43OTYzIDEzMS4xMDIxLDE4MS44NzQ0IFExMzEuNzg5NiwxODIuOTM2OSAxMzMuMTMzMywxODIuOTM2OSBRMTMzLjc1ODMsMTgyLjkzNjkgMTM0LjM1MjEsMTgyLjY3MTMgUTEzNC45NDU4LDE4Mi4zOSAxMzUuNTcwOCwxODEuODExOSBMMTM1LjU3MDgsMTg0LjUzMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuNTQ4OCIgeD0iMTUwLjEwMjEiIHk9IjE4My43MzY3Ij5UZXN0RGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMiIHgyPSIzNzEuMjUyOSIgeTE9IjE5Mi44OSIgeTI9IjE5Mi44OSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIxMyIgeDI9IjM3MS4yNTI5IiB5MT0iMjAwLjg5IiB5Mj0iMjAwLjg5Ii8+PGVsbGlwc2UgY3g9IjIzIiBjeT0iMjE0LjUzODQiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1Ny44MDM3IiB4PSIzMCIgeT0iMjE3Ljg4NTEiPmZpbmRfYXR0cmFjdGlvbnMoKTogezpvaywgW0F0dHJhY3Rpb25dfTwvdGV4dD48ZWxsaXBzZSBjeD0iMjMiIGN5PSIyMzAuODM1MyIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzM2LjI1MjkiIHg9IjMwIiB5PSIyMzQuMTgyIj5maW5kX2FydGlzdHNfZnJvbV9sb2NhdGlvbigpOiB7Om9rLCBbTXVzaWNBcnRpc3RdfTwvdGV4dD48ZWxsaXBzZSBjeD0iMjMiIGN5PSIyNDcuMTMyMiIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzE0LjM1NzQiIHg9IjMwIiB5PSIyNTAuNDc4OSI+ZmluZF9tb3ZpZXNfYWJvdXRfbG9jYXRpb24oKTogezpvaywgW01vdmllXX08L3RleHQ+PC9nPjwhLS1jbGFzcyBGYWlsaW5nRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJGYWlsaW5nRGF0YUFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMjAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iZW50aXR5X0ZhaWxpbmdEYXRhQWNjZXNzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjkyLjg5MDYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzNDUuNTU1NyIgeD0iNDA3LjM1IiB5PSIxNjQuODkiLz48ZWxsaXBzZSBjeD0iNTEyLjU0NzMiIGN5PSIxNzguODkiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01MTUuNTE2LDE4NC41MzA2IFE1MTQuOTM3OSwxODQuODI3NSA1MTQuMjk3MywxODQuOTY4MSBRNTEzLjY1NjYsMTg1LjEyNDQgNTEyLjk1MzUsMTg1LjEyNDQgUTUxMC40NTM1LDE4NS4xMjQ0IDUwOS4xMjU0LDE4My40ODM4IFE1MDcuODEyOSwxODEuODI3NSA1MDcuODEyOSwxNzguNzAyNSBRNTA3LjgxMjksMTc1LjU3NzUgNTA5LjEyNTQsMTczLjkyMTMgUTUxMC40NTM1LDE3Mi4yNjUgNTEyLjk1MzUsMTcyLjI2NSBRNTEzLjY1NjYsMTcyLjI2NSA1MTQuMjk3MywxNzIuNDIxMyBRNTE0Ljk1MzUsMTcyLjU3NzUgNTE1LjUxNiwxNzIuODc0NCBMNTE1LjUxNiwxNzUuNTkzMSBRNTE0Ljg5MSwxNzUuMDE1IDUxNC4yOTczLDE3NC43NDk0IFE1MTMuNzAzNSwxNzQuNDY4MSA1MTMuMDc4NSwxNzQuNDY4MSBRNTExLjczNDgsMTc0LjQ2ODEgNTExLjA0NzMsMTc1LjU0NjMgUTUxMC4zNTk4LDE3Ni42MDg4IDUxMC4zNTk4LDE3OC43MDI1IFE1MTAuMzU5OCwxODAuNzk2MyA1MTEuMDQ3MywxODEuODc0NCBRNTExLjczNDgsMTgyLjkzNjkgNTEzLjA3ODUsMTgyLjkzNjkgUTUxMy43MDM1LDE4Mi45MzY5IDUxNC4yOTczLDE4Mi42NzEzIFE1MTQuODkxLDE4Mi4zOSA1MTUuNTE2LDE4MS44MTE5IEw1MTUuNTE2LDE4NC41MzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI3LjY2MTEiIHg9IjUzMC4wNDczIiB5PSIxODMuNzM2NyI+RmFpbGluZ0RhdGFBY2Nlc3M8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjQwOC4zNSIgeDI9Ijc1MS45MDU3IiB5MT0iMTkyLjg5IiB5Mj0iMTkyLjg5Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjQwOC4zNSIgeDI9Ijc1MS45MDU3IiB5MT0iMjAwLjg5IiB5Mj0iMjAwLjg5Ii8+PGVsbGlwc2UgY3g9IjQxOC4zNSIgY3k9IjIxNC41Mzg0IiBmaWxsPSIjRkZGRkZGIiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTcuODAzNyIgeD0iNDI1LjM1IiB5PSIyMTcuODg1MSI+ZmluZF9hdHRyYWN0aW9ucygpOiB7Om9rLCBbQXR0cmFjdGlvbl19PC90ZXh0PjxlbGxpcHNlIGN4PSI0MTguMzUiIGN5PSIyMzAuODM1MyIgZmlsbD0iI0ZGRkZGRiIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzA3LjU1NTciIHg9IjQyNS4zNSIgeT0iMjM0LjE4MiI+ZmluZF9hcnRpc3RzX2Zyb21fbG9jYXRpb24oKTogezplcnJvciwgU3RyaW5nfTwvdGV4dD48ZWxsaXBzZSBjeD0iNDE4LjM1IiBjeT0iMjQ3LjEzMjIiIGZpbGw9IiNGRkZGRkYiIHJ4PSIzIiByeT0iMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMyMS41NTU3IiB4PSI0MjUuMzUiIHk9IjI1MC40Nzg5Ij5maW5kX21vdmllc19hYm91dF9sb2NhdGlvbigpOiB7OmVycm9yLCBTdHJpbmd9PC90ZXh0PjwvZz48IS0tcmV2ZXJzZSBsaW5rIERhdGFBY2Nlc3MgdG8gVGVzdERhdGFBY2Nlc3MtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRGF0YUFjY2VzcyIgZGF0YS1lbnRpdHktMj0iVGVzdERhdGFBY2Nlc3MiIGRhdGEtc291cmNlLWxpbmU9IjI2IiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfRGF0YUFjY2Vzc19UZXN0RGF0YUFjY2VzcyI+PHBhdGggY29kZUxpbmU9IjI2IiBkPSJNMzEyLjkyMiwxMTYuMzgxMyBDMjg4Ljg0MiwxMzUuMTExMyAyNzUuMjYsMTQ1LjY3IDI1MS4xOCwxNjQuNDEiIGZpbGw9Im5vbmUiIGlkPSJEYXRhQWNjZXNzLWJhY2t0by1UZXN0RGF0YUFjY2VzcyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMzI3LjEzLDEwNS4zMywzMDkuMjM4MiwxMTEuNjQ1MywzMTYuNjA1OCwxMjEuMTE3MywzMjcuMTMsMTA1LjMzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgRGF0YUFjY2VzcyB0byBGYWlsaW5nRGF0YUFjY2Vzcy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJEYXRhQWNjZXNzIiBkYXRhLWVudGl0eS0yPSJGYWlsaW5nRGF0YUFjY2VzcyIgZGF0YS1zb3VyY2UtbGluZT0iMjciIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19EYXRhQWNjZXNzX0ZhaWxpbmdEYXRhQWNjZXNzIj48cGF0aCBjb2RlTGluZT0iMjciIGQ9Ik00NTkuMzI4LDExNi4zODEzIEM0ODMuNDA4LDEzNS4xMTEzIDQ5Ni45OSwxNDUuNjcgNTIxLjA4LDE2NC40MSIgZmlsbD0ibm9uZSIgaWQ9IkRhdGFBY2Nlc3MtYmFja3RvLUZhaWxpbmdEYXRhQWNjZXNzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PHBvbHlnb24gZmlsbD0ibm9uZSIgcG9pbnRzPSI0NDUuMTIsMTA1LjMzLDQ1NS42NDQyLDEyMS4xMTczLDQ2My4wMTE4LDExMS42NDUzLDQ0NS4xMiwxMDUuMzMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1balA2bklXRDE0OFJ4Vk9nbkttbnZXNjJIMHg2cHFheGFzNnBzYWk2eHRSMHhib1F2dWt1SzBsZTQ1V2dBWTBJSXJZQnVDYWlxWi02VEdKYkM0MUFtc005Y19kX18tTVE3a1pBSXEwaXZBaVBHYUpHMTVuOEVFTjVGMjZhajNEWC1XQWhqU29CMzFRNU1UZFVsME9FNmxnWjFjVlRKRkt6V001SWJDVGhLdThHQ2dheG9oSk00YmdtVjYxdHZlSFF5NTVIU1pjRUJtbGlRLWlpY3Fkc0tya1NqN1REUWN4QV90WTFYSjZjSU9CM0o5VDExUEtGTVJDYWt4d0VFM1JYcXhCQUhvd3hWUndSNWtuWlRrVkhvRmhkelU3alh5eWR6dWw3QXZHeWtVdE52YXlqZEJYLXhUMGZEWjdlWGE4YmJlTnpVWlo2ZnNiMy1vOVc4VU83bkw1aFFZa2VzMjNWWkxTOVBYWnBZNjFRdV9ZZGRmWlRURk00YnNDNm1ObHk1VFFNemlpdWRdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="124">12.4 スタブ実装<a class="headerlink" href="#124" title="Permanent link">&para;</a></h3>
<p>テスト用のスタブ実装を作成します。</p>
<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">TestDataAccess</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s2">&quot;テスト用のスタブ実装&quot;</span>
<span class="w">  </span><span class="na">@behaviour</span><span class="w"> </span><span class="nc">DataAccess</span>

<span class="w">  </span><span class="na">@impl</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">_ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="n">attractions</span><span class="w"> </span><span class="o">=</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="s2">&quot;Empty&quot;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="p">[</span>
<span class="w">            </span><span class="nc">Attraction</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2"> Tower&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;A famous tower&quot;</span><span class="p">,</span><span class="w"> </span><span class="na">@test_location</span><span class="p">),</span>
<span class="w">            </span><span class="nc">Attraction</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2"> Park&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;A beautiful park&quot;</span><span class="p">,</span><span class="w"> </span><span class="na">@test_location</span><span class="p">),</span>
<span class="w">            </span><span class="nc">Attraction</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2"> Museum&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;A great museum&quot;</span><span class="p">,</span><span class="w"> </span><span class="na">@test_location</span><span class="p">)</span>
<span class="w">          </span><span class="p">]</span>
<span class="w">      </span><span class="k">end</span>

<span class="w">    </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">attractions</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)}</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="na">@impl</span><span class="w"> </span><span class="no">true</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">find_artists_from_location</span><span class="p">(</span><span class="n">_location_id</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="n">artists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="nc">MusicArtist</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Test Artist 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Pop&quot;</span><span class="p">),</span>
<span class="w">      </span><span class="nc">MusicArtist</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Test Artist 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Rock&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">]</span>

<span class="w">    </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)}</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># 他のコールバックも同様に実装...</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="125-agent">12.5 Agent を使用したキャッシュ<a class="headerlink" href="#125-agent" title="Permanent link">&para;</a></h3>
<p>Elixir の Agent を使用して、スレッドセーフなキャッシュを実装します。</p>
<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">CachedDataAccess</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="w">  </span><span class="sh">Agent を使ったキャッシュ付きデータアクセス</span>
<span class="w">  </span><span class="sh">&quot;&quot;&quot;</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">start_link</span><span class="p">(</span><span class="n">module</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">()}</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">start_link</span><span class="p">(</span><span class="n">data_access_module</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nc">Agent</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="p">%{</span>
<span class="w">        </span><span class="ss">module</span><span class="p">:</span><span class="w"> </span><span class="n">data_access_module</span><span class="p">,</span>
<span class="w">        </span><span class="ss">attractions_cache</span><span class="p">:</span><span class="w"> </span><span class="p">%{},</span>
<span class="w">        </span><span class="ss">artists_cache</span><span class="p">:</span><span class="w"> </span><span class="p">%{},</span>
<span class="w">        </span><span class="ss">movies_cache</span><span class="p">:</span><span class="w"> </span><span class="p">%{},</span>
<span class="w">        </span><span class="ss">hotels_cache</span><span class="p">:</span><span class="w"> </span><span class="p">%{}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="n">pid</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">DataAccess</span><span class="o">.</span><span class="n">ordering</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">          </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">ordering</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="w">    </span><span class="nc">Agent</span><span class="o">.</span><span class="n">get_and_update</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">attractions_cache</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="no">nil</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">find_attractions</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span>

<span class="w">          </span><span class="k">case</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">attractions</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">              </span><span class="n">new_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">attractions_cache</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">attractions</span><span class="p">)</span>
<span class="w">              </span><span class="p">{</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="p">%{</span><span class="n">state</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">attractions_cache</span><span class="p">:</span><span class="w"> </span><span class="n">new_cache</span><span class="p">}}</span>

<span class="w">            </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">}</span>
<span class="w">          </span><span class="k">end</span>

<span class="w">        </span><span class="n">cached</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="p">{{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">cached</span><span class="p">},</span><span class="w"> </span><span class="n">state</span><span class="p">}</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="c1"># 他のメソッドも同様に実装...</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkFDVElWSVRZIiBoZWlnaHQ9IjQxNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDA4cHg7aGVpZ2h0OjQxNnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQwOCA0MTYiIHdpZHRoPSI0MDhweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjxlbGxpcHNlIGN4PSIxODAuMDAxMSIgY3k9IjE1IiBmaWxsPSIjRkZGRkZGIiByeD0iMTAiIHJ5PSIxMCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI4LjAwMDgiIHg9IjExNi4wMDA3IiB5PSI0NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOC4wMDA4IiB4PSIxMjYuMDAwNyIgeT0iNjYuMTM4NyI+JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OyYjMTI0NjE7JiMxMjU0MDsmIzI5OTgzOyYjMjUxMDQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjU1LjcxMTciIHg9IjUyLjE0NTMiIHk9Ijk4Ljk2ODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMiIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMzUuNzExNyIgeD0iNjIuMTQ1MyIgeT0iMTIwLjEwNzQiPkFnZW50LmdldF9hbmRfdXBkYXRlICYjMTIzOTE7JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OyYjMzA5MDY7JiMzNTQ2OTs8L3RleHQ+PHBvbHlnb24gZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSIxMTYuNTgyMywxNTIuOTM3NSwyNDMuNDE5OSwxNTIuOTM3NSwyNTUuNDE5OSwxNjQuOTM3NSwyNDMuNDE5OSwxNzYuOTM3NSwxMTYuNTgyMywxNzYuOTM3NSwxMDQuNTgyMywxNjQuOTM3NSwxMTYuNTgyMywxNTIuOTM3NSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNi44Mzc1IiB4PSIxMTYuNTgyMyIgeT0iMTY4Ljc0NTYiPiYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzsmIzEyMzk1OyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTIzNTQ7JiMxMjQyNjs/PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjExIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5LjAwODMiIHg9Ijg1LjU3NCIgeT0iMTYyLjM0MzMiPnllczwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMSIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMy43MDE3IiB4PSIyNTUuNDE5OSIgeT0iMTYyLjM0MzMiPm5vPC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTY0LjAwMTEiIHg9IjYiIHk9IjE4Ni45Mzc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ0LjAwMTEiIHg9IjE2IiB5PSIyMDguMDc2MiI+JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OyYjMTIzNjM7JiMxMjQyNTsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzM2ODIwOyYjMjEzNjQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzMuOTY4OCIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTY0LjAwMTEiIHg9IjE5MC4wMDExIiB5PSIxODYuOTM3NSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NC4wMDExIiB4PSIyMDAuMDAxMSIgeT0iMjA4LjA3NjIiPiYjMjI4MDY7JiMzNzA5NjsmIzEyNTE0OyYjMTI0NzI7JiMxMjUxNzsmIzEyNTQwOyYjMTI1MjM7JiMxMjQzNDsmIzIxNjI4OyYjMTI0MDM7JiMyMDk4NjsmIzEyMzc1OzwvdGV4dD48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1Mi4wMDEiIHg9IjE5Ni4wMDExIiB5PSIyNDAuOTA2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEyIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMi4wMDEiIHg9IjIwNi4wMDExIiB5PSIyNjIuMDQ0OSI+JiMzMjA4MDsmIzI2NTI0OyYjMTI0MzQ7JiMxMjQ2MTsmIzEyNTE1OyYjMTI0ODM7JiMxMjQ3MTsmIzEyNTE3OyYjMTIzOTU7JiMyMDQ0NTsmIzIzMzg0OzwvdGV4dD48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMzLjk2ODgiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjgwLjAwMDUiIHg9IjIzMi4wMDE0IiB5PSIyOTQuODc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTIiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjAuMDAwNSIgeD0iMjQyLjAwMTQiIHk9IjMxNi4wMTM3Ij4mIzMyMDgwOyYjMjY1MjQ7JiMxMjQzNDsmIzM2ODIwOyYjMjEzNjQ7PC90ZXh0Pjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMTgwLjAwMTEsMzM0Ljg0MzgsMTkyLjAwMTEsMzQ2Ljg0MzgsMTgwLjAwMTEsMzU4Ljg0MzgsMTY4LjAwMTEsMzQ2Ljg0MzgsMTgwLjAwMTEsMzM0Ljg0MzgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMjExLjAwMTEsMzY5LjcxMDkgTDIxMS4wMDExLDM4NS44NDM4IEwxOTEuMDAxMSwzODkuODQzOCBMMjExLjAwMTEsMzkzLjg0MzggTDIxMS4wMDExLDQwOS45NzY2IEEwLDAgMCAwIDAgMjExLjAwMTEsNDA5Ljk3NjYgTDQwMS4wMDEzLDQwOS45NzY2IEEwLDAgMCAwIDAgNDAxLjAwMTMsNDA5Ljk3NjYgTDQwMS4wMDEzLDM3OS43MTA5IEwzOTEuMDAxMywzNjkuNzEwOSBMMjExLjAwMTEsMzY5LjcxMDkgQTAsMCAwIDAgMCAyMTEuMDAxMSwzNjkuNzEwOSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zOTEuMDAxMywzNjkuNzEwOSBMMzkxLjAwMTMsMzc5LjcxMDkgTDQwMS4wMDEzLDM3OS43MTA5IEwzOTEuMDAxMywzNjkuNzEwOSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNy42MTE5IiB4PSIyMTcuMDAxMSIgeT0iMzg2Ljc3NzgiPkFnZW50ICYjMTI0MzQ7JiMyMDM1MTsmIzI5OTkyOyYjMTIzNzU7JiMxMjM4Mzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5LjAwMDIiIHg9IjIxNy4wMDExIiB5PSI0MDEuOTEwNiI+JiMxMjQ3MzsmIzEyNTI0OyYjMTI0ODM7JiMxMjQ4OTsmIzEyNDc1OyYjMTI1NDA7JiMxMjUwMTsmIzEyMzk0OyYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzs8L3RleHQ+PGVsbGlwc2UgY3g9IjE4MC4wMDExIiBjeT0iMzg5Ljg0MzgiIGZpbGw9Im5vbmUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGVsbGlwc2UgY3g9IjE4MC4wMDExIiBjeT0iMzg5Ljg0MzgiIGZpbGw9IiNGRkZGRkYiIHJ4PSI2IiByeT0iNiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIxODAuMDAxMSIgeDI9IjE4MC4wMDExIiB5MT0iMjUiIHkyPSI0NSIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTc2LjAwMTEsMzUsMTgwLjAwMTEsNDUsMTg0LjAwMTEsMzUsMTgwLjAwMTEsMzkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgwLjAwMTEiIHgyPSIxODAuMDAxMSIgeTE9Ijc4Ljk2ODgiIHkyPSI5OC45Njg4Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNzYuMDAxMSw4OC45Njg4LDE4MC4wMDExLDk4Ljk2ODgsMTg0LjAwMTEsODguOTY4OCwxODAuMDAxMSw5Mi45Njg4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjI3Mi4wMDE2IiB4Mj0iMjcyLjAwMTYiIHkxPSIyMjAuOTA2MyIgeTI9IjI0MC45MDYzIi8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyNjguMDAxNiwyMzAuOTA2MywyNzIuMDAxNiwyNDAuOTA2MywyNzYuMDAxNiwyMzAuOTA2MywyNzIuMDAxNiwyMzQuOTA2MyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzIuMDAxNiIgeDI9IjI3Mi4wMDE2IiB5MT0iMjc0Ljg3NSIgeTI9IjI5NC44NzUiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI2OC4wMDE2LDI4NC44NzUsMjcyLjAwMTYsMjk0Ljg3NSwyNzYuMDAxNiwyODQuODc1LDI3Mi4wMDE2LDI4OC44NzUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTA0LjU4MjMiIHgyPSI4OC4wMDA1IiB5MT0iMTY0LjkzNzUiIHkyPSIxNjQuOTM3NSIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI4OC4wMDA1IiB4Mj0iODguMDAwNSIgeTE9IjE2NC45Mzc1IiB5Mj0iMTg2LjkzNzUiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9Ijg0LjAwMDUsMTc2LjkzNzUsODguMDAwNSwxODYuOTM3NSw5Mi4wMDA1LDE3Ni45Mzc1LDg4LjAwMDUsMTgwLjkzNzUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjU1LjQxOTkiIHgyPSIyNzIuMDAxNiIgeTE9IjE2NC45Mzc1IiB5Mj0iMTY0LjkzNzUiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMjcyLjAwMTYiIHgyPSIyNzIuMDAxNiIgeTE9IjE2NC45Mzc1IiB5Mj0iMTg2LjkzNzUiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI2OC4wMDE2LDE3Ni45Mzc1LDI3Mi4wMDE2LDE4Ni45Mzc1LDI3Ni4wMDE2LDE3Ni45Mzc1LDI3Mi4wMDE2LDE4MC45Mzc1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9Ijg4LjAwMDUiIHgyPSI4OC4wMDA1IiB5MT0iMjIwLjkwNjMiIHkyPSIzNDYuODQzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI4OC4wMDA1IiB4Mj0iMTY4LjAwMTEiIHkxPSIzNDYuODQzOCIgeTI9IjM0Ni44NDM4Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNTguMDAxMSwzNDIuODQzOCwxNjguMDAxMSwzNDYuODQzOCwxNTguMDAxMSwzNTAuODQzOCwxNjIuMDAxMSwzNDYuODQzOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzIuMDAxNiIgeDI9IjI3Mi4wMDE2IiB5MT0iMzI4Ljg0MzgiIHkyPSIzNDYuODQzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIyNzIuMDAxNiIgeDI9IjE5Mi4wMDExIiB5MT0iMzQ2Ljg0MzgiIHkyPSIzNDYuODQzOCIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjAyLjAwMTEsMzQyLjg0MzgsMTkyLjAwMTEsMzQ2Ljg0MzgsMjAyLjAwMTEsMzUwLjg0MzgsMTk4LjAwMTEsMzQ2Ljg0MzgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTgwLjAwMTEiIHgyPSIxODAuMDAxMSIgeTE9IjEzMi45Mzc1IiB5Mj0iMTUyLjkzNzUiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE3Ni4wMDExLDE0Mi45Mzc1LDE4MC4wMDExLDE1Mi45Mzc1LDE4NC4wMDExLDE0Mi45Mzc1LDE4MC4wMDExLDE0Ni45Mzc1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjE4MC4wMDExIiB4Mj0iMTgwLjAwMTEiIHkxPSIzNTguODQzOCIgeTI9IjM3OC44NDM4Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNzYuMDAxMSwzNjguODQzOCwxODAuMDAxMSwzNzguODQzOCwxODQuMDAxMSwzNjguODQzOCwxODAuMDAxMSwzNzIuODQzOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwhLS1TUkM9W1BQM0RKVzhuNThOdFZPZ3dXdXFGMDBpWkZlSEJxWjFiUTFaUW9LbW44U1A1c21NWThLNjNGbWtMMTNLSWE5S1E1SjdwQzlUWHkydGlPNDhDQjdqeGxkRkVsTGtvR2NpSy1udlg3OExMbmRxSWExZWM5U2FFYzZwV0dyR1dmUWVSWTNmdHplR2QwaG5WT1BBWVdXV1M2bG5EMmZ3TGUyRTRHYWEyWUwwRXoxWkNGSFczLVh0Q3VfOHZKUmd6LU40ZFJ4enROU2hiamFqYmFOMmRNRlNUOFlhNnpSSTY5VnQ5T2pZczAybFpwQmdiNmU1Zk1iVkc0SVdELWNHZFktcWc3NlNRRENua0xiMmRlNWloUDE1cnVfUGg3YjRsZjNaM1hHTllYeWlWQ20zSjFfc0gwYlBkSGczRnV4Q2ZnOVV1RUc1cmJLVXZ2QXFwbHhrbnl5cjJpLVdzN2JfX3J3bllrQ0ZBd05jNFpuME5Uamswa0hNOWJlVjBMWlp4WmZCa20yUTB3WTdHZHMyVUtzVkowbHNyUjc4MVFoWU1jQmhZckVtTl0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="126">12.6 アプリケーションの組み立て<a class="headerlink" href="#126" title="Permanent link">&para;</a></h3>
<p>すべてのコンポーネントを組み合わせてアプリケーションを構築します。</p>
<div class="highlight"><pre><span></span><code><span class="na">@spec</span><span class="w"> </span><span class="n">travel_guide</span><span class="p">(</span><span class="n">module</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">travel_guide</span><span class="p">(</span><span class="n">data_access_module</span><span class="p">,</span><span class="w"> </span><span class="n">attraction_name</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="n">data_access_module</span><span class="o">.</span><span class="n">find_attractions</span><span class="p">(</span><span class="n">attraction_name</span><span class="p">,</span><span class="w"> </span><span class="ss">:by_location_population</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[]}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;No attractions found&quot;</span><span class="p">}</span>

<span class="w">    </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">attraction</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p">]}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="n">build_guide</span><span class="p">(</span><span class="n">data_access_module</span><span class="p">,</span><span class="w"> </span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>

<span class="w">    </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="kd">defp</span><span class="w"> </span><span class="n">build_guide</span><span class="p">(</span><span class="n">data_access_module</span><span class="p">,</span><span class="w"> </span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="n">attractions_searched</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">location_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attraction</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">id</span>

<span class="w">  </span><span class="n">artists_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_access_module</span><span class="o">.</span><span class="n">find_artists_from_location</span><span class="p">(</span><span class="n">location_id</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">movies_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data_access_module</span><span class="o">.</span><span class="n">find_movies_about_location</span><span class="p">(</span><span class="n">location_id</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>

<span class="w">  </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="p">[</span><span class="n">artists_result</span><span class="p">,</span><span class="w"> </span><span class="n">movies_result</span><span class="p">]</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">&amp;</span><span class="n">match?</span><span class="p">({</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">},</span><span class="w"> </span><span class="ni">&amp;1</span><span class="p">))</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="n">artists</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">artists_result</span><span class="w"> </span><span class="k">do</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">list</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="k">end</span>

<span class="w">  </span><span class="n">movies</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">movies_result</span><span class="w"> </span><span class="k">do</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">list</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">list</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">[]</span>
<span class="w">    </span><span class="k">end</span>

<span class="w">  </span><span class="n">subjects</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">movies</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="w">  </span><span class="n">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">SearchReport</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">attractions_searched</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="p">)</span>

<span class="w">  </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">attraction</span><span class="p">,</span><span class="w"> </span><span class="n">subjects</span><span class="p">,</span><span class="w"> </span><span class="n">report</span><span class="p">)}</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM3OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzI5cHg7aGVpZ2h0OjM3OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyOSAzNzgiIHdpZHRoPSIzMjlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIHRyYXZlbF9ndWlkZSA/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0idHJhdmVsX2d1aWRlIC4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfdHJhdmVsX2d1aWRlIC4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI3MS44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMxMSIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC42NDE1IiB4PSIxMDIuMTc5MyIgeT0iMjYuOTk1MSI+dHJhdmVsX2d1aWRlICYjMzgzMDY7JiMyNTk2ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgc3RlcDEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ic3RlcDEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X3N0ZXAxIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNjMuODA3MSIgeD0iNzcuMSIgeT0iNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDMuODA3MSIgeD0iODcuMSIgeT0iNjIuOTk1MSI+MS4gJiMxMjQ1MDsmIzEyNDg4OyYjMTI1MjE7JiMxMjQ2MzsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzI2OTA4OyYjMzIwMzQ7PC90ZXh0PjwvZz48IS0tZW50aXR5IHN0ZXAyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InN0ZXAyIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9zdGVwMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTQ5LjgwNzEiIHg9IjI4LjEiIHk9IjE0Ni4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI5LjgwNzEiIHg9IjM4LjEiIHk9IjE2Mi4yOTUxIj4yLiAmIzEyNDUwOyYjMTI1NDA7JiMxMjQ4NjsmIzEyNDUxOyYjMTI0NzM7JiMxMjQ4ODsmIzI2OTA4OyYjMzIwMzQ7PC90ZXh0PjwvZz48IS0tZW50aXR5IHN0ZXAzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InN0ZXAzIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9zdGVwMyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iOTMuODA3NCIgeD0iMjEzLjEiIHk9IjE0Ni4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzMuODA3NCIgeD0iMjIzLjEiIHk9IjE2Mi4yOTUxIj4zLiAmIzI2MTQ0OyYjMzAwMTE7JiMyNjkwODsmIzMyMDM0OzwvdGV4dD48L2c+PCEtLWVudGl0eSBzdGVwNC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJzdGVwNCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfc3RlcDQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE4My4wNDM3IiB4PSI3NS40OCIgeT0iMjQ1LjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjMuMDQzNyIgeD0iODUuNDgiIHk9IjI2MS41OTUxIj40LiBUcmF2ZWxHdWlkZSAmIzMyMDY4OyYjMTI0MTU7JiMzMTQzNTsmIzEyMzkwOzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxNiIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfR01OMTEiPjxwYXRoIGQ9Ik05MS41LDMzMC44OSBMOTEuNSwzNzEuMTU1NiBBMCwwIDAgMCAwIDkxLjUsMzcxLjE1NTYgTDI0Mi41MDAyLDM3MS4xNTU2IEEwLDAgMCAwIDAgMjQyLjUwMDIsMzcxLjE1NTYgTDI0Mi41MDAyLDM0MC44OSBMMjMyLjUwMDIsMzMwLjg5IEwxNzEsMzMwLjg5IEwxNjcsMjY4LjMzIEwxNjMsMzMwLjg5IEw5MS41LDMzMC44OSBBMCwwIDAgMCAwIDkxLjUsMzMwLjg5IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTIzMi41MDAyLDMzMC44OSBMMjMyLjUwMDIsMzQwLjg5IEwyNDIuNTAwMiwzNDAuODkgTDIzMi41MDAyLDMzMC44OSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSI5Ny41IiB5PSIzNDcuOTU2OSI+JiMxMjQ5NzsmIzEyNDc5OyYjMTI1NDA7JiMxMjUzMTsmIzEyNTEwOyYjMTI0ODM7JiMxMjQ4MTsmIzEyNTMxOyYjMTI0NjQ7JiMxMjM5MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9Ijk3LjUiIHk9IjM2My4wODk3Ij4mIzM1MDc5OyYjMjU5Njg7JiMxMjM5ODsmIzMyMDgwOyYjMjY1MjQ7JiMxMjQzNDsmIzIxNTEyOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tbGluayBzdGVwMSB0byBzdGVwMi0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJzdGVwMSIgZGF0YS1lbnRpdHktMj0ic3RlcDIiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJsbms3IiBpZD0ibGlua19zdGVwMV9zdGVwMiI+PHBhdGggZD0iTTE0Ni45LDY5LjcgQzEzOC44OCw3Ny4yNSAxMjguNjQsODguMDMgMTIyLDk5LjMgQzExMy4wOCwxMTQuNDMgMTA4Ljk4NTIsMTI4LjQ1MzcgMTA2LjMzNTIsMTQwLjM0MzciIGZpbGw9Im5vbmUiIGlkPSJzdGVwMS10by1zdGVwMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTA1LjAzLDE0Ni4yLDExMC44OTIxLDEzOC4yODU3LDEwNi4xMTc3LDE0MS4zMTk3LDEwMy4wODM2LDEzNi41NDU0LDEwNS4wMywxNDYuMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYzLjUyMSIgeD0iMTIzIiB5PSIxMTIuMzY2OSI+YXR0cmFjdGlvbjwvdGV4dD48L2c+PCEtLWxpbmsgc3RlcDEgdG8gc3RlcDMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0ic3RlcDEiIGRhdGEtZW50aXR5LTI9InN0ZXAzIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX3N0ZXAxX3N0ZXAzIj48cGF0aCBkPSJNMTY5LjgxLDY5LjU2IEMxODkuMTUsODguMTkgMjI1LjEzOTQsMTIyLjg2NjcgMjQ0LjYzOTQsMTQxLjY1NjciIGZpbGw9Im5vbmUiIGlkPSJzdGVwMS10by1zdGVwMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjQ4Ljk2LDE0NS44MiwyNDUuMjU0NywxMzYuNjk0NywyNDUuMzU5NSwxNDIuMzUwNiwyMzkuNzAzNiwxNDIuNDU1NSwyNDguOTYsMTQ1LjgyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjcuNTc3MSIgeD0iMjE2LjU1IiB5PSIxMTIuMzY2OSI+bG9jYXRpb24uaWQ8L3RleHQ+PC9nPjwhLS1saW5rIHN0ZXAyIHRvIHN0ZXA0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InN0ZXAyIiBkYXRhLWVudGl0eS0yPSJzdGVwNCIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJsbms5IiBpZD0ibGlua19zdGVwMl9zdGVwNCI+PHBhdGggZD0iTTEwOS44NSwxNjguODYgQzEyMi4xLDE4Ny40OSAxNDQuMzUxNCwyMjEuMzE4MSAxNTYuNzExNCwyNDAuMDk4MSIgZmlsbD0ibm9uZSIgaWQ9InN0ZXAyLXRvLXN0ZXA0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNjAuMDEsMjQ1LjExLDE1OC40MDM0LDIzNS4zOTMxLDE1Ny4yNjEyLDI0MC45MzM0LDE1MS43MjA4LDIzOS43OTEyLDE2MC4wMSwyNDUuMTEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MC42NjMxIiB4PSIxMzkuODMiIHk9IjIxMS42NjY5Ij5hcnRpc3RzPC90ZXh0PjwvZz48IS0tbGluayBzdGVwMyB0byBzdGVwNC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJzdGVwMyIgZGF0YS1lbnRpdHktMj0ic3RlcDQiIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0ibG5rMTAiIGlkPSJsaW5rX3N0ZXAzX3N0ZXA0Ij48cGF0aCBkPSJNMjUwLjA1LDE2OC44NiBDMjMyLjI0LDE4Ny40OSAxOTkuMjY2OSwyMjEuOTkzNyAxODEuMzA2OSwyNDAuNzczNyIgZmlsbD0ibm9uZSIgaWQ9InN0ZXAzLXRvLXN0ZXA0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNzcuMTYsMjQ1LjExLDE4Ni4yNzEyLDI0MS4zNzAyLDE4MC42MTU4LDI0MS40OTY1LDE4MC40ODk1LDIzNS44NDEsMTc3LjE2LDI0NS4xMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjY5MzQiIHg9IjIyMC4wNyIgeT0iMjExLjY2NjkiPm1vdmllczwvdGV4dD48L2c+PCEtLVNSQz1bTlAzQklpREc0OFJ0eW5IWnpXc3FvU2c1TXJfMGxIb0pHbXRhS2Y5WkQtOFl2dVc2dDRISFNMNkFuNjhIR0drclkyWnFPR09KVkdqcEtvSXhXVV94dnhPWHpoZDdTVUdvbm1TOGtJTU9GdEd2UVk5YU8teGszV3lTYy1GdFRQUFZCSkd5MThrNURjZno3S2JjZjE5STNvSVZJUndJY2ZEUXZoRDl5UDlmbzJBQzExX3JNdHRHd1gtYUphWlVhTm1oZW5ydHFCZzZabGREUk43dnRrNTZvcXFUVC1oTGprbERZaktublVsWXlPcFktcF9OMUFaN093LXRySko3Sk1JWUZDYUlKazF0ZTU1MkR4MU9YTko3WFlSbUl5cWc2V2VkNFg0cXpkX1kxTUU3SHQwNHUwVTJ1cnVXSEUwMWdORUl3X2hVOVFhZkFLS2doY2d2ZTdXRU54Rkp5ZmlLRm5NaEQ5ekVJNXZ5ZmFjVWZDMXo2d2ktRm0wMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="127-searchreport">12.7 SearchReport の導入<a class="headerlink" href="#127-searchreport" title="Permanent link">&para;</a></h3>
<p>テスト可能性を高めるため、<code>SearchReport</code> を導入します。</p>
<p><strong>ソースファイル</strong>: <code>app/elixir/lib/ch12/travel_guide.ex</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">SearchReport</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="s2">&quot;検索レポート&quot;</span>
<span class="w">  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p">[</span><span class="ss">:attractions_searched</span><span class="p">,</span><span class="w"> </span><span class="ss">:errors</span><span class="p">]</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span>
<span class="w">          </span><span class="ss">attractions_searched</span><span class="p">:</span><span class="w"> </span><span class="n">non_neg_integer</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()]</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">non_neg_integer</span><span class="p">(),</span><span class="w"> </span><span class="p">[</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()])</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">attractions_searched</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="p">\\</span><span class="w"> </span><span class="p">[])</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">attractions_searched</span><span class="p">:</span><span class="w"> </span><span class="n">attractions_searched</span><span class="p">,</span><span class="w"> </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">errors</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">empty</span><span class="p">()</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">empty</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">[])</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">add_error</span><span class="p">(</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">add_error</span><span class="p">(</span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">report</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="p">%{</span><span class="n">report</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">errors</span><span class="p">:</span><span class="w"> </span><span class="n">report</span><span class="o">.</span><span class="n">errors</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">error</span><span class="p">]}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjI0OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6Mzk3cHg7aGVpZ2h0OjI0OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDM5NyAyNDgiIHdpZHRoPSIzOTdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBUcmF2ZWxHdWlkZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJUcmF2ZWxHdWlkZSIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfVHJhdmVsR3VpZGUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iOTIuODkwNiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIxMy40ODkzIiB4PSIxNC40MSIgeT0iMTIiLz48ZWxsaXBzZSBjeD0iNzUuMDExNiIgY3k9IjI2IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzcuOTgwMywzMS42NDA2IFE3Ny40MDIyLDMxLjkzNzUgNzYuNzYxNiwzMi4wNzgxIFE3Ni4xMjA5LDMyLjIzNDQgNzUuNDE3OCwzMi4yMzQ0IFE3Mi45MTc4LDMyLjIzNDQgNzEuNTg5NywzMC41OTM4IFE3MC4yNzcyLDI4LjkzNzUgNzAuMjc3MiwyNS44MTI1IFE3MC4yNzcyLDIyLjY4NzUgNzEuNTg5NywyMS4wMzEzIFE3Mi45MTc4LDE5LjM3NSA3NS40MTc4LDE5LjM3NSBRNzYuMTIwOSwxOS4zNzUgNzYuNzYxNiwxOS41MzEzIFE3Ny40MTc4LDE5LjY4NzUgNzcuOTgwMywxOS45ODQ0IEw3Ny45ODAzLDIyLjcwMzEgUTc3LjM1NTMsMjIuMTI1IDc2Ljc2MTYsMjEuODU5NCBRNzYuMTY3OCwyMS41NzgxIDc1LjU0MjgsMjEuNTc4MSBRNzQuMTk5MSwyMS41NzgxIDczLjUxMTYsMjIuNjU2MyBRNzIuODI0MSwyMy43MTg4IDcyLjgyNDEsMjUuODEyNSBRNzIuODI0MSwyNy45MDYzIDczLjUxMTYsMjguOTg0NCBRNzQuMTk5MSwzMC4wNDY5IDc1LjU0MjgsMzAuMDQ2OSBRNzYuMTY3OCwzMC4wNDY5IDc2Ljc2MTYsMjkuNzgxMyBRNzcuMzU1MywyOS41IDc3Ljk4MDMsMjguOTIxOSBMNzcuOTgwMywzMS42NDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODQuNzg2MSIgeD0iOTIuNTExNiIgeT0iMzAuODQ2NyI+VHJhdmVsR3VpZGU8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1LjQxIiB4Mj0iMjI2Ljg5OTMiIHkxPSI0MCIgeTI9IjQwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ2Ljk3OTUiIHg9IjIwLjQxIiB5PSI1Ni45OTUxIj5hdHRyYWN0aW9uOiBBdHRyYWN0aW9uPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExOS45MDkyIiB4PSIyMC40MSIgeT0iNzMuMjkyIj5zdWJqZWN0czogW1N0cmluZ108L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAxLjQ4OTMiIHg9IjIwLjQxIiB5PSI4OS41ODg5Ij5zZWFyY2hfcmVwb3J0OiBTZWFyY2hSZXBvcnQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1LjQxIiB4Mj0iMjI2Ljg5OTMiIHkxPSI5Ni44OTA2IiB5Mj0iOTYuODkwNiIvPjwvZz48IS0tY2xhc3MgU2VhcmNoUmVwb3J0LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlNlYXJjaFJlcG9ydCIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfU2VhcmNoUmVwb3J0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijc2LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMTguMzAxOCIgeD0iMTIiIHk9IjE2NC44OSIvPjxlbGxpcHNlIGN4PSI2OS42NzkyIiBjeT0iMTc4Ljg5IiBmaWxsPSIjRkZGRkZGIiByeD0iOSIgcnk9IjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNNzIuNjQ3OSwxODQuNTMwNiBRNzIuMDY5OCwxODQuODI3NSA3MS40MjkyLDE4NC45NjgxIFE3MC43ODg2LDE4NS4xMjQ0IDcwLjA4NTQsMTg1LjEyNDQgUTY3LjU4NTQsMTg1LjEyNDQgNjYuMjU3MywxODMuNDgzOCBRNjQuOTQ0OCwxODEuODI3NSA2NC45NDQ4LDE3OC43MDI1IFE2NC45NDQ4LDE3NS41Nzc1IDY2LjI1NzMsMTczLjkyMTMgUTY3LjU4NTQsMTcyLjI2NSA3MC4wODU0LDE3Mi4yNjUgUTcwLjc4ODYsMTcyLjI2NSA3MS40MjkyLDE3Mi40MjEzIFE3Mi4wODU0LDE3Mi41Nzc1IDcyLjY0NzksMTcyLjg3NDQgTDcyLjY0NzksMTc1LjU5MzEgUTcyLjAyMjksMTc1LjAxNSA3MS40MjkyLDE3NC43NDk0IFE3MC44MzU0LDE3NC40NjgxIDcwLjIxMDQsMTc0LjQ2ODEgUTY4Ljg2NjcsMTc0LjQ2ODEgNjguMTc5MiwxNzUuNTQ2MyBRNjcuNDkxNywxNzYuNjA4OCA2Ny40OTE3LDE3OC43MDI1IFE2Ny40OTE3LDE4MC43OTYzIDY4LjE3OTIsMTgxLjg3NDQgUTY4Ljg2NjcsMTgyLjkzNjkgNzAuMjEwNCwxODIuOTM2OSBRNzAuODM1NCwxODIuOTM2OSA3MS40MjkyLDE4Mi42NzEzIFE3Mi4wMjI5LDE4Mi4zOSA3Mi42NDc5LDE4MS44MTE5IEw3Mi42NDc5LDE4NC41MzA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuNDQzNCIgeD0iODcuMTc5MiIgeT0iMTgzLjczNjciPlNlYXJjaFJlcG9ydDwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMiIHgyPSIyMjkuMzAxOCIgeTE9IjE5Mi44OSIgeTI9IjE5Mi44OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwNi4zMDE4IiB4PSIxOCIgeT0iMjA5Ljg4NTEiPmF0dHJhY3Rpb25zX3NlYXJjaGVkOiBpbnRlZ2VyPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMy42MTIzIiB4PSIxOCIgeT0iMjI2LjE4MiI+ZXJyb3JzOiBbU3RyaW5nXTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTMiIHgyPSIyMjkuMzAxOCIgeTE9IjIzMy40ODM4IiB5Mj0iMjMzLjQ4MzgiLz48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjUiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9HTU41Ij48cGF0aCBkPSJNMjY1LjY1LDE4My4wNSBMMjY1LjY1LDE5OS4xOCBMMjMwLjcyLDIwMy4xOCBMMjY1LjY1LDIwNy4xOCBMMjY1LjY1LDIyMy4zMTU2IEEwLDAgMCAwIDAgMjY1LjY1LDIyMy4zMTU2IEwzOTAuNjUwMSwyMjMuMzE1NiBBMCwwIDAgMCAwIDM5MC42NTAxLDIyMy4zMTU2IEwzOTAuNjUwMSwxOTMuMDUgTDM4MC42NTAxLDE4My4wNSBMMjY1LjY1LDE4My4wNSBBMCwwIDAgMCAwIDI2NS42NSwxODMuMDUiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzgwLjY1MDEsMTgzLjA1IEwzODAuNjUwMSwxOTMuMDUgTDM5MC42NTAxLDE5My4wNSBMMzgwLjY1MDEsMTgzLjA1IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjI3MS42NSIgeT0iMjAwLjExNjkiPiYjMjY5MDg7JiMzMjAzNDsmIzEyMzk4OyYjMzIxMTM7JiMzNTMzNjsmIzI0NzczOyYjMjI1Nzc7JiMxMjM5Mjs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjI3MS42NSIgeT0iMjE1LjI0OTciPiYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMjQ3NzM7JiMyMjU3NzsmIzEyNDM0OyYjMjA0NDU7JiMyNTM0NTs8L3RleHQ+PC9nPjwhLS1saW5rIFRyYXZlbEd1aWRlIHRvIFNlYXJjaFJlcG9ydC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJUcmF2ZWxHdWlkZSIgZGF0YS1lbnRpdHktMj0iU2VhcmNoUmVwb3J0IiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImxuazQiIGlkPSJsaW5rX1RyYXZlbEd1aWRlX1NlYXJjaFJlcG9ydCI+PHBhdGggY29kZUxpbmU9IjE0IiBkPSJNMTIxLjE1LDEwNSBDMTIxLjE1LDEyNC4yNSAxMjEuMTUsMTQwLjQxIDEyMS4xNSwxNTguNjkiIGZpbGw9Im5vbmUiIGlkPSJUcmF2ZWxHdWlkZS10by1TZWFyY2hSZXBvcnQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjEyMS4xNSwxNjQuNjksMTI1LjE1LDE1NS42OSwxMjEuMTUsMTU5LjY5LDExNy4xNSwxNTUuNjksMTIxLjE1LDE2NC42OSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtLb3A5SUNyRExJWjhJU3BDdS05QXBhYWlCYk84QUtlaUl5cm5CeXJDSUxNZXZhZWlBSWJBSjJ4OXBDLXBLZDI0aXhjQUl2RW9LZkRCWWdxS2VlREJZWkJwcWNFdlliQ0pZdjhwdWVqSTJfQUJJZ21LV2k3UzgzMkZnblBjRUI4ZVlrZDV5SDN6Z0liTTJmYnY5UWRmZ0tMU2dLTDUtS044TFcyREdOUVRoZ3VUZ1pMU1VWYWJnR2Y1Y1VhUDlHaHZRUVhvcHZSQ1VSdmJxVUY2VFMtdFJkb25la0RQUy1sSjFIaVZEd3hXVWpvcXVkN3BvaVZEVXcxMkpQRVV4OV94aEFVSEFwS2xIRzVhODAwMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="_1">テスト戦略<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="128">12.8 関数型プログラミングのテスト<a class="headerlink" href="#128" title="Permanent link">&para;</a></h3>
<p>関数型プログラミングでは、純粋関数のおかげでテストが非常に簡単になります。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDY3cHg7aGVpZ2h0OjQ5OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ2NyA0OTgiIHdpZHRoPSI0NjdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ4MC44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQ0OSIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjE5NC41MDAyIiB5PSIyNi45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyMzk4OyYjMzEyNzg7JiMzOTAwNjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHVuaXQtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InVuaXQiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl91bml0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijg5LjMiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzMjQiIHg9IjEwMSIgeT0iNjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMjI4LjAwMDIiIHk9Ijc3Ljk5NTEiPiYjMjEzMzY7JiMyMDMwNzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHByb3BlcnR5LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJwcm9wZXJ0eSIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJjbHVzdGVyX3Byb3BlcnR5Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijg5LjI5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzI0IiB4PSIxMDEiIHk9IjIxNy4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIxODYuMDAwMyIgeT0iMjMyLjI5NTEiPiYjMTI1MDM7JiMxMjUyNTsmIzEyNDk3OyYjMTI0ODY7JiMxMjQ1MTsmIzEyNTA1OyYjMTI1NDA7JiMxMjQ3MzsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGludGVncmF0aW9uLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJpbnRlZ3JhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iY2x1c3Rlcl9pbnRlZ3JhdGlvbiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4OS4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzg1IiB4PSI0NCIgeT0iMzcxLjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjIwMS41MDAyIiB5PSIzODYuNTg1MSI+JiMzMjExMzsmIzIxNTEyOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfLi4uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzMS45OTk1IiB4PSIxMjUiIHk9IjEwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSIxMzUiIHk9IjEyMS45OTUxIj4mIzMyMDIwOyYjMzE4ODM7JiMzODMwNjsmIzI1OTY4OyYjMTIzOTg7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV8uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODkuOTk5NyIgeD0iMjkyIiB5PSIxMDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OS45OTk3IiB4PSIzMDIiIHk9IjEyMS45OTUxIj4mIzM5NjQwOyYjMzY4OTU7JiMxMjUzOTsmIzI5NDIwOyYjMzE0MzU7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV8uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwMy45OTk2IiB4PSIxMjUiIHk9IjI2MC4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iMTM1IiB5PSIyNzYuMjk1MSI+JiMxMjUyMTsmIzEyNTMxOyYjMTI0ODA7JiMxMjUxMjsmIzIwODM3OyYjMjExNDc7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5Xy4uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjExNy45OTk2IiB4PSIyNjQiIHk9IjI2MC4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjc0IiB5PSIyNzYuMjk1MSI+JiMxOTk4MTsmIzIyNzkzOyYjMjY0NjU7JiMyMDIxNDsmIzEyMzk4OyYjMjY5MDg7JiMzNTM4ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5Xy4uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTQ1Ljk5OTUiIHg9IjY4IiB5PSI0MTQuNTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iNzgiIHk9IjQzMC41ODUxIj4mIzEyNDY3OyYjMTI1MzE7JiMxMjUwOTsmIzEyNTQwOyYjMTI0OTM7JiMxMjUzMTsmIzEyNDg4OyYjMzY4OTk7JiMyNTY1ODs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Lz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5Xy4uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTM2LjcxNjMiIHg9IjI0OC42NCIgeT0iNDE0LjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE2LjcxNjMiIHg9IjI1OC42NCIgeT0iNDMwLjU4NTEiPiYjMTI0NzM7JiMxMjQ3OTsmIzEyNTAyOy8mIzEyNTE0OyYjMTI0ODM7JiMxMjQ2MzsmIzIwMzUxOyYjMjk5OTI7PC90ZXh0PjwvZz48IS0tbGluayB1bml0IHRvIHByb3BlcnR5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InVuaXQiIGRhdGEtZW50aXR5LTI9InByb3BlcnR5IiBkYXRhLXNvdXJjZS1saW5lPSIyMCIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua191bml0X3Byb3BlcnR5Ij48cGF0aCBkPSJNNDE3LDE1Mi40MTM3IEM0MTcsMTUyLjY1OSA0MTcsMTUyLjkwNTIgNDE3LDE1My4xNTIyIEM0MTcsMTUzLjY0NjEgNDE3LDE1NC4xNDM0IDQxNywxNTQuNjQzOSBDNDE3LDE1OC42NDc1IDQxNywxNjIuODUzOSA0MTcsMTY3LjE5NTYgQzQxNywxNzUuODc4OCA0MTcsMTg1LjEwMjggNDE3LDE5NC4zMjYzIEM0MTcsMTk4LjkzOCA0MTcsMjAzLjU0OTYgNDE3LDIwOC4wOTMzIEM0MTcsMjEwLjM2NTIgNDE3LDIxMi42MjAyIDQxNywyMTQuODQ5NyBDNDE3LDIxNS40MDcxIDQxNywyMTUuOTYyOSA0MTcsMjE2LjUxNyBDNDE3LDIxNi42NTU1IDQxNywyMTAuNzkzOSA0MTcsMjEwLjkzMjIiIGZpbGw9Im5vbmUiIGlkPSJ1bml0LXRvLXByb3BlcnR5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI0MTcsMjE2LjkzMjIsNDIxLDIwNy45MzIyLDQxNywyMTEuOTMyMiw0MTMsMjA3LjkzMjIsNDE3LDIxNi45MzIyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjQxOCIgeT0iMTg5LjM2NjkiPiYjMzUwMzY7JiMyMzQzNjs8L3RleHQ+PC9nPjwhLS1saW5rIHByb3BlcnR5IHRvIGludGVncmF0aW9uLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InByb3BlcnR5IiBkYXRhLWVudGl0eS0yPSJpbnRlZ3JhdGlvbiIgZGF0YS1zb3VyY2UtbGluZT0iMjEiIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfcHJvcGVydHlfaW50ZWdyYXRpb24iPjxwYXRoIGQ9Ik00MTcuODk4MSwzMDYuNzA3MSBDNDE3LjkwNDYsMzA2Ljk1MjQgNDE3LjkxMSwzMDcuMTk4NiA0MTcuOTE3NSwzMDcuNDQ1NSBDNDE3LjkzMDUsMzA3LjkzOTUgNDE3Ljk0MzYsMzA4LjQzNjcgNDE3Ljk1NjcsMzA4LjkzNzEgQzQxOC4wNjIsMzEyLjk0MDQgNDE4LjE3MjYsMzE3LjE0NjYgNDE4LjI4NjcsMzIxLjQ4OCBDNDE4LjUxNSwzMzAuMTcwOCA0MTguNzU3NSwzMzkuMzk0NCA0MTksMzQ4LjYxNzUgQzQxOS4xMjEzLDM1My4yMjkxIDQxOS4yNDI1LDM1Ny44NDA1IDQxOS4zNjIsMzYyLjM4NDIgQzQxOS40MjE3LDM2NC42NTYgNDE5LjQ4MSwzNjYuOTEwOSA0MTkuNTM5NiwzNjkuMTQwNCBDNDE5LjU1NDMsMzY5LjY5NzggNDE5LjU2ODksMzcwLjI1MzUgNDE5LjU4MzUsMzcwLjgwNzYgQzQxOS41ODcxLDM3MC45NDYxIDQxOS40MzMsMzY1LjA4NjYgNDE5LjQzNjcsMzY1LjIyNDkiIGZpbGw9Im5vbmUiIGlkPSJwcm9wZXJ0eS10by1pbnRlZ3JhdGlvbiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNDE5LjU5NDQsMzcxLjIyMjgsNDIzLjM1NjQsMzYyLjEyMDgsNDE5LjQ2MywzNjYuMjI0Niw0MTUuMzU5MiwzNjIuMzMxMSw0MTkuNTk0NCwzNzEuMjIyOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSI0MTkuODgiIHk9IjM0My42NTY5Ij4mIzM1MDM2OyYjMjM0MzY7PC90ZXh0PjwvZz48IS0tU1JDPVtOUDNGSmk5MDQ4VmxWT2dyVC1CVFctX0lPOEREaTNIckZIWFpLWmxITDZpSlo4V09HT0xZS2VGS0Z3V0hXVjBtcS10SWp4MWpmQXRTOVpsVnBsVVJNUUZSeWV2Q2pBZ2FnOEFXb3NLZ2dQTWdKNEk0NHBKNzIxT1UtVHBwZS13VEkwd0EwN0RRbVVtb21xR1l4UDh6TFE0bkxQUnFCSUJvWm1QX2p3RGNCeG53Wk9WYXY1eV82aEdZdW52WG1rcmRGaDE1dU4wYm0zTjI0RTRZX1VXWXQyMUNxbWI1ZXdSTkQ1Y2QtdmFMdUdiWFg2MFdGQjNaSHRQc2tfRzV0bXhoZHVRVFJaM3ZZbEU0X1ZSMmN3dlEtVVNSZ3JsXzdPZkF2T2VrS1FNY3ZYZnBiNmV3SUlYbXFqZ0EzM1VpX3VXUENhUHBaajFTSC1XWDA5ZWxtTXBFNnJ4WVpBdGZpS2dicE5vNzNSOW1zeW1fNXhBTmY1dEtCdWJWXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="129">12.9 純粋関数のテスト<a class="headerlink" href="#129" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/elixir/lib/ch12/testing.ex</code></p>
<p>純粋関数は入力と出力だけを考えればよいため、テストが簡単です。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># テスト対象の純粋関数</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">filter_popular_locations</span><span class="p">([</span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">()],</span><span class="w"> </span><span class="n">non_neg_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">[</span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">()]</span>
<span class="kd">def</span><span class="w"> </span><span class="n">filter_popular_locations</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">min_population</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">population</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">min_population</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>
<span class="k">end</span>

<span class="na">@spec</span><span class="w"> </span><span class="n">sort_by_population</span><span class="p">([</span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()])</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">[</span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()]</span>
<span class="kd">def</span><span class="w"> </span><span class="n">sort_by_population</span><span class="p">(</span><span class="n">attractions</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">attractions</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">population</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="ss">:desc</span><span class="p">)</span>
<span class="k">end</span>

<span class="na">@spec</span><span class="w"> </span><span class="n">aggregate_results</span><span class="p">([{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="p">()}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}])</span><span class="w"> </span><span class="o">::</span>
<span class="w">        </span><span class="p">{[</span><span class="n">any</span><span class="p">()],</span><span class="w"> </span><span class="p">[</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">aggregate_results</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="p">{[],</span><span class="w"> </span><span class="p">[]},</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">successes</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">do</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">successes</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">value</span><span class="p">],</span><span class="w"> </span><span class="n">errors</span><span class="p">}</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">successes</span><span class="p">,</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="p">[</span><span class="n">reason</span><span class="p">]}</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">  </span><span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="1210">12.10 プロパティベーステスト<a class="headerlink" href="#1210" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/elixir/lib/ch12/testing.ex</code></p>
<p>ランダムな入力を生成して不変条件をテストします。</p>
<div class="highlight"><pre><span></span><code><span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">プロパティをテスト（指定回数実行）</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">check_property</span><span class="p">(</span><span class="n">pos_integer</span><span class="p">(),</span><span class="w"> </span><span class="p">(</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">boolean</span><span class="p">()))</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="ss">:ok</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">check_property</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="n">property_fn</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">results</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">try</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="n">property_fn</span><span class="o">.</span><span class="p">()</span>
<span class="w">      </span><span class="k">rescue</span>
<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">false</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">all?</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="ss">:ok</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">failed_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="o">!</span><span class="ni">&amp;1</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Property failed </span><span class="si">#{</span><span class="n">failed_count</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">iterations</span><span class="si">}</span><span class="s2"> times&quot;</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">filter_popular_locations の不変条件をテスト</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">verify_filter_properties</span><span class="p">(</span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="ss">:ok</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">verify_filter_properties</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">check_property</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">locations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_locations</span><span class="p">(</span><span class="ss">:rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
<span class="w">    </span><span class="n">min_population</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_positive_int</span><span class="p">(</span><span class="mi">5_000_000</span><span class="p">)</span>

<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">filter_popular_locations</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="n">min_population</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># プロパティ1: 結果のサイズは入力以下</span>
<span class="w">    </span><span class="n">size_property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">locations</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># プロパティ2: 結果のすべての要素は条件を満たす</span>
<span class="w">    </span><span class="n">all_meet_condition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">all?</span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">population</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">min_population</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># プロパティ3: 条件を満たす要素はすべて結果に含まれる</span>
<span class="w">    </span><span class="n">qualifying</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="o">.</span><span class="n">population</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">min_population</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>
<span class="w">    </span><span class="n">all_included</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">all?</span><span class="p">(</span><span class="n">qualifying</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">loc</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">size_property</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all_meet_condition</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">all_included</span>
<span class="w">  </span><span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQyOXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MjkycHg7aGVpZ2h0OjQyOXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI5MiA0MjkiIHdpZHRoPSIyOTJweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMyMy4xOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI3NCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSI3Mi4wMDAzIiB5PSIyNi45OTUxIj4mIzEyNTAzOyYjMTI1MjU7JiMxMjQ5NzsmIzEyNDg2OyYjMTI0NTE7JiMxMjUwNTsmIzEyNTQwOyYjMTI0NzM7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5IGdlbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJnZW4iIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2dlbiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTUwLjQ3MDciIHg9IjczLjc2IiB5PSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC40NzA3IiB4PSI4My43NiIgeT0iNjIuOTk1MSI+cmFuZG9tX2xvY2F0aW9uLzA8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcmFuZG9tLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InJhbmRvbSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfcmFuZG9tIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNDUuOTk5NSIgeD0iNzYiIHk9IjEzMC4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSI4NiIgeT0iMTQ2LjI4NTEiPiYjMTI1MjE7JiMxMjUzMTsmIzEyNDgwOyYjMTI1MTI7JiMxMjQ4NzsmIzEyNTQwOyYjMTI0Nzk7JiMyOTk4MzsmIzI1MTA0OzwvdGV4dD48L2c+PCEtLWVudGl0eSB2ZXJpZnktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idmVyaWZ5IiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV92ZXJpZnkiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjExNy45OTk2IiB4PSIyOCIgeT0iMjEzLjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMzgiIHk9IjIyOS41ODUxIj4mIzEyNTAzOyYjMTI1MjU7JiMxMjQ5NzsmIzEyNDg2OyYjMTI0NTE7JiMyNjkwODsmIzM1Mzg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSByZXBlYXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0icmVwZWF0IiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9yZXBlYXQiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0Mi40NzIyIiB4PSI3Ny43NiIgeT0iMjk2Ljg5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTIyLjQ3MjIiIHg9Ijg3Ljc2IiB5PSIzMTIuODg1MSI+TiYjMjIyMzg7JiMzMjM2ODsmIzEyNDI2OyYjMzY4MjA7JiMxMjM3NTsmIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xMSIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5X0dNTjExIj48cGF0aCBkPSJNODYuNSwzODIuMTggTDg2LjUsNDIyLjQ0NTYgQTAsMCAwIDAgMCA4Ni41LDQyMi40NDU2IEwyMTEuNTAwMSw0MjIuNDQ1NiBBMCwwIDAgMCAwIDIxMS41MDAxLDQyMi40NDU2IEwyMTEuNTAwMSwzOTIuMTggTDIwMS41MDAxLDM4Mi4xOCBMMTUzLDM4Mi4xOCBMMTQ5LDMxOS42MiBMMTQ1LDM4Mi4xOCBMODYuNSwzODIuMTggQTAsMCAwIDAgMCA4Ni41LDM4Mi4xOCIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0yMDEuNTAwMSwzODIuMTggTDIwMS41MDAxLDM5Mi4xOCBMMjExLjUwMDEsMzkyLjE4IEwyMDEuNTAwMSwzODIuMTgiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDQuMDAwMSIgeD0iOTIuNSIgeT0iMzk5LjI0NjkiPiYjMTI1MjE7JiMxMjUzMTsmIzEyNDgwOyYjMTI1MTI7JiMxMjM5NDsmIzIwODM3OyYjMjExNDc7JiMxMjM5MTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iOTIuNSIgeT0iNDE0LjM3OTciPiYjMTk5ODE7JiMyMjc5MzsmIzI2NDY1OyYjMjAyMTQ7JiMxMjQzNDsmIzI2OTA4OyYjMzUzODg7PC90ZXh0PjwvZz48IS0tbGluayBnZW4gdG8gcmFuZG9tLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImdlbiIgZGF0YS1lbnRpdHktMj0icmFuZG9tIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0ibG5rNyIgaWQ9ImxpbmtfZ2VuX3JhbmRvbSI+PHBhdGggZD0iTTE0OSw2OS43NyBDMTQ5LDg1LjM1IDE0OSwxMDguMjMgMTQ5LDEyMy44MSIgZmlsbD0ibm9uZSIgaWQ9Imdlbi10by1yYW5kb20iIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE0OSwxMjkuODEsMTUzLDEyMC44MSwxNDksMTI0LjgxLDE0NSwxMjAuODEsMTQ5LDEyOS44MSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayByYW5kb20gdG8gdmVyaWZ5LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InJhbmRvbSIgZGF0YS1lbnRpdHktMj0idmVyaWZ5IiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX3JhbmRvbV92ZXJpZnkiPjxwYXRoIGQ9Ik0xNDAuODksMTUzLjA3IEMxMjkuMDEsMTY4LjY1IDExMC42MjgxLDE5Mi43NTg4IDk4Ljc0ODEsMjA4LjMzODgiIGZpbGw9Im5vbmUiIGlkPSJyYW5kb20tdG8tdmVyaWZ5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI5NS4xMSwyMTMuMTEsMTAzLjc0NzksMjA4LjM3ODYsOTguMTQxOCwyMDkuMTM0LDk3LjM4NjQsMjAzLjUyNzgsOTUuMTEsMjEzLjExIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHZlcmlmeSB0byByZXBlYXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0idmVyaWZ5IiBkYXRhLWVudGl0eS0yPSJyZXBlYXQiIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0ibG5rOSIgaWQ9ImxpbmtfdmVyaWZ5X3JlcGVhdCI+PHBhdGggZD0iTTk1LjExLDIzNi4zNyBDMTA2Ljk5LDI1MS45NSAxMjUuMzczNCwyNzYuMDQ3NyAxMzcuMjUzNCwyOTEuNjM3NyIgZmlsbD0ibm9uZSIgaWQ9InZlcmlmeS10by1yZXBlYXQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjE0MC44OSwyOTYuNDEsMTM4LjYxNjYsMjg2LjgyNzEsMTM3Ljg1OTUsMjkyLjQzMzEsMTMyLjI1MzUsMjkxLjY3NiwxNDAuODksMjk2LjQxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHJlcGVhdCB0byByYW5kb20tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icmVwZWF0IiBkYXRhLWVudGl0eS0yPSJyYW5kb20iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0ibG5rMTAiIGlkPSJsaW5rX3JlcGVhdF9yYW5kb20iPjxwYXRoIGQ9Ik0xNTIuMzEsMjk2LjQzIEMxNTcuMzIsMjc5LjE0IDE2NS45NCwyNDMuOCAxNjMsMjEzLjU5IEMxNjAuODgsMTkxLjc5IDE1Ni42MTYzLDE3Mi41ODMxIDE1My4xODYzLDE1OC43NzMxIiBmaWxsPSJub25lIiBpZD0icmVwZWF0LXRvLXJhbmRvbSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTUxLjc0LDE1Mi45NSwxNTAuMDI3NCwxNjIuNjQ4OCwxNTIuOTQ1MiwxNTcuODAyNiwxNTcuNzkxNSwxNjAuNzIwNCwxNTEuNzQsMTUyLjk1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMTY0LjYiIHk9IjIyOS4zMDY5Ij4mIzMyMzY4OyYjMTI0MjY7JiMzNjgyMDsmIzEyMzc1OzwvdGV4dD48L2c+PCEtLVNSQz1bTE9fVElpRDA0OE5sdm9kNnQxVXp6aTk3eTFMYUpUT1FJN1RCTjBHSG1NSkdyZUFXS1lYSVZ4N1kzbVkyODFPQlZQWGZxWnY2cXpxZXdTcVVUbFN4dnlvaWM1dFBhRFlDSEFXME9rYVJlVWdISDgtZm5fSjFUQ2Jxb2thSnFwTkpZREVYbEhQZHN5RDN5NEtTZTFTQjVVWjZMZ0h6T0tBakxqU3k1N2pPYndoeVB0ZlotYzh3UGRmV1FqY1N5Ukh4ZHhTbEJFZHlfXzFJUnB3dWNSc0VCQk9sdXQzZGVDR3NpX3hUVEZaOVFNU3N4ZEJJZ3Vvckk5SERBR24wQ0dGTVFYal8zS3hpSW5kY24zN0V1d0pZbWRNaTVpNEhXRDk2dWhPc2ZpWFNNWXZ2cHF3VWlxd1ZhblVPXzluZFd4Rnl6ZDdvLXl0ZmJMaTRmMGZtT1B5M10tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="1211">12.11 ランダムデータ生成<a class="headerlink" href="#1211" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">ランダムな文字列を生成</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">random_string</span><span class="p">(</span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
<span class="kd">def</span><span class="w"> </span><span class="n">random_string</span><span class="p">(</span><span class="n">length</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="ss">:crypto</span><span class="o">.</span><span class="n">strong_rand_bytes</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
<span class="w">  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Base</span><span class="o">.</span><span class="n">encode64</span><span class="p">()</span>
<span class="w">  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">binary_part</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">)</span>
<span class="k">end</span>

<span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">ランダムな Location を生成</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">random_location</span><span class="p">()</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
<span class="kd">def</span><span class="w"> </span><span class="n">random_location</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">LocationId</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Q</span><span class="si">#{</span><span class="n">random_positive_int</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_string</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="w">  </span><span class="n">population</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_positive_int</span><span class="p">(</span><span class="mi">10_000_000</span><span class="p">)</span>
<span class="w">  </span><span class="nc">Location</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">population</span><span class="p">)</span>
<span class="k">end</span>

<span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">ランダムな Attraction を生成</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">random_attraction</span><span class="p">()</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
<span class="kd">def</span><span class="w"> </span><span class="n">random_attraction</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_string</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ss">:rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">random_string</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span>
<span class="w">  </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">random_location</span><span class="p">()</span>
<span class="w">  </span><span class="nc">Attraction</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="1212">12.12 統合テスト<a class="headerlink" href="#1212" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">TravelGuide の統合テストを実行</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">run_integration_tests</span><span class="p">()</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">run_integration_tests</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:normal_case</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide</span><span class="p">(</span><span class="nc">TravelGuide.TestDataAccess</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Tokyo&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">guide</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="n">guide</span><span class="o">.</span><span class="n">attraction</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;Tokyo Tower&quot;</span><span class="w"> </span><span class="ow">and</span>
<span class="w">            </span><span class="n">length</span><span class="p">(</span><span class="n">guide</span><span class="o">.</span><span class="n">subjects</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span>
<span class="w">            </span><span class="n">guide</span><span class="o">.</span><span class="n">search_report</span><span class="o">.</span><span class="n">errors</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[]</span>

<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="no">false</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:empty_result</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide</span><span class="p">(</span><span class="nc">TravelGuide.TestDataAccess</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Empty&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;No attractions found&quot;</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">true</span>
<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">false</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:error_handling</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide</span><span class="p">(</span><span class="nc">TravelGuide.FailingDataAccess</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Test&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">guide</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="n">length</span><span class="p">(</span><span class="n">guide</span><span class="o">.</span><span class="n">search_report</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span>

<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="no">false</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="ss">:cached_access</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">cache</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide.CachedDataAccess</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="nc">TravelGuide.TestDataAccess</span><span class="p">)</span>

<span class="w">      </span><span class="n">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide_cached</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Tokyo&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">result2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide_cached</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Tokyo&quot;</span><span class="p">)</span>

<span class="w">      </span><span class="n">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide.CachedDataAccess</span><span class="o">.</span><span class="n">cache_stats</span><span class="p">(</span><span class="n">cache</span><span class="p">)</span>
<span class="w">      </span><span class="nc">Agent</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">cache</span><span class="p">)</span>

<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="p">{</span><span class="n">result1</span><span class="p">,</span><span class="w"> </span><span class="n">result2</span><span class="p">}</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="p">{{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">g1</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">g2</span><span class="p">}}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="n">g1</span><span class="o">.</span><span class="n">attraction</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">g2</span><span class="o">.</span><span class="n">attraction</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">and</span>
<span class="w">            </span><span class="n">stats</span><span class="o">.</span><span class="n">attractions</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>

<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="no">false</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>

<span class="w">  </span><span class="n">results</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">tests</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">test_fn</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="k">do</span>
<span class="w">          </span><span class="n">test_fn</span><span class="o">.</span><span class="p">()</span>
<span class="w">        </span><span class="k">rescue</span>
<span class="w">          </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">false</span>
<span class="w">        </span><span class="k">end</span>

<span class="w">      </span><span class="p">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">}</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="n">passed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="p">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>
<span class="w">  </span><span class="n">failed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="p">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">!</span><span class="n">r</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">%{</span><span class="ss">passed</span><span class="p">:</span><span class="w"> </span><span class="n">passed</span><span class="p">,</span><span class="w"> </span><span class="ss">failed</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="n">results</span><span class="p">}}</span>
<span class="k">end</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjMxNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTA3OXB4O2hlaWdodDozMTZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDc5IDMxNiIgd2lkdGg9IjEwNzlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI5OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjcxNyIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjMzNS41MDAyIiB5PSIyNi45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzI3MDgzOyYjMjUxMDQ7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBwcm9kLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJwcm9kIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImNsdXN0ZXJfcHJvZCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMTUiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMjYiIHg9IjQ0IiB5PSI2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIxNDMuMDAwMSIgeT0iNzcuOTk1MSI+JiMyNjQxMjsmIzMwMDU4OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgdGVzdC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0idGVzdCIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iY2x1c3Rlcl90ZXN0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIxNSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM4NyIgeD0iMzEwIiB5PSI2MyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0MS45OTk4IiB4PSI0ODIuNTAwMSIgeT0iNzcuOTk1MSI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tY2xhc3MgZGExLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImRhMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfZGExIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTA5LjYwMDYiIHg9Ijk4LjIiIHk9IjEwNiIvPjxlbGxpcHNlIGN4PSIxMTEuMiIgY3k9IjEyMCIgZmlsbD0iI0ZGRkZGRiIgcng9IjkiIHJ5PSI5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTEwNy4xMjE5LDExNS43NjU2IEwxMDcuMTIxOSwxMTMuNjA5NCBMMTE0LjUxMjUsMTEzLjYwOTQgTDExNC41MTI1LDExNS43NjU2IEwxMTIuMDQzOCwxMTUuNzY1NiBMMTEyLjA0MzgsMTIzLjg0MzggTDExNC41MTI1LDEyMy44NDM4IEwxMTQuNTEyNSwxMjYgTDEwNy4xMjE5LDEyNiBMMTA3LjEyMTksMTIzLjg0MzggTDEwOS41OTA2LDEyMy44NDM4IEwxMDkuNTkwNiwxMTUuNzY1NiBMMTA3LjEyMTksMTE1Ljc2NTYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgxLjYwMDYiIHg9IjEyMy4yIiB5PSIxMjQuODQ2NyI+RGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iOTkuMiIgeDI9IjIwNi44MDA2IiB5MT0iMTM0IiB5Mj0iMTM0Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9Ijk5LjIiIHgyPSIyMDYuODAwNiIgeTE9IjE0MiIgeTI9IjE0MiIvPjwvZz48IS0tY2xhc3Mgd2RhLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IndkYSIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfd2RhIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTcwLjg2NDMiIHg9IjY3LjU3IiB5PSIyMTAiLz48ZWxsaXBzZSBjeD0iODAuNTciIGN5PSIyMjQiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik04My41Mzg4LDIyOS42NDA2IFE4Mi45NjA2LDIyOS45Mzc1IDgyLjMyLDIzMC4wNzgxIFE4MS42Nzk0LDIzMC4yMzQ0IDgwLjk3NjMsMjMwLjIzNDQgUTc4LjQ3NjMsMjMwLjIzNDQgNzcuMTQ4MSwyMjguNTkzOCBRNzUuODM1NiwyMjYuOTM3NSA3NS44MzU2LDIyMy44MTI1IFE3NS44MzU2LDIyMC42ODc1IDc3LjE0ODEsMjE5LjAzMTMgUTc4LjQ3NjMsMjE3LjM3NSA4MC45NzYzLDIxNy4zNzUgUTgxLjY3OTQsMjE3LjM3NSA4Mi4zMiwyMTcuNTMxMyBRODIuOTc2MywyMTcuNjg3NSA4My41Mzg4LDIxNy45ODQ0IEw4My41Mzg4LDIyMC43MDMxIFE4Mi45MTM4LDIyMC4xMjUgODIuMzIsMjE5Ljg1OTQgUTgxLjcyNjMsMjE5LjU3ODEgODEuMTAxMywyMTkuNTc4MSBRNzkuNzU3NSwyMTkuNTc4MSA3OS4wNywyMjAuNjU2MyBRNzguMzgyNSwyMjEuNzE4OCA3OC4zODI1LDIyMy44MTI1IFE3OC4zODI1LDIyNS45MDYzIDc5LjA3LDIyNi45ODQ0IFE3OS43NTc1LDIyOC4wNDY5IDgxLjEwMTMsMjI4LjA0NjkgUTgxLjcyNjMsMjI4LjA0NjkgODIuMzIsMjI3Ljc4MTMgUTgyLjkxMzgsMjI3LjUgODMuNTM4OCwyMjYuOTIxOSBMODMuNTM4OCwyMjkuNjQwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0Mi44NjQzIiB4PSI5Mi41NyIgeT0iMjI4Ljg0NjciPldpa2lkYXRhRGF0YUFjY2VzczwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNjguNTciIHgyPSIyMzcuNDM0MyIgeTE9IjIzOCIgeTI9IjIzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI2OC41NyIgeDI9IjIzNy40MzQzIiB5MT0iMjQ2IiB5Mj0iMjQ2Ii8+PC9nPjwhLS1jbGFzcyBkYTItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZGEyIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfZGEyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ0IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTA5LjYwMDYiIHg9IjQ0MC4yIiB5PSIxMDYiLz48ZWxsaXBzZSBjeD0iNDUzLjIiIGN5PSIxMjAiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NDkuMTIxOSwxMTUuNzY1NiBMNDQ5LjEyMTksMTEzLjYwOTQgTDQ1Ni41MTI1LDExMy42MDk0IEw0NTYuNTEyNSwxMTUuNzY1NiBMNDU0LjA0MzgsMTE1Ljc2NTYgTDQ1NC4wNDM4LDEyMy44NDM4IEw0NTYuNTEyNSwxMjMuODQzOCBMNDU2LjUxMjUsMTI2IEw0NDkuMTIxOSwxMjYgTDQ0OS4xMjE5LDEyMy44NDM4IEw0NTEuNTkwNiwxMjMuODQzOCBMNDUxLjU5MDYsMTE1Ljc2NTYgTDQ0OS4xMjE5LDExNS43NjU2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtc3R5bGU9Iml0YWxpYyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4MS42MDA2IiB4PSI0NjUuMiIgeT0iMTI0Ljg0NjciPkRhdGFBY2Nlc3M8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgeDE9IjQ0MS4yIiB4Mj0iNTQ4LjgwMDYiIHkxPSIxMzQiIHkyPSIxMzQiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iNDQxLjIiIHgyPSI1NDguODAwNiIgeTE9IjE0MiIgeTI9IjE0MiIvPjwvZz48IS0tY2xhc3MgdGRhLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InRkYSIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X3RkYSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzOS41NDg4IiB4PSIzMzQuMjMiIHk9IjIxMCIvPjxlbGxpcHNlIGN4PSIzNDcuMjMiIGN5PSIyMjQiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zNTAuMTk4OCwyMjkuNjQwNiBRMzQ5LjYyMDYsMjI5LjkzNzUgMzQ4Ljk4LDIzMC4wNzgxIFEzNDguMzM5NCwyMzAuMjM0NCAzNDcuNjM2MywyMzAuMjM0NCBRMzQ1LjEzNjMsMjMwLjIzNDQgMzQzLjgwODEsMjI4LjU5MzggUTM0Mi40OTU2LDIyNi45Mzc1IDM0Mi40OTU2LDIyMy44MTI1IFEzNDIuNDk1NiwyMjAuNjg3NSAzNDMuODA4MSwyMTkuMDMxMyBRMzQ1LjEzNjMsMjE3LjM3NSAzNDcuNjM2MywyMTcuMzc1IFEzNDguMzM5NCwyMTcuMzc1IDM0OC45OCwyMTcuNTMxMyBRMzQ5LjYzNjMsMjE3LjY4NzUgMzUwLjE5ODgsMjE3Ljk4NDQgTDM1MC4xOTg4LDIyMC43MDMxIFEzNDkuNTczOCwyMjAuMTI1IDM0OC45OCwyMTkuODU5NCBRMzQ4LjM4NjMsMjE5LjU3ODEgMzQ3Ljc2MTMsMjE5LjU3ODEgUTM0Ni40MTc1LDIxOS41NzgxIDM0NS43MywyMjAuNjU2MyBRMzQ1LjA0MjUsMjIxLjcxODggMzQ1LjA0MjUsMjIzLjgxMjUgUTM0NS4wNDI1LDIyNS45MDYzIDM0NS43MywyMjYuOTg0NCBRMzQ2LjQxNzUsMjI4LjA0NjkgMzQ3Ljc2MTMsMjI4LjA0NjkgUTM0OC4zODYzLDIyOC4wNDY5IDM0OC45OCwyMjcuNzgxMyBRMzQ5LjU3MzgsMjI3LjUgMzUwLjE5ODgsMjI2LjkyMTkgTDM1MC4xOTg4LDIyOS42NDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjU0ODgiIHg9IjM1OS4yMyIgeT0iMjI4Ljg0NjciPlRlc3REYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMzUuMjMiIHgyPSI0NzIuNzc4OCIgeTE9IjIzOCIgeTI9IjIzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSIzMzUuMjMiIHgyPSI0NzIuNzc4OCIgeTE9IjI0NiIgeTI9IjI0NiIvPjwvZz48IS0tY2xhc3MgZmRhLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImZkYSIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDEwIiBpZD0iZW50aXR5X2ZkYSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI0NCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1NS42NjExIiB4PSI1MDkuMTciIHk9IjIxMCIvPjxlbGxpcHNlIGN4PSI1MjIuMTciIGN5PSIyMjQiIGZpbGw9IiNGRkZGRkYiIHJ4PSI5IiByeT0iOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik01MjUuMTM4OCwyMjkuNjQwNiBRNTI0LjU2MDYsMjI5LjkzNzUgNTIzLjkyLDIzMC4wNzgxIFE1MjMuMjc5NCwyMzAuMjM0NCA1MjIuNTc2MywyMzAuMjM0NCBRNTIwLjA3NjMsMjMwLjIzNDQgNTE4Ljc0ODEsMjI4LjU5MzggUTUxNy40MzU2LDIyNi45Mzc1IDUxNy40MzU2LDIyMy44MTI1IFE1MTcuNDM1NiwyMjAuNjg3NSA1MTguNzQ4MSwyMTkuMDMxMyBRNTIwLjA3NjMsMjE3LjM3NSA1MjIuNTc2MywyMTcuMzc1IFE1MjMuMjc5NCwyMTcuMzc1IDUyMy45MiwyMTcuNTMxMyBRNTI0LjU3NjMsMjE3LjY4NzUgNTI1LjEzODgsMjE3Ljk4NDQgTDUyNS4xMzg4LDIyMC43MDMxIFE1MjQuNTEzOCwyMjAuMTI1IDUyMy45MiwyMTkuODU5NCBRNTIzLjMyNjMsMjE5LjU3ODEgNTIyLjcwMTMsMjE5LjU3ODEgUTUyMS4zNTc1LDIxOS41NzgxIDUyMC42NywyMjAuNjU2MyBRNTE5Ljk4MjUsMjIxLjcxODggNTE5Ljk4MjUsMjIzLjgxMjUgUTUxOS45ODI1LDIyNS45MDYzIDUyMC42NywyMjYuOTg0NCBRNTIxLjM1NzUsMjI4LjA0NjkgNTIyLjcwMTMsMjI4LjA0NjkgUTUyMy4zMjYzLDIyOC4wNDY5IDUyMy45MiwyMjcuNzgxMyBRNTI0LjUxMzgsMjI3LjUgNTI1LjEzODgsMjI2LjkyMTkgTDUyNS4xMzg4LDIyOS42NDA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI3LjY2MTEiIHg9IjUzNC4xNyIgeT0iMjI4Ljg0NjciPkZhaWxpbmdEYXRhQWNjZXNzPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MTAuMTciIHgyPSI2NjMuODMxMSIgeTE9IjIzOCIgeTI9IjIzOCIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHgxPSI1MTAuMTciIHgyPSI2NjMuODMxMSIgeTE9IjI0NiIgeTI9IjI0NiIvPjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTMiIGRhdGEtc291cmNlLWxpbmU9IjIwIiBkYXRhLXVpZD0iZW50MDAxNCIgaWQ9ImVudGl0eV9HTU4xMyI+PHBhdGggZD0iTTc0NS4wOCwyMTkuNDMgTDc0NS4wOCwyNDQuNTYyOCBMODk4LjkxMTIsMjQ0LjU2MjggTDg5OC45MTEyLDIyOS40MyBMODg4LjkxMTIsMjE5LjQzIEw3NDUuMDgsMjE5LjQzIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTg4OC45MTEyLDIxOS40MyBMODg4LjkxMTIsMjI5LjQzIEw4OTguOTExMiwyMjkuNDMgTDg4OC45MTEyLDIxOS40MyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMi44MzEyIiB4PSI3NTEuMDgiIHk9IjIzNi40OTY5Ij4mIzIzNDU1OyYjMzg1NTU7JiMxMjM5ODsmIzIyODA2OyYjMzcwOTY7IEFQSSAmIzEyMzk1OyYjMjU1MDk7JiMzMjE1NDs8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xNiIgZGF0YS1zb3VyY2UtbGluZT0iMjQiIGRhdGEtdWlkPSJlbnQwMDE3IiBpZD0iZW50aXR5X0dNTjE2Ij48cGF0aCBkPSJNOTM0LDIxMS44NyBMOTM0LDI1Mi4xMzU2IEwxMDcyLjAwMDEsMjUyLjEzNTYgTDEwNzIuMDAwMSwyMjEuODcgTDEwNjIuMDAwMSwyMTEuODcgTDkzNCwyMTEuODciIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMTA2Mi4wMDAxLDIxMS44NyBMMTA2Mi4wMDAxLDIyMS44NyBMMTA3Mi4wMDAxLDIyMS44NyBMMTA2Mi4wMDAxLDIxMS44NyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI5NDAiIHk9IjIyOC45MzY5Ij4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNDM0OyYjMzY4MjA7JiMxMjM3Nzs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9Ijk0MCIgeT0iMjQ0LjA2OTciPiYjMjEzNjM7JiMyNDIzMTsmIzEyMzk1OyYjMzIwODA7JiMyNjUyNDsmIzEyNDM0OyYjMzY4MjA7JiMxMjM3Nzs8L3RleHQ+PC9nPjwhLS1yZXZlcnNlIGxpbmsgZGExIHRvIHdkYS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJkYTEiIGRhdGEtZW50aXR5LTI9IndkYSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX2RhMV93ZGEiPjxwYXRoIGNvZGVMaW5lPSI3IiBkPSJNMTUzLDE2OC4xMyBDMTUzLDE4NS41MiAxNTMsMTkyLjA2IDE1MywyMDkuNTQiIGZpbGw9Im5vbmUiIGlkPSJkYTEtYmFja3RvLXdkYSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMTUzLDE1MC4xMywxNDcsMTY4LjEzLDE1OSwxNjguMTMsMTUzLDE1MC4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIGRhMiB0byB0ZGEtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZGEyIiBkYXRhLWVudGl0eS0yPSJ0ZGEiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0ibG5rMTEiIGlkPSJsaW5rX2RhMl90ZGEiPjxwYXRoIGNvZGVMaW5lPSIxNCIgZD0iTTQ2NC4xNTg5LDE2My41NjMzIEM0NDguNjQ4OSwxODAuOTUzMyA0MzguNzQsMTkyLjA2IDQyMy4xNCwyMDkuNTQiIGZpbGw9Im5vbmUiIGlkPSJkYTItYmFja3RvLXRkYSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iNDc2LjE0LDE1MC4xMyw0NTkuNjgxMiwxNTkuNTY5Niw0NjguNjM2NywxNjcuNTU3LDQ3Ni4xNCwxNTAuMTMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBkYTIgdG8gZmRhLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImRhMiIgZGF0YS1lbnRpdHktMj0iZmRhIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazEyIiBpZD0ibGlua19kYTJfZmRhIj48cGF0aCBjb2RlTGluZT0iMTUiIGQ9Ik01MjYuMTE3OSwxNjMuNDk0NCBDNTQxLjgwNzksMTgwLjg4NDQgNTUxLjg4LDE5Mi4wNiA1NjcuNjUsMjA5LjU0IiBmaWxsPSJub25lIiBpZD0iZGEyLWJhY2t0by1mZGEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9IjUxNC4wNiwxNTAuMTMsNTIxLjY2MzEsMTY3LjUxMzcsNTMwLjU3MjcsMTU5LjQ3NTEsNTE0LjA2LDE1MC4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBwcm9kIHRvIEdNTjEzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InByb2QiIGRhdGEtZW50aXR5LTI9IkdNTjEzIiBkYXRhLXNvdXJjZS1saW5lPSIyMCIgZGF0YS11aWQ9ImxuazE1IiBpZD0ibGlua19wcm9kX0dNTjEzIj48cGF0aCBkPSJNMjcwLjExMjQsMTMyLjYyNzkgQzI3MC4zNTExLDEzMi43MzE3IDI3MC41OTQzLDEzMi44MzcyIDI3MC44NDE4LDEzMi45NDQyIEMyNzEuODMxNiwxMzMuMzcyNCAyNzIuODg5NywxMzMuODI2MiAyNzQuMDA4NSwxMzQuMzAwOCBDMjc2LjI0NiwxMzUuMjUgMjc4LjcyNTksMTM2LjI4MjUgMjgxLjM4NjMsMTM3LjM2IEMyOTIuMDI3NSwxNDEuNjcgMzA1LjU1NSwxNDYuNyAzMTgsMTUwIEMzNTguNDgsMTYwLjczIDYxMy45LDE5OS43NiA3NDQuODIsMjE5LjQ2IiBmaWxsPSJub25lIiBpZD0icHJvZC1HTU4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tbGluayB0ZXN0IHRvIEdNTjE2LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InRlc3QiIGRhdGEtZW50aXR5LTI9IkdNTjE2IiBkYXRhLXNvdXJjZS1saW5lPSIyNCIgZGF0YS11aWQ9ImxuazE4IiBpZD0ibGlua190ZXN0X0dNTjE2Ij48cGF0aCBkPSJNNjk3LjI2MzUsMTMxLjY4MzQgQzcwMi4xNTIzLDEzMy4yNzExIDcwOS4wNDc3LDEzNS41MTA2IDcxNy41MDY2LDEzOC4yNTgxIEM3MzQuNDI0NCwxNDMuNzUzMSA3NTcuNTk2MiwxNTEuMjggNzgzLjQ3NzUsMTU5LjY4NzUgQzgzNS4yNCwxNzYuNTAyNSA4OTcuODQsMTk2Ljg0IDk0Mi45MiwyMTEuNDkiIGZpbGw9Im5vbmUiIGlkPSJ0ZXN0LUdNTjE2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1TUkM9W0tvcDlJQ3JETElaOElTcEN1LThnSWFxa0lTbkJwcWJMSzdoU3RGUXVRVVZadmV2ZG94a1ZUS25HS2dYNmJkcXNQeXRwZ1FrSzUxQUI1R2dBeWJFMGFmYnY5UWI1UU9kOUc0Y05uOTk0bi1KYXJFOVlpOEFLSDRFa3Y5cDR1Yzg1ZlYzQ3hDbUtlMm9RWWxBS0gyd1dBV01SNlpxekNBU01rckYwWWFqSVlxaThzNlM0aW95NGcxUERqV0hlRjVKTUJKNHA5cENsN0tyMTZqV25IWDM3YjIxcHFpMGsweGVqQnh5YUxJNGZsd0dhRnJTWEZtcVMwYm5GcnlyX0VNbHN1eVBySnZUQ1V6Y3lHaTRubTVGWFNVRmdQdHJCZHMtUm5QTVFidzgwcWVNWDUtR1JCaFc3N3BVdEZzeFV5eFhmXy1FY0lJX3NKdGRTRTlGaFFVX2NmeGtNMHFyd2xkTjJpdGJwNDE4bThtNDBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h3 id="1213">12.13 パフォーマンステスト<a class="headerlink" href="#1213" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">関数の実行時間を計測</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">measure_time</span><span class="p">((</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">any</span><span class="p">()))</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="n">non_neg_integer</span><span class="p">(),</span><span class="w"> </span><span class="n">any</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">measure_time</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="p">{</span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:timer</span><span class="o">.</span><span class="n">tc</span><span class="p">(</span><span class="n">fun</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span><span class="n">time</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">}</span>
<span class="k">end</span>

<span class="na">@doc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="sh">キャッシュの効果を測定</span>
<span class="sh">&quot;&quot;&quot;</span>
<span class="na">@spec</span><span class="w"> </span><span class="n">measure_cache_effect</span><span class="p">(</span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">map</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">measure_cache_effect</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="c1"># キャッシュなしの時間</span>
<span class="w">  </span><span class="p">{</span><span class="n">uncached_time</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">measure_time</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide</span><span class="p">(</span><span class="nc">TravelGuide.TestDataAccess</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Tokyo&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="k">end</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="c1"># キャッシュありの時間</span>
<span class="w">  </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">cache</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide.CachedDataAccess</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="nc">TravelGuide.TestDataAccess</span><span class="p">)</span>

<span class="w">  </span><span class="p">{</span><span class="n">cached_time</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">measure_time</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">travel_guide_cached</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Tokyo&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="k">end</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">  </span><span class="nc">Agent</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">cache</span><span class="p">)</span>

<span class="w">  </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span>
<span class="w">   </span><span class="p">%{</span>
<span class="w">     </span><span class="ss">uncached_time</span><span class="p">:</span><span class="w"> </span><span class="n">uncached_time</span><span class="p">,</span>
<span class="w">     </span><span class="ss">cached_time</span><span class="p">:</span><span class="w"> </span><span class="n">cached_time</span><span class="p">,</span>
<span class="w">     </span><span class="ss">speedup</span><span class="p">:</span><span class="w"> </span><span class="n">uncached_time</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">max</span><span class="p">(</span><span class="n">cached_time</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">   </span><span class="p">}}</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="1214">12.14 テストピラミッド<a class="headerlink" href="#1214" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM0NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDc1cHg7aGVpZ2h0OjM0NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQ3NSAzNDYiIHdpZHRoPSI0NzVweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjMyOC43OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI1NCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMS45OTk1IiB4PSI4My4wMDAyIiB5PSIyNi45OTUxIj4mIzEyNDg2OyYjMTI0NzM7JiMxMjQ4ODsmIzEyNTAwOyYjMTI1MjE7JiMxMjUxMTsmIzEyNDgzOyYjMTI0ODk7PC90ZXh0PjwvZz48IS0tZW50aXR5IGUyZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJlMmUiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2UyZSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iOTMuMDQ4NiIgeD0iOTIuNDgiIHk9IjQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzMuMDQ4NiIgeD0iMTAyLjQ4IiB5PSI2OS45OTUxIj5FMkUgJiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM4LjkyMzciIHg9IjEwMi40OCIgeT0iODYuMjkyIj4oJiMyMzU2OTsmIzI1OTY4Oyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaW50ZWdyYXRpb24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iaW50ZWdyYXRpb24iIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X2ludGVncmF0aW9uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjUyLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI4OS45OTk3IiB4PSI5NCIgeT0iMTU5LjU5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iMTA0IiB5PSIxODIuNTg1MSI+JiMzMjExMzsmIzIxNTEyOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1Mi45MjM2IiB4PSIxMDQiIHk9IjE5OC44ODIiPigmIzIwMDEzOyYjMzEyNDM7JiMyNDIzMDspPC90ZXh0PjwvZz48IS0tZW50aXR5IHVuaXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0idW5pdCIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfdW5pdCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI1Mi41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjIyLjYzMDEiIHg9IjI3LjY4IiB5PSIyNzIuMTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIuNjMwMSIgeD0iMzcuNjgiIHk9IjI5NS4xODUxIj4mIzIxMzM2OyYjMjAzMDc7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7ICsgJiMxMjUwMzsmIzEyNTI1OyYjMTI0OTc7JiMxMjQ4NjsmIzEyNDUxOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOC45MjM3IiB4PSIzNy42OCIgeT0iMzExLjQ4MiI+KCYjMjI4MTA7JiMyNTk2ODspPC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OOCIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X0dNTjgiPjxwYXRoIGQ9Ik0yODUuMjgsMjc4LjM1IEwyODUuMjgsMjk0LjQ4IEwyNTAuNTYsMjk4LjQ4IEwyODUuMjgsMzAyLjQ4IEwyODUuMjgsMzE4LjYxNTYgQTAsMCAwIDAgMCAyODUuMjgsMzE4LjYxNTYgTDQ2OC43Mjk0LDMxOC42MTU2IEEwLDAgMCAwIDAgNDY4LjcyOTQsMzE4LjYxNTYgTDQ2OC43Mjk0LDI4OC4zNSBMNDU4LjcyOTQsMjc4LjM1IEwyODUuMjgsMjc4LjM1IEEwLDAgMCAwIDAgMjg1LjI4LDI3OC4zNSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik00NTguNzI5NCwyNzguMzUgTDQ1OC43Mjk0LDI4OC4zNSBMNDY4LjcyOTQsMjg4LjM1IEw0NTguNzI5NCwyNzguMzUiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjIuNDQ5NCIgeD0iMjkxLjI4IiB5PSIyOTUuNDE2OSI+RlAgJiMxMjM5MTsmIzEyMzk5OyYjMzIwMjA7JiMzMTg4MzsmIzM4MzA2OyYjMjU5Njg7JiMxMjM2NDsmIzIyODEwOyYjMTIzNTY7JiMxMjM4MzsmIzEyNDE3OzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTYuMDAwMiIgeD0iMjkxLjI4IiB5PSIzMTAuNTQ5NyI+JiMyMTMzNjsmIzIwMzA3OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OyYjMTIzNjQ7JiMzODc1MDsmIzI0MTIwOyYjMTIzOTU7JiMyMTE3NzsmIzI2NTI0OyYjMzAzNDA7PC90ZXh0PjwvZz48IS0tbGluayBlMmUgdG8gaW50ZWdyYXRpb24tLT48IS0tbGluayBpbnRlZ3JhdGlvbiB0byB1bml0LS0+PCEtLVNSQz1bTk94QklXRDE0NE50X0hOYmgxSjk5bHlHci14TG5VMnFDbXNuSGlPTTV5NTVmdUQ0ZXMwbUZXWVFXOGVGOTJJQW1hSm1Rb2dUOE56WGN5M0dvUXdlRWhWRU5QOEh0LU1tTF9PNUNmUm1SVWJaTUVSV2FKd2N3ZjFxZE5JQnoxbGZCY2JELWlJM1lla0xZWU44cUtyU0RlRmMtNmdtdWU2XzN4cDhOSkp4X1owTlRIU1VmUnRpak01LWRjVXlHQ2QzbjlTWUhaVGRwY3o3bHZUdjNiUWp5OFBxWnRIcGtkb1N5cC1yU195MTJpY0U2QkN6ZUIwSFlJM1drMU40WHJZT0twZHA4WlJ6bTMyTTcxOEhIWEJZZFRia1JIcjhsUDNnUHItanhCQ25rTndtTGI5ZExhLWdIZ2ZCTFNLTVlqbHB2QnZacWZKS2twYVRaWmp0TVJsNkUwUm1CX1czXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="_2">まとめ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="part-vi_1">Part VI で学んだこと<a class="headerlink" href="#part-vi_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjQ5MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTE0cHg7aGVpZ2h0OjQ5MXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDkxNCA0OTEiIHdpZHRoPSI5MTRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFBhcnQgVkk6ID8/Pz8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iUGFydCBWSS4gLi4uLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfUGFydCBWSS4gLi4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjQ3My4xOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg5NiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzMi42OTQ2IiB4PSIzNDMuNjUyNyIgeT0iMjYuOTk1MSI+UGFydCBWSTogJiMyMzQ1NTsmIzM2MzQxOyYjMzAzNDA7JiMxMjM5NDsmIzEyNDUwOyYjMTI1MDM7JiMxMjUyMjsmIzEyNDY1OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBtb2RlbC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0ibW9kZWwiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl9tb2RlbCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4OS4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDE4IiB4PSI0NCIgeT0iNjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTcuOTk5NiIgeD0iMjA0LjAwMDIiIHk9Ijc3Ljk5NTEiPiYjMTI0ODk7JiMxMjUxMzsmIzEyNDUyOyYjMTI1MzE7JiMxMjUxNDsmIzEyNDg3OyYjMTI1MjM7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBkYXRhLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJkYXRhIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImNsdXN0ZXJfZGF0YSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxNzguNTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIzODQiIHg9IjQ0IiB5PSIxOTIuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ny45OTk2IiB4PSIxODcuMDAwMiIgeT0iMjA3LjI5NTEiPiYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMTI0NTA7JiMxMjQ2MzsmIzEyNDc1OyYjMTI0NzM7PC90ZXh0PjwvZz48IS0tY2x1c3RlciB0ZXN0LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJ0ZXN0IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJjbHVzdGVyX3Rlc3QiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTcxLjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNDA4IiB4PSI0NjgiIHk9IjI4MS42Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjYzNy4wMDAyIiB5PSIyOTYuNTk1MSI+JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7JiMyNTEyNjsmIzMwMDUzOzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV8uLi4uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0NS45OTk1IiB4PSI2OCIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI1Ljk5OTUiIHg9Ijc4IiB5PSIxMjEuOTk1MSI+JiMyNzA4MzsmIzM2ODk2OyYjMjAzMDc7JiMxMjM5NTsmIzEyNDI0OyYjMTI0Mjc7JiMyMjQxMTsmIzIzNDUwOyYjMzI2ODE7PC90ZXh0PjwvZz48IS0tZW50aXR5IFZhbHVlIE9iamVjdCA/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlZhbHVlIE9iamVjdCAuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9WYWx1ZSBPYmplY3QgLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTcwLjAyODEiIHg9IjI0OC45OSIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTUwLjAyODEiIHg9IjI1OC45OSIgeT0iMTIxLjk5NTEiPlZhbHVlIE9iamVjdCAmIzEyNDk3OyYjMTI0Nzk7JiMxMjU0MDsmIzEyNTMxOzwvdGV4dD48L2c+PCEtLWVudGl0eSBAYmVoYXZpb3VyID8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuYmVoYXZpb3VyIC4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iZW50aXR5Xy5iZWhhdmlvdXIgLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxOTIuNzcxMSIgeD0iNjcuNjEiIHk9IjIzNS4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcyLjc3MTEiIHg9Ijc3LjYxIiB5PSIyNTEuMjk1MSI+QGJlaGF2aW91ciAmIzEyMzk1OyYjMTI0MjQ7JiMxMjQyNzsmIzI1Mjc3OyYjMzU5Mzc7JiMyMTI3MDs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImVudGl0eV8uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODkuOTk5NyIgeD0iMjk1IiB5PSIyMzUuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjMwNSIgeT0iMjUxLjI5NTEiPiYjMTI0NzM7JiMxMjQ3OTsmIzEyNTAyOyYjMjM0NTU7JiMzNTAxMzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgQWdlbnQgPz8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iQWdlbnQgLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9BZ2VudCAuLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTc3Ljg4OTIiIHg9Ijc1LjA2IiB5PSIzMjQuNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ny44ODkyIiB4PSI4NS4wNiIgeT0iMzQwLjU5NTEiPkFnZW50ICYjMTIzOTU7JiMxMjQyNDsmIzEyNDI3OyYjMTI0NjE7JiMxMjUxNTsmIzEyNDgzOyYjMTI0NzE7JiMxMjUxNzs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgPz8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV8uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTMxLjk5OTUiIHg9IjQ5MiIgeT0iMzI0LjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iNTAyIiB5PSIzNDAuNTk1MSI+JiMzMjAyMDsmIzMxODgzOyYjMzgzMDY7JiMyNTk2ODsmIzEyMzk4OyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5Xy4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNzMuOTk5MyIgeD0iNjU5IiB5PSIzMjQuNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSI2NjkiIHk9IjM0MC41OTUxIj4mIzEyNTAzOyYjMTI1MjU7JiMxMjQ5NzsmIzEyNDg2OyYjMTI0NTE7JiMxMjUwNTsmIzEyNTQwOyYjMTI0NzM7JiMxMjQ4NjsmIzEyNDczOyYjMTI0ODg7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMTMiIGlkPSJlbnRpdHlfLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg5Ljk5OTciIHg9IjUxMyIgeT0iNDA2Ljg5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjkuOTk5NyIgeD0iNTIzIiB5PSI0MjIuODg1MSI+JiMzMjExMzsmIzIxNTEyOyYjMTI0ODY7JiMxMjQ3MzsmIzEyNDg4OzwvdGV4dD48L2c+PCEtLWxpbmsgbW9kZWwgdG8gZGF0YS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJtb2RlbCIgZGF0YS1lbnRpdHktMj0iZGF0YSIgZGF0YS1zb3VyY2UtbGluZT0iMjIiIGRhdGEtdWlkPSJsbmsxNCIgaWQ9ImxpbmtfbW9kZWxfZGF0YSI+PHBhdGggZD0iTTQ0NC44Mjg5LDE1Mi40ODcyIEM0NDQuNzEzMiwxNTIuOTIwNSA0NDQuNTk2OCwxNTMuMzU2IDQ0NC40Nzk5LDE1My43OTM3IEM0NDQuMDEyMiwxNTUuNTQ0NiA0NDMuNTM1LDE1Ny4zMzA5IDQ0My4wNTAzLDE1OS4xNDU0IEM0NDEuMTExNCwxNjYuNDAzMyA0MzkuMDUxOSwxNzQuMTEzMSA0MzYuOTkyNSwxODEuODIyNSBDNDM0LjkzMzEsMTg5LjUzMTkgNDMyLjg3MzksMTk3LjI0MDggNDMwLjkzNTcsMjA0LjQ5NjggQzQyOS45NjY1LDIwOC4xMjQ5IDQyOS4wMjc3LDIxMS42Mzk3IDQyOC4xMzQxLDIxNC45ODQ3IEM0MjguMTA2MiwyMTUuMDg5MyA0MjkuNjI2OCwyMDkuMzk2OSA0MjkuNTk4OSwyMDkuNTAxMSIgZmlsbD0ibm9uZSIgaWQ9Im1vZGVsLXRvLWRhdGEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjQyOC4wNTA1LDIxNS4yOTc4LDQzNC4yMzc2LDIwNy42MzUsNDI5LjM0MDksMjEwLjQ2NzIsNDI2LjUwODYsMjA1LjU3MDQsNDI4LjA1MDUsMjE1LjI5NzgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgZGF0YSB0byB0ZXN0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImRhdGEiIGRhdGEtZW50aXR5LTI9InRlc3QiIGRhdGEtc291cmNlLWxpbmU9IjIzIiBkYXRhLXVpZD0ibG5rMTUiIGlkPSJsaW5rX2RhdGFfdGVzdCI+PHBhdGggZD0iTTQyOC40NjExLDI0Ny41MjYgQzQyOS40NTYzLDI0Ny41MzU2IDQzMC41MzM2LDI0Ny41NDYyIDQzMS42OTAxLDI0Ny41NTc3IEM0MzQuMDAzMiwyNDcuNTgwOSA0MzYuNjMyOSwyNDcuNjA4IDQzOS41NTU1LDI0Ny42MzkzIEM0NTEuMjQ1OSwyNDcuNzY0NSA0NjcuNjIxNCwyNDcuOTU3IDQ4Ny4xNTIyLDI0OC4yMzI4IEM1MjYuMjEzOCwyNDguNzg0NCA1NzcuODk2MywyNDkuNjY4OCA2MjkuOTYsMjUxLjAxMjUgQzczNC4wODc1LDI1My43IDgzOS43NCwyNTguMjI1IDg0OSwyNjUuNiBDODUyLjAxODgsMjY4LjAwMzcgODU0LjU4NSwyNzAuODM5MiA4NTYuNzY0MSwyNzMuOTY2NiBDODU3Ljg1MzYsMjc1LjUzMDMgODU4Ljg0NjQsMjc3LjE2NyA4NTkuNzUwNSwyNzguODU5MSBDODYwLjIwMjYsMjc5LjcwNTIgODU4LjA4NDksMjc1LjEzMjkgODU4LjQ5MzcsMjc2LjAwNDUiIGZpbGw9Im5vbmUiIGlkPSJkYXRhLXRvLXRlc3QiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9Ijg2MS4wNDEyLDI4MS40MzY4LDg2MC44NDE1LDI3MS41OSw4NTguOTE4MywyNzYuOTA5OSw4NTMuNTk4NCwyNzQuOTg2Nyw4NjEuMDQxMiwyODEuNDM2OCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tU1JDPVtQUDMxSmk5MDQ4UmxWT2dyVHJ4MFd6Nlo5cHJuTnMwM2MwQWM1Mi02bkV3ZUxFajFlczNhZTA4WUtHQUFJV1hIdjY3NmpsME14Z3ZJQ1Ruc1AtUVZ4dnpfb0tnbjMyRlIxYXJkRFNyYVNPamNhbU9aLVlPckJIOVROb1BVenNPb3cwVkxWUkdWYVRTSEJYNzRldVZtV05vMHE0OXVyU2RrbDFSWDJBNjZfNHdxNDhJYVhEM00yU3NKSjJ4MTMzNFNmc1Eydzd4QmRVeFRWZXRFcU11WlR2Mnh0aE5oVFFsMXZ1Ri1FbkFiSGU2SFpUWU1zNHVHcGYyRjlMV1dqUUJzZHJiSVppUkk4dHoyX2V2eWc5VzlRajRHa0hmWkFSZ0pwWExDNGFCenV6NmFMX0RFQVpFZUsyZkVIVHhVRTlZTHJ2OGlRX3Q5YTdTRzZXWVdPY1drNlpnS1V5M25kVmtXdDVITUI5UXRHWWwxc3FObXVhdWhUUl95WjdPdGQwelRvQUd4eWNSUDRRMGhUVTFtT0ozZXp4bkpQd3ZTYjVQLWVldjRMYkcwY2FmMV9nSTdSbTAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="_3">キーポイント<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>@behaviour による抽象化</strong>: DataAccess 振る舞いで外部依存を抽象化</li>
<li><strong>Agent でキャッシュ</strong>: スレッドセーフな状態管理</li>
<li><strong>タプルでエラー処理</strong>: <code>{:ok, value}</code> / <code>{:error, reason}</code> で明示的なエラーハンドリング</li>
<li><strong>SearchReport</strong>: テスト可能性と可観測性の向上</li>
<li><strong>スタブ</strong>: 外部依存を差し替えてテスト</li>
<li><strong>プロパティベーステスト</strong>: ランダム入力で不変条件を検証</li>
</ol>
<h3 id="scala">Scala との対比<a class="headerlink" href="#scala" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>概念</th>
<th>Scala</th>
<th>Elixir</th>
</tr>
</thead>
<tbody>
<tr>
<td>インターフェース</td>
<td><code>trait</code></td>
<td><code>@behaviour</code></td>
</tr>
<tr>
<td>状態管理</td>
<td><code>Ref[IO, A]</code></td>
<td><code>Agent</code></td>
</tr>
<tr>
<td>リソース管理</td>
<td><code>Resource[IO, A]</code></td>
<td>プロセス / <code>with</code></td>
</tr>
<tr>
<td>エラー処理</td>
<td><code>Either[E, A]</code></td>
<td><code>{:ok, a} \| {:error, e}</code></td>
</tr>
<tr>
<td>非同期処理</td>
<td><code>IO[A]</code></td>
<td><code>Task</code> / <code>GenServer</code></td>
</tr>
<tr>
<td>キャッシュ</td>
<td><code>Ref</code> + <code>Map</code></td>
<td><code>Agent</code> + <code>Map</code></td>
</tr>
</tbody>
</table>
<h3 id="_4">学習の総括<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjEwN3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTU4cHg7aGVpZ2h0OjEwN3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk1OCAxMDciIHdpZHRoPSI5NThweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIEVsaXhpciBGUCA/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iRWxpeGlyIEZQIC4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfRWxpeGlyIEZQIC4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9Ijg5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iOTQwLjY5IiB4PSIxMiIgeT0iMTIiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTM5LjQ2NjUiIHg9IjQxMi42MTE4IiB5PSIyNi45OTUxIj5FbGl4aXIgRlAgJiMxMjM5ODsmIzIzMzk4OyYjMzI3MjI7JiMxMjQ5NzsmIzEyNDczOzwvdGV4dD48L2c+PCEtLWVudGl0eSBwMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJwMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfcDEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU2Ljg0NTciIHg9IjI4IiB5PSI0Ni43Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMzYuODQ1NyIgeD0iMzgiIHk9IjYyLjY5NTEiPlBhcnQgSTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIzOCIgeT0iNzguOTkyIj4mIzIyNTIyOyYjMzA5OTA7PC90ZXh0PjwvZz48IS0tZW50aXR5IHAyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InAyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9wMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzOC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTQ1Ljk5OTUiIHg9IjE0NC44NSIgeT0iNDYuNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQwLjk3NDYiIHg9IjE1NC44NSIgeT0iNjIuNjk1MSI+UGFydCBJSTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjUuOTk5NSIgeD0iMTU0Ljg1IiB5PSI3OC45OTIiPiYjMTI0NTI7JiMxMjUxMTsmIzEyNTE3OyYjMTI1NDA7JiMxMjQ3OTsmIzEyNTAyOyYjMTI1MjM7JiMyNTgwNTsmIzIwMzE2OzwvdGV4dD48L2c+PCEtLWVudGl0eSBwMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJwMyIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfcDMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEwMy45OTk2IiB4PSIzNTAuODUiIHk9IjQ2LjciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI0NS4xMDM1IiB4PSIzNjAuODUiIHk9IjYyLjY5NTEiPlBhcnQgSUlJPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjM2MC44NSIgeT0iNzguOTkyIj4mIzIyNDExOyYjMTIzOTI7JiMxMjQ5NzsmIzEyNDc5OyYjMTI1NDA7JiMxMjUzMTs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcDQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0icDQiIGRhdGEtc291cmNlLWxpbmU9IjgiIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X3A0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM4LjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTcuNDExOSIgeD0iNTE0Ljg0IiB5PSI0Ni43Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNDYuNDIyOSIgeD0iNTI0Ljg0IiB5PSI2Mi42OTUxIj5QYXJ0IElWPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3LjQxMTkiIHg9IjUyNC44NCIgeT0iNzguOTkyIj5TdHJlYW0gJiMxMjM5MjsmIzIwODc3OyYjMjQxMTI7PC90ZXh0PjwvZz48IS0tZW50aXR5IHA1LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InA1IiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV9wNSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIzOC41OTM4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTE4LjAxMzQiIHg9IjY5Mi4yNiIgeT0iNDYuNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQyLjI5MzkiIHg9IjcwMi4yNiIgeT0iNjIuNjk1MSI+UGFydCBWPC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk4LjAxMzQiIHg9IjcwMi4yNiIgeT0iNzguOTkyIj4mIzIwMDA2OyYjMzQ4OTI7JiMyMDk2NjsmIzI5NzAyOyYjMTI1Mzk7T1RQPC90ZXh0PjwvZz48IS0tZW50aXR5IHA2LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InA2IiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfcDYiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMzguNTkzOCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjY2LjQyMjkiIHg9Ijg3MC4yNyIgeT0iNDYuNyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjQ2LjQyMjkiIHg9Ijg4MC4yNyIgeT0iNjIuNjk1MSI+UGFydCBWSTwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSI4ODAuMjciIHk9Ijc4Ljk5MiI+JiMyMzQ1NTsmIzM2MzQxOzwvdGV4dD48L2c+PCEtLWxpbmsgcDEgdG8gcDItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icDEiIGRhdGEtZW50aXR5LTI9InAyIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImxuazkiIGlkPSJsaW5rX3AxX3AyIj48cGF0aCBkPSJNODUuMTksNjYgQzEwMS43LDY2IDExNy40Niw2NiAxMzguNTMsNjYiIGZpbGw9Im5vbmUiIGlkPSJwMS10by1wMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTQ0LjUzLDY2LDEzNS41Myw2MiwxMzkuNTMsNjYsMTM1LjUzLDcwLDE0NC41Myw2NiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBwMiB0byBwMy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJwMiIgZGF0YS1lbnRpdHktMj0icDMiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0ibG5rMTAiIGlkPSJsaW5rX3AyX3AzIj48cGF0aCBkPSJNMjkxLjE3LDY2IEMzMTEuMDUsNjYgMzI2LjIsNjYgMzQ0LjYyLDY2IiBmaWxsPSJub25lIiBpZD0icDItdG8tcDMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjM1MC42Miw2NiwzNDEuNjIsNjIsMzQ1LjYyLDY2LDM0MS42Miw3MCwzNTAuNjIsNjYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgcDMgdG8gcDQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0icDMiIGRhdGEtZW50aXR5LTI9InA0IiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazExIiBpZD0ibGlua19wM19wNCI+PHBhdGggZD0iTTQ1NC45Miw2NiBDNDczLjczLDY2IDQ4OS4xOCw2NiA1MDguNTYsNjYiIGZpbGw9Im5vbmUiIGlkPSJwMy10by1wNCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNTE0LjU2LDY2LDUwNS41Niw2Miw1MDkuNTYsNjYsNTA1LjU2LDcwLDUxNC41Niw2NiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBwNCB0byBwNS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJwNCIgZGF0YS1lbnRpdHktMj0icDUiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0ibG5rMTIiIGlkPSJsaW5rX3A0X3A1Ij48cGF0aCBkPSJNNjMyLjU3LDY2IEM2NTEuNjcsNjYgNjY2Ljg5LDY2IDY4Niw2NiIgZmlsbD0ibm9uZSIgaWQ9InA0LXRvLXA1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI2OTIsNjYsNjgzLDYyLDY4Nyw2Niw2ODMsNzAsNjkyLDY2IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHA1IHRvIHA2LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InA1IiBkYXRhLWVudGl0eS0yPSJwNiIgZGF0YS1zb3VyY2UtbGluZT0iMTciIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfcDVfcDYiPjxwYXRoIGQ9Ik04MTAuMzQsNjYgQzgzMC42NSw2NiA4NDYuNzIsNjYgODY0LjE2LDY2IiBmaWxsPSJub25lIiBpZD0icDUtdG8tcDYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9Ijg3MC4xNiw2Niw4NjEuMTYsNjIsODY1LjE2LDY2LDg2MS4xNiw3MCw4NzAuMTYsNjYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1bTE94RElpRDA1OE50eW5KTnhCamVhdEpmSmk2TDBTTExEcUN4aldEZkVlb3A0Q0g1Q3IwTk1sNDdOOGIxZ0E0VzVhNUF3bnp2Y0RrT0ZlT1BQc0RzN3ZwbHQ3Q3RMOF9yNk9ZR3llWTR4NTIxNmUzYXRQdzIzZlVpaFZXVzhpRzBaUmVYMHNTaHZDVFNtZE8wRTlwYkJzY0h0UTItbmxaVFdIRklmaDgzSmEyYldmck1iMlNWblVKSTBOZTRlYng5b1gzWjJVZTR6SEZnQnVtcHI3VWVkdHprbndsbFV6amVMMWxjdGlDdjNnVF9RdmJmd0pUaGtYTnBlMU5qQVNiZWx0bm1jZV82LVZCTFFqdl9oUkhNb3RKelU5NlZmU05MMkZOZHhkdldGUl9ZY1RyUGlieENSVFdhZnVJOEVqSGdjLVA1cVIzYTRrNVF5ZVptQkZiNC05UVFsbTAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<hr />
<h2 id="_5">演習問題<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="1-dataaccess">問題 1: DataAccess の拡張<a class="headerlink" href="#1-dataaccess" title="Permanent link">&para;</a></h3>
<p>以下の要件で <code>DataAccess</code> を拡張してください:
- 新しいコールバック <code>find_restaurants_near_location</code> を追加
- 戻り値は <code>{:ok, [Restaurant.t()]} | {:error, String.t()}</code></p>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Restaurant</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="kd">defstruct</span><span class="w"> </span><span class="p">[</span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:cuisine</span><span class="p">,</span><span class="w"> </span><span class="ss">:rating</span><span class="p">,</span><span class="w"> </span><span class="ss">:location</span><span class="p">]</span>

<span class="w">  </span><span class="na">@type</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span>
<span class="w">          </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">cuisine</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">rating</span><span class="p">:</span><span class="w"> </span><span class="n">float</span><span class="p">(),</span>
<span class="w">          </span><span class="ss">location</span><span class="p">:</span><span class="w"> </span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">()</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">float</span><span class="p">(),</span><span class="w"> </span><span class="nc">Location</span><span class="o">.</span><span class="n">t</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">t</span><span class="p">()</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">new</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">cuisine</span><span class="p">,</span><span class="w"> </span><span class="n">rating</span><span class="p">,</span><span class="w"> </span><span class="n">location</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="err">%</span><span class="bp">__MODULE__</span><span class="p">{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="ss">cuisine</span><span class="p">:</span><span class="w"> </span><span class="n">cuisine</span><span class="p">,</span><span class="w"> </span><span class="ss">rating</span><span class="p">:</span><span class="w"> </span><span class="n">rating</span><span class="p">,</span><span class="w"> </span><span class="ss">location</span><span class="p">:</span><span class="w"> </span><span class="n">location</span><span class="p">}</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>

<span class="c1"># DataAccess に追加</span>
<span class="na">@callback</span><span class="w"> </span><span class="n">find_restaurants_near_location</span><span class="p">(</span><span class="nc">LocationId</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">            </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Restaurant</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>

<span class="c1"># TestDataAccess の実装</span>
<span class="na">@impl</span><span class="w"> </span><span class="no">true</span>
<span class="kd">def</span><span class="w"> </span><span class="n">find_restaurants_near_location</span><span class="p">(</span><span class="n">_location_id</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">restaurants</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nc">Restaurant</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Test Restaurant 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Japanese&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">4.5</span><span class="p">,</span><span class="w"> </span><span class="na">@test_location</span><span class="p">),</span>
<span class="w">    </span><span class="nc">Restaurant</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Test Restaurant 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Italian&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="na">@test_location</span><span class="p">)</span>
<span class="w">  </span><span class="p">]</span>

<span class="w">  </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">restaurants</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)}</span>
<span class="k">end</span>
</code></pre></div>

</details>

<h3 id="2">問題 2: プロパティベーステスト<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p>以下の関数に対するプロパティベーステストを書いてください:</p>
<div class="highlight"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">merge_subjects</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="n">movies</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">movies</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="na">@spec</span><span class="w"> </span><span class="n">verify_merge_properties</span><span class="p">(</span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="ss">:ok</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="kd">def</span><span class="w"> </span><span class="n">verify_merge_properties</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="n">check_property</span><span class="p">(</span><span class="n">iterations</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">artist_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="n">movie_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:rand</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="w">    </span><span class="n">artists</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">artist_count</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="nc">MusicArtist</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Artist </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">movies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="n">movie_count</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="nc">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Movie </span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">TravelGuide</span><span class="o">.</span><span class="n">merge_subjects</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="n">movies</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># プロパティ1: 結果の長さは入力の合計</span>
<span class="w">    </span><span class="n">length_property</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">artist_count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">movie_count</span>

<span class="w">    </span><span class="c1"># プロパティ2: すべてのアーティスト名が含まれる</span>
<span class="w">    </span><span class="n">artist_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="w">    </span><span class="n">artists_included</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">all?</span><span class="p">(</span><span class="n">artist_names</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># プロパティ3: すべての映画名が含まれる</span>
<span class="w">    </span><span class="n">movie_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">movies</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="w">    </span><span class="n">movies_included</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">all?</span><span class="p">(</span><span class="n">movie_names</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">end</span><span class="p">)</span>

<span class="w">    </span><span class="n">length_property</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">artists_included</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">movies_included</span>
<span class="w">  </span><span class="k">end</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div>

</details>

<h3 id="3">問題 3: キャッシュの有効期限<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p><code>CachedDataAccess</code> にキャッシュの有効期限機能を追加してください。</p>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kd">defmodule</span><span class="w"> </span><span class="nc">CachedDataAccessWithTTL</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="sh">&quot;&quot;&quot;</span>
<span class="w">  </span><span class="sh">TTL（有効期限）付きキャッシュ</span>
<span class="w">  </span><span class="sh">&quot;&quot;&quot;</span>

<span class="w">  </span><span class="na">@default_ttl_ms</span><span class="w"> </span><span class="mi">60_000</span><span class="w">  </span><span class="c1"># 60秒</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">start_link</span><span class="p">(</span><span class="n">module</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">()}</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">start_link</span><span class="p">(</span><span class="n">data_access_module</span><span class="p">,</span><span class="w"> </span><span class="n">ttl_ms</span><span class="w"> </span><span class="p">\\</span><span class="w"> </span><span class="na">@default_ttl_ms</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="nc">Agent</span><span class="o">.</span><span class="n">start_link</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="p">%{</span>
<span class="w">        </span><span class="ss">module</span><span class="p">:</span><span class="w"> </span><span class="n">data_access_module</span><span class="p">,</span>
<span class="w">        </span><span class="ss">ttl_ms</span><span class="p">:</span><span class="w"> </span><span class="n">ttl_ms</span><span class="p">,</span>
<span class="w">        </span><span class="ss">attractions_cache</span><span class="p">:</span><span class="w"> </span><span class="p">%{}</span><span class="w">  </span><span class="c1"># key =&gt; {value, timestamp}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>

<span class="w">  </span><span class="na">@spec</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="n">pid</span><span class="p">(),</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">(),</span><span class="w"> </span><span class="nc">DataAccess</span><span class="o">.</span><span class="n">ordering</span><span class="p">(),</span><span class="w"> </span><span class="n">pos_integer</span><span class="p">())</span><span class="w"> </span><span class="o">::</span>
<span class="w">          </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nc">Attraction</span><span class="o">.</span><span class="n">t</span><span class="p">()]}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p">()}</span>
<span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="n">find_attractions</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">name</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">ordering</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">System</span><span class="o">.</span><span class="n">monotonic_time</span><span class="p">(</span><span class="ss">:millisecond</span><span class="p">)</span>

<span class="w">    </span><span class="nc">Agent</span><span class="o">.</span><span class="n">get_and_update</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">attractions_cache</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="p">{</span><span class="n">cached</span><span class="p">,</span><span class="w"> </span><span class="n">timestamp</span><span class="p">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">state</span><span class="o">.</span><span class="n">ttl_ms</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="c1"># キャッシュが有効</span>
<span class="w">          </span><span class="p">{{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">cached</span><span class="p">},</span><span class="w"> </span><span class="n">state</span><span class="p">}</span>

<span class="w">        </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">          </span><span class="c1"># キャッシュが無効または存在しない</span>
<span class="w">          </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="n">find_attractions</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">ordering</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="p">)</span>

<span class="w">          </span><span class="k">case</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="k">do</span>
<span class="w">            </span><span class="p">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">attractions</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">              </span><span class="n">new_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">attractions_cache</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">attractions</span><span class="p">,</span><span class="w"> </span><span class="n">now</span><span class="p">})</span>
<span class="w">              </span><span class="p">{</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="p">%{</span><span class="n">state</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">attractions_cache</span><span class="p">:</span><span class="w"> </span><span class="n">new_cache</span><span class="p">}}</span>

<span class="w">            </span><span class="p">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">              </span><span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">}</span>
<span class="w">          </span><span class="k">end</span>
<span class="w">      </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span>
</code></pre></div>

</details>

<hr />
<h2 id="_6">シリーズ全体の総括<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>本シリーズでは、「Grokking Functional Programming」の内容に沿って、Elixir による関数型プログラミングの基礎から実践的なアプリケーション構築までを学びました。</p>
<h3 id="_7">学んだ主な概念<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Part</th>
<th>章</th>
<th>主な概念</th>
</tr>
</thead>
<tbody>
<tr>
<td>I</td>
<td>1-2</td>
<td>純粋関数、イミュータビリティ</td>
</tr>
<tr>
<td>II</td>
<td>3-5</td>
<td>パイプ演算子、高階関数、Enum</td>
</tr>
<tr>
<td>III</td>
<td>6-7</td>
<td>パターンマッチング、with 式</td>
</tr>
<tr>
<td>IV</td>
<td>8-9</td>
<td>Stream、再帰</td>
</tr>
<tr>
<td>V</td>
<td>10-11</td>
<td>並行処理、OTP パターン</td>
</tr>
<tr>
<td>VI</td>
<td>12</td>
<td>実践アプリケーション、テスト</td>
</tr>
</tbody>
</table>
<h3 id="_8">関数型プログラミングの利点<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>予測可能性</strong>: 純粋関数は同じ入力に対して常に同じ出力</li>
<li><strong>テスト容易性</strong>: 副作用がないためテストが簡単</li>
<li><strong>合成可能性</strong>: パイプ演算子で小さな関数を組み合わせ</li>
<li><strong>並行安全性</strong>: イミュータブルデータは競合状態を防ぐ</li>
<li><strong>パターンマッチング</strong>: 明確で安全なデータ処理</li>
</ol>
<h3 id="elixir">Elixir 特有の利点<a class="headerlink" href="#elixir" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>OTP</strong>: 堅牢な並行処理フレームワーク</li>
<li><strong>BEAM VM</strong>: 軽量プロセスと高いスケーラビリティ</li>
<li><strong>パイプ演算子</strong>: 読みやすいデータ変換</li>
<li><strong>パターンマッチング</strong>: 強力な分岐とデストラクチャリング</li>
<li><strong>ホットコードスワップ</strong>: 無停止でのコード更新</li>
</ol>
<h3 id="_9">次のステップ<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<ul>
<li>Phoenix フレームワークでの Web 開発</li>
<li>Ecto でのデータベース操作</li>
<li>LiveView でのリアルタイム UI</li>
<li>Nerves での組み込み開発</li>
<li>実際のプロジェクトで FP を適用する</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works" target="_blank" rel="noopener" title="GitHub Repository/claude-code-booster" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>