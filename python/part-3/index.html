
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scala、Java、F#、C#、Haskell、Clojure、Elixir、Rust、Python で学ぶ関数型プログラミング">
      
      
        <meta name="author" content="Project Team">
      
      
      
        <link rel="prev" href="../part-2/">
      
      
        <link rel="next" href="../part-4/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Part III - エラーハンドリング - Grokking Functional Programming</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../docs/mkdocs/assets/css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-iii" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Grokking Functional Programming" class="md-header__button md-logo" aria-label="Grokking Functional Programming" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Grokking Functional Programming
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part III - エラーハンドリング
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/k2works/grokkingfp-excersice" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    grokkingfp-excersice
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scala/" class="md-tabs__link">
          
  
  
  Scala

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../java/" class="md-tabs__link">
          
  
  
  Java

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../fsharp/" class="md-tabs__link">
          
  
  
  F#

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../csharp/" class="md-tabs__link">
          
  
  
  C#

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../haskell/" class="md-tabs__link">
          
  
  
  Haskell

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../clojure/" class="md-tabs__link">
          
  
  
  Clojure

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../elixir/" class="md-tabs__link">
          
  
  
  Elixir

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../rust/" class="md-tabs__link">
          
  
  
  Rust

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Python

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Grokking Functional Programming" class="md-nav__button md-logo" aria-label="Grokking Functional Programming" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Grokking Functional Programming
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/k2works/grokkingfp-excersice" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    grokkingfp-excersice
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Scala
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Scala
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scala/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Java
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Java
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO と副作用
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../java/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    F#
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    F#
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期処理とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fsharp/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    C#
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期処理とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../csharp/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Haskell
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Haskell
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../haskell/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Clojure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Clojure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - nil 安全性
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 副作用とシーケンス
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clojure/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Elixir
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Elixir
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理と OTP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../elixir/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Rust
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Rust
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - 非同期とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rust/part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    概要
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part I - 基礎
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part II - 関数型スタイル
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Part III - エラーハンドリング
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#6-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        第6章: Maybe 型による安全なエラーハンドリング
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第6章: Maybe 型による安全なエラーハンドリング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 なぜ Maybe が必要か
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Maybe 型の基本
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-tv" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 TV番組のパース例
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3 TV番組のパース例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        番組名を抽出
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        開始年・終了年を抽出
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        単年の番組
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Maybe の合成
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.4 Maybe の合成">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        文字列の加算
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parse_show" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse_show の完成
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#65" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.5 安全な操作
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.5 安全な操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        安全な除算
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        安全なリストアクセス
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#66" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.6 エラーハンドリング戦略
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.6 エラーハンドリング戦略">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#best-effort" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best-effort 戦略
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all-or-nothing" class="md-nav__link">
    <span class="md-ellipsis">
      
        All-or-nothing 戦略
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#67-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.7 Maybe のユーティリティ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        第7章: Result 型と複合的なエラー処理
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第7章: Result 型と複合的なエラー処理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Maybe の限界
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Result 型の基本
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 Result 型の基本">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        安全な除算（エラーメッセージ付き）
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-tvresult" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 TV番組のパース（Result 版）
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#74" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.4 バリデーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#75-adt" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.5 代数的データ型（ADT）
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.5 代数的データ型（ADT）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        アーティストの活動判定
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#76" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.6 検索条件のモデリング
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.6 検索条件のモデリング">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        パターンマッチングによる条件判定
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        検索の実行
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#77-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.7 Result の合成
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#78" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.8 型付きエラー
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#79-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.9 Result のユーティリティ
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        まとめ
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="まとめ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#part-iii_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Part III で学んだこと
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maybe-vs-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        Maybe vs Result
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        キーポイント
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        重要な法則
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      
        Python 特有のポイント
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        演習問題
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="演習問題">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-maybe" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 1: Maybe を使った安全な辞書アクセス
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-result" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 2: Result を使ったバリデーション
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 3: 検索条件の追加
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        問題 4: sequence の実装
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part IV - IO とストリーム
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part V - 並行処理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part-6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Part VI - 実践
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="part-iii">Part III: エラーハンドリングと型による安全性<a class="headerlink" href="#part-iii" title="Permanent link">&para;</a></h1>
<p>本章では、関数型プログラミングにおけるエラーハンドリングを学びます。例外を使わず、型を使って安全にエラーを扱う方法を習得します。Python では <code>returns</code> ライブラリの <code>Maybe</code> と <code>Result</code> 型を使用します。</p>
<hr />
<h2 id="6-maybe">第6章: Maybe 型による安全なエラーハンドリング<a class="headerlink" href="#6-maybe" title="Permanent link">&para;</a></h2>
<h3 id="61-maybe">6.1 なぜ Maybe が必要か<a class="headerlink" href="#61-maybe" title="Permanent link">&para;</a></h3>
<p>従来の Python コードでは、エラーを例外で処理します。しかし、例外は関数の戻り値の型に現れないため、呼び出し側が例外を処理し忘れる可能性があります。</p>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch06_option.py</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># 従来の方法（問題あり）- 例外を使う</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unsafe_parse_int</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># ValueError が発生する可能性!</span>

<span class="c1"># unsafe_parse_int(&quot;abc&quot;)  # ValueError: invalid literal for int()</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI3OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MzMzcHg7aGVpZ2h0OjI3OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMzMyAyNzgiIHdpZHRoPSIzMzNweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIGV4LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJleCIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX2V4Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE3Mi41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjMxNSIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE5NS45OTkxIiB4PSI3MS41MDA0IiB5PSIyNi45OTUxIj4mIzI0NDY3OyYjMjY0Njk7JiMxMjM5ODsmIzIwMzYzOyYjMjI4MDY7JiMxMjUwNTsmIzEyNTQwOyYjMTI0NzM7JiMxMjM5ODsmIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDsmIzIwOTY2OyYjMjk3MDI7PC90ZXh0PjwvZz48IS0tZW50aXR5IG9rLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Im9rIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9vayI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTIwLjgxNjQiIHg9IjI3LjU5IiB5PSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwMC44MTY0IiB4PSIzNy41OSIgeT0iNjIuOTk1MSI+cGFyc2VfaW50KCc0MicpPC90ZXh0PjwvZz48IS0tZW50aXR5IHJlc3VsdF9vay0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyZXN1bHRfb2siIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X3Jlc3VsdF9vayI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzcuODE0NSIgeD0iNjkuMDkiIHk9IjE0Ni4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTcuODE0NSIgeD0iNzkuMDkiIHk9IjE2Mi4yOTUxIj40MjwvdGV4dD48L2c+PCEtLWVudGl0eSBlcnItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZXJyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9lcnIiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEyOC4xNjUiIHg9IjE4Mi45MiIgeT0iNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMDguMTY1IiB4PSIxOTIuOTIiIHk9IjYyLjk5NTEiPnBhcnNlX2ludCgnYWJjJyk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcmVzdWx0X2Vyci0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyZXN1bHRfZXJyIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9yZXN1bHRfZXJyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI5OS44MjMyIiB4PSIxOTcuMDkiIHk9IjE0Ni4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzkuODIzMiIgeD0iMjA3LjA5IiB5PSIxNjIuMjk1MSI+VmFsdWVFcnJvciE8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU45IiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfR01OOSI+PHBhdGggZD0iTTE3OCwyMzEuNTkgTDE3OCwyNzEuODU1NiBBMCwwIDAgMCAwIDE3OCwyNzEuODU1NiBMMzE2LjAwMDEsMjcxLjg1NTYgQTAsMCAwIDAgMCAzMTYuMDAwMSwyNzEuODU1NiBMMzE2LjAwMDEsMjQxLjU5IEwzMDYuMDAwMSwyMzEuNTkgTDI1MSwyMzEuNTkgTDI0NywxNjkuMDMgTDI0MywyMzEuNTkgTDE3OCwyMzEuNTkgQTAsMCAwIDAgMCAxNzgsMjMxLjU5IiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTMwNi4wMDAxLDIzMS41OSBMMzA2LjAwMDEsMjQxLjU5IEwzMTYuMDAwMSwyNDEuNTkgTDMwNi4wMDAxLDIzMS41OSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSIxODQiIHk9IjI0OC42NTY5Ij4mIzIwMzYzOyYjMjI4MDY7JiMxMjM5OTsmIzIyNDExOyYjMTIzOTU7JiMyOTY5NDsmIzEyNDI4OyYjMTIzOTQ7JiMxMjM1Njs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjE4NCIgeT0iMjYzLjc4OTciPiYjMjA5NjY7JiMyOTcwMjsmIzEyMzc1OyYjMjQ1MzY7JiMxMjQyODsmIzEyMzk4OyYjMjEzNjE7JiMzODUyMjs8L3RleHQ+PC9nPjwhLS1saW5rIG9rIHRvIHJlc3VsdF9vay0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJvayIgZGF0YS1lbnRpdHktMj0icmVzdWx0X29rIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0ibG5rNyIgaWQ9Imxpbmtfb2tfcmVzdWx0X29rIj48cGF0aCBkPSJNODgsNjkuNTYgQzg4LDg4LjE5IDg4LDEyMS4wMyA4OCwxMzkuODEiIGZpbGw9Im5vbmUiIGlkPSJvay10by1yZXN1bHRfb2siIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9Ijg4LDE0NS44MSw5MiwxMzYuODEsODgsMTQwLjgxLDg0LDEzNi44MSw4OCwxNDUuODEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iODkiIHk9IjExMi4zNjY5Ij4mIzI1MTA0OyYjMjExNTE7PC90ZXh0PjwvZz48IS0tbGluayBlcnIgdG8gcmVzdWx0X2Vyci0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJlcnIiIGRhdGEtZW50aXR5LTI9InJlc3VsdF9lcnIiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfZXJyX3Jlc3VsdF9lcnIiPjxwYXRoIGQ9Ik0yNDcsNjkuNTYgQzI0Nyw4OC4xOSAyNDcsMTIxLjAzIDI0NywxMzkuODEiIGZpbGw9Im5vbmUiIGlkPSJlcnItdG8tcmVzdWx0X2VyciIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMjQ3LDE0NS44MSwyNTEsMTM2LjgxLDI0NywxNDAuODEsMjQzLDEzNi44MSwyNDcsMTQ1LjgxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMDAwMSIgeD0iMjQ4IiB5PSIxMTIuMzY2OSI+JiMyMDM2MzsmIzIyODA2OyYjMzAzMzA7JiMyOTk4Mzs8L3RleHQ+PC9nPjwhLS1TUkM9W0pPXzFJaUQwNjhKbC1uSF9Td2FVVVlhenpVM0RMXzFRamtjbGJnUXhQUkU1V2RaT0g1SWlPYTVIU3oxVUxBbjJuTUVCbjhWdnRHUlZtWUdEY2tGQ0RwQ201UnNGVk9JMW54azJDT01rdmNCRkd0MWlWQk13Vm84cF91eDd6bDY2bWVaMkptZU1nS0YxMnVNcExEZ0p2c0hveDAzdDBLVG1tNW9rRWswQ2tGQW5ySEx3ZXpnZUxwVHBCN2k1UkRIcGhUMFZVaGhyUHZTd2xFcU05TElnbTNsUzYtQXNLYjlMb2xLaW02R0ZRaE1qX3FMZW1rZnFPaS1jQkNMYmJDYWNoRXlhcUpBdmRoOTNuZUpLMjZzZmpVbzN0MnFsNXlWRGt0cU9hdGJCQmNDQXBpY3lhWmJZdy1UYVJrdE5OVXhFeFNON0p4SGFBM2dHSlZ1Ml0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="62-maybe">6.2 Maybe 型の基本<a class="headerlink" href="#62-maybe" title="Permanent link">&para;</a></h3>
<p><code>returns</code> ライブラリの <code>Maybe</code> 型を使うと、失敗の可能性を型で表現できます。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">returns.maybe</span><span class="w"> </span><span class="kn">import</span> <span class="n">Maybe</span><span class="p">,</span> <span class="n">Nothing</span><span class="p">,</span> <span class="n">Some</span>

<span class="k">def</span><span class="w"> </span><span class="nf">parse_int</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;文字列を整数に安全に変換する。&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Nothing</span>

<span class="c1"># 使用例</span>
<span class="k">assert</span> <span class="n">parse_int</span><span class="p">(</span><span class="s2">&quot;42&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>   <span class="c1"># 成功</span>
<span class="k">assert</span> <span class="n">parse_int</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>   <span class="c1"># 失敗（エラーではない）</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM0NXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NDA3cHg7aGVpZ2h0OjM0NXB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDQwNyAzNDUiIHdpZHRoPSI0MDdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIE1heWJlID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iTWF5YmUgLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfTWF5YmUgLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIzOS41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjM4NCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4Mi44OTUiIHg9IjExMi41NTI1IiB5PSIyNi45OTUxIj5NYXliZSAmIzIyNDExOyYjMTIzOTU7JiMxMjQyNDsmIzEyNDI3OyYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMjA5NjY7JiMyOTcwMjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHNvbWUtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InNvbWUiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl9zb21lIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE3Mi41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE1MiIgeD0iMzYiIHk9IjU1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjcwLjU4MSIgeD0iNzYuNzA5NSIgeT0iNjkuOTk1MSI+U29tZSgmIzIwNTE2Oyk8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIG5vdGhpbmctLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Im5vdGhpbmciIGRhdGEtc291cmNlLWxpbmU9IjEwIiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImNsdXN0ZXJfbm90aGluZyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIxNzIuNTkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxNjAiIHg9IjIxMiIgeT0iNTUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjIuNzgxMyIgeD0iMjYwLjYwOTQiIHk9IjY5Ljk5NTEiPk5vdGhpbmc8L3RleHQ+PC9nPjwhLS1lbnRpdHkgczEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iczEiIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X3MxIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMjAuODE2NCIgeD0iNTEuNTkiIHk9IjkwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAwLjgxNjQiIHg9IjYxLjU5IiB5PSIxMDUuOTk1MSI+cGFyc2VfaW50KCc0MicpPC90ZXh0PjwvZz48IS0tZW50aXR5IHMyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InMyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9zMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODguNDQxNCIgeD0iNjcuNzgiIHk9IjE4OS4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjguNDQxNCIgeD0iNzcuNzgiIHk9IjIwNS4yOTUxIj5Tb21lKDQyKTwvdGV4dD48L2c+PCEtLWVudGl0eSBuMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJuMSIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X24xIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMjguMTY1IiB4PSIyMjcuOTIiIHk9IjkwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjE2NSIgeD0iMjM3LjkyIiB5PSIxMDUuOTk1MSI+cGFyc2VfaW50KCdhYmMnKTwvdGV4dD48L2c+PCEtLWVudGl0eSBuMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJuMiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X24yIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI3NS4wNDk4IiB4PSIyNTQuNDgiIHk9IjE4OS4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTUuMDQ5OCIgeD0iMjY0LjQ4IiB5PSIyMDUuMjk1MSI+Tm90aGluZzwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfR01OMTEiPjxwYXRoIGQ9Ik0xODQsMjk4LjU5IEwxODQsMzM4Ljg1NTYgQTAsMCAwIDAgMCAxODQsMzM4Ljg1NTYgTDQwMC4wMDAyLDMzOC44NTU2IEEwLDAgMCAwIDAgNDAwLjAwMDIsMzM4Ljg1NTYgTDQwMC4wMDAyLDMwOC41OSBMMzkwLjAwMDIsMjk4LjU5IEwyOTYsMjk4LjU5IEwyOTIsMjExLjc3IEwyODgsMjk4LjU5IEwxODQsMjk4LjU5IEEwLDAgMCAwIDAgMTg0LDI5OC41OSIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zOTAuMDAwMiwyOTguNTkgTDM5MC4wMDAyLDMwOC41OSBMNDAwLjAwMDIsMzA4LjU5IEwzOTAuMDAwMiwyOTguNTkiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTUuMDAwMiIgeD0iMTkwIiB5PSIzMTUuNjU2OSI+JiMyMjQxMTsmIzEyNDM0OyYjMzUyMTE7JiMxMjQyODsmIzEyNDAwOyYjMjI4MzM7JiMyNTk0MzsmIzEyMzk4OyYjMjE0ODc7JiMzMzAyMTsmIzI0NjE1OyYjMTIzNjQ7JiMxMjQzMTsmIzEyMzYzOyYjMTI0Mjc7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Ni4wMDAyIiB4PSIxOTAiIHk9IjMzMC43ODk3Ij4mIzEyNDY3OyYjMTI1MzE7JiMxMjQ5NzsmIzEyNDUyOyYjMTI1MjM7JiMyNjE3ODsmIzEyMzk1OyYjMjA5NjY7JiMyOTcwMjsmIzEyNDM0OyYjMjQzNzU7JiMyMTA0Njs8L3RleHQ+PC9nPjwhLS1saW5rIHMxIHRvIHMyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InMxIiBkYXRhLWVudGl0eS0yPSJzMiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX3MxX3MyIj48cGF0aCBkPSJNMTEyLDExMi41NiBDMTEyLDEzMS4xOSAxMTIsMTY0LjAzIDExMiwxODIuODEiIGZpbGw9Im5vbmUiIGlkPSJzMS10by1zMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTEyLDE4OC44MSwxMTYsMTc5LjgxLDExMiwxODMuODEsMTA4LDE3OS44MSwxMTIsMTg4LjgxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjYiIHg9IjExMyIgeT0iMTU1LjM2NjkiPiYjMjUxMDQ7JiMyMTE1MTs8L3RleHQ+PC9nPjwhLS1saW5rIG4xIHRvIG4yLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Im4xIiBkYXRhLWVudGl0eS0yPSJuMiIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfbjFfbjIiPjxwYXRoIGQ9Ik0yOTIsMTEyLjU2IEMyOTIsMTMxLjE5IDI5MiwxNjQuMDMgMjkyLDE4Mi44MSIgZmlsbD0ibm9uZSIgaWQ9Im4xLXRvLW4yIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyOTIsMTg4LjgxLDI5NiwxNzkuODEsMjkyLDE4My44MSwyODgsMTc5LjgxLDI5MiwxODguODEiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMjkzIiB5PSIxNTUuMzY2OSI+JiMyMjgzMzsmIzI1OTQzOzwvdGV4dD48L2c+PCEtLVNSQz1bUlAzRElpRDA0Q1ZsLW5IWkJnczc3WGZ3eWswUndDSzdhNHN3ajg1Y0t2QXo1MTZRM01XbVhMUDFuOGpVR2JLQU1YN2lmSnhEaUI2RnVRSTlPNDVPWGxkdXBfbmNQcV9yWEl6V0VFMlVQMm1LaGtBb0RuMVc3VjZIOHkweVAxV2xLQVVlQ3pKRmNCbldpWlFOeS1fUFhHTGRWX0tkV0ktUVBmcGxNeTBaWTJZWWtpbDNCYlgzN2FSWXI5RWdzVVpPWkxoR2hlbFJsZXZUUHNxTWpRN0xFWUdGM2cxOFAtUmdhUHRsQjdPU2dCdWRVcmt6aEZwX0lEbm5Rdkp5SFVycXNhbk05NWNJSkZ2VXREdUhZTFdxTDgwSkExTnVoRm9fbGpkQ29LdW1OYk9vWjVfRHo2c0pWMU5aOXVtZGdBU09hbzFaZzN5bWVOVURFaVRhS1RuaEVidnJCUGZZcllrSlZaOFhrLU5VdVdTMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="63-tv">6.3 TV番組のパース例<a class="headerlink" href="#63-tv" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch06_option.py</code></p>
<p>TV番組の文字列（例: <code>"Breaking Bad (2008-2013)"</code>）をパースする例で、Maybe の実践的な使い方を見てみましょう。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TvShow</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;TV番組を表すイミュータブルなデータクラス。&quot;&quot;&quot;</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end</span><span class="p">:</span> <span class="nb">int</span>
</code></pre></div>
<h4 id="_1">番組名を抽出<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_name</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;番組名を抽出する。&quot;&quot;&quot;</span>
    <span class="n">bracket_open</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bracket_open</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">raw_show</span><span class="p">[:</span><span class="n">bracket_open</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">assert</span> <span class="n">extract_name</span><span class="p">(</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="s2">&quot;Breaking Bad&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">extract_name</span><span class="p">(</span><span class="s2">&quot;(2008-2013)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>  <span class="c1"># 名前がない</span>
</code></pre></div>
<h4 id="_2">開始年・終了年を抽出<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_year_start</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;開始年を抽出する。&quot;&quot;&quot;</span>
    <span class="n">bracket_open</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
    <span class="n">dash</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bracket_open</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">dash</span> <span class="o">&gt;</span> <span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">year_str</span> <span class="o">=</span> <span class="n">raw_show</span><span class="p">[</span><span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">dash</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">parse_int</span><span class="p">(</span><span class="n">year_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_year_end</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;終了年を抽出する。&quot;&quot;&quot;</span>
    <span class="n">dash</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="n">bracket_close</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dash</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">bracket_close</span> <span class="o">&gt;</span> <span class="n">dash</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">year_str</span> <span class="o">=</span> <span class="n">raw_show</span><span class="p">[</span><span class="n">dash</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">bracket_close</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">parse_int</span><span class="p">(</span><span class="n">year_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Nothing</span>
</code></pre></div>
<h4 id="_3">単年の番組<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p><code>"Chernobyl (2019)"</code> のような単年の番組もサポートします。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_single_year</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;単年の番組から年を抽出する。&quot;&quot;&quot;</span>
    <span class="n">dash</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="n">bracket_open</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
    <span class="n">bracket_close</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dash</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">bracket_open</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">bracket_close</span> <span class="o">&gt;</span> <span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">year_str</span> <span class="o">=</span> <span class="n">raw_show</span><span class="p">[</span><span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">bracket_close</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">parse_int</span><span class="p">(</span><span class="n">year_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">assert</span> <span class="n">extract_single_year</span><span class="p">(</span><span class="s2">&quot;Chernobyl (2019)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">2019</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">extract_single_year</span><span class="p">(</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<h3 id="64-maybe">6.4 Maybe の合成<a class="headerlink" href="#64-maybe" title="Permanent link">&para;</a></h3>
<p>複数の Maybe を組み合わせて処理するには、<code>bind</code> と <code>map</code> を使います。</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM3MnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6OTk2cHg7aGVpZ2h0OjM3MnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDk5NiAzNzIiIHdpZHRoPSI5OTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIE1heWJlID8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iTWF5YmUgLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfTWF5YmUgLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM1NC44NiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU2NiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk4Ljg5NTMiIHg9IjI0NS41NTIzIiB5PSIyNi45OTUxIj5NYXliZSAmIzEyMzk4OyYjMjU4MDU7JiMyMDMxNjs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIG1hcE9wLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJtYXBPcCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJjbHVzdGVyX21hcE9wIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI3MS44NiIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIyNiIgeD0iNDQiIHk9IjYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM0LjA1NjYiIHg9IjEzOS45NzE3IiB5PSI3Ny45OTUxIj5tYXA8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGJpbmRPcC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iYmluZE9wIiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJjbHVzdGVyX2JpbmRPcCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyNzEuODYiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMzYiIHg9IjMxMCIgeT0iNjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTEyLjkwOTIiIHg9IjM3MS41NDU0IiB5PSI3Ny45OTUxIj5iaW5kIChmbGF0TWFwKTwvdGV4dD48L2c+PCEtLWVudGl0eSBtMS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJtMSIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfbTEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc5LjUzNDIiIHg9IjExMy4yMyIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkuNTM0MiIgeD0iMTIzLjIzIiB5PSIxMjEuOTk1MSI+U29tZSg1KTwvdGV4dD48L2c+PCEtLWVudGl0eSBtMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJtMiIgZGF0YS1zb3VyY2UtbGluZT0iNiIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfbTIiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE2OS40ODE0IiB4PSI2OC4yNiIgeT0iMTk3LjI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ5LjQ4MTQiIHg9Ijc4LjI2IiB5PSIyMTMuMjc1MSI+bWFwKGxhbWJkYSB4OiB4ICogMik8L3RleHQ+PC9nPjwhLS1lbnRpdHkgbTMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ibTMiIGRhdGEtc291cmNlLWxpbmU9IjciIGRhdGEtdWlkPSJlbnQwMDA2IiBpZD0iZW50aXR5X20zIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI4OC40NDE0IiB4PSIxMDguNzgiIHk9IjI4OC41NiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY4LjQ0MTQiIHg9IjExOC43OCIgeT0iMzA0LjU1NTEiPlNvbWUoMTApPC90ZXh0PjwvZz48IS0tZW50aXR5IGIxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImIxIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfYjEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijg4LjQ0MTQiIHg9IjM3OS43OCIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjguNDQxNCIgeD0iMzg5Ljc4IiB5PSIxMjEuOTk1MSI+U29tZSgxMCk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYjItLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYjIiIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV9iMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTgwLjQwNTMiIHg9IjMzMy44IiB5PSIxOTcuMjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjAuNDA1MyIgeD0iMzQzLjgiIHk9IjIxMy4yNzUxIj5iaW5kKHNhZmVfZGl2aWRlX2J5XzIpPC90ZXh0PjwvZz48IS0tZW50aXR5IGIzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImIzIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImVudDAwMTIiIGlkPSJlbnRpdHlfYjMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc5LjUzNDIiIHg9IjM4NC4yMyIgeT0iMjg4LjU2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTkuNTM0MiIgeD0iMzk0LjIzIiB5PSIzMDQuNTU1MSI+U29tZSg1KTwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkdNTjE1IiBkYXRhLXNvdXJjZS1saW5lPSIyMiIgZGF0YS11aWQ9ImVudDAwMTYiIGlkPSJlbnRpdHlfR01OMTUiPjxwYXRoIGQ9Ik01OTQuNSwxODguMyBMNTk0LjUsMjI4LjU2NTYgTDc0NS41MDAyLDIyOC41NjU2IEw3NDUuNTAwMiwxOTguMyBMNzM1LjUwMDIsMTg4LjMgTDU5NC41LDE4OC4zIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTczNS41MDAyLDE4OC4zIEw3MzUuNTAwMiwxOTguMyBMNzQ1LjUwMDIsMTk4LjMgTDczNS41MDAyLDE4OC4zIiBmaWxsPSIjRkZGRkZGIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODkuMzk0MSIgeD0iNjAwLjUiIHk9IjIwNS4zNjY5Ij5tYXA6ICYjMjA1MTY7JiMxMjQzNDsmIzIyNzkzOyYjMjU1NjM7PC90ZXh0Pjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzMC4wMDAyIiB4PSI2MDAuNSIgeT0iMjIwLjQ5OTciPiYjMzgzMDY7JiMyNTk2ODsmIzEyMzk5OyYjMzY4OTA7JiMyNDEyMDsmIzEyMzk4OyYjMjA1MTY7JiMxMjQzNDsmIzM2ODIwOyYjMTIzNzc7PC90ZXh0PjwvZz48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iR01OMTgiIGRhdGEtc291cmNlLWxpbmU9IjI3IiBkYXRhLXVpZD0iZW50MDAxOSIgaWQ9ImVudGl0eV9HTU4xOCI+PHBhdGggZD0iTTc4MC40NCwxODguMyBMNzgwLjQ0LDIyOC41NjU2IEw5ODkuNTY1NiwyMjguNTY1NiBMOTg5LjU2NTYsMTk4LjMgTDk3OS41NjU2LDE4OC4zIEw3ODAuNDQsMTg4LjMiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNOTc5LjU2NTYsMTg4LjMgTDk3OS41NjU2LDE5OC4zIEw5ODkuNTY1NiwxOTguMyBMOTc5LjU2NTYsMTg4LjMiIGZpbGw9IiNGRkZGRkYiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODguMTI1NiIgeD0iNzg2LjQ0IiB5PSIyMDUuMzY2OSI+YmluZDogTWF5YmUgJiMxMjQzNDsmIzM2ODIwOyYjMTIzNzc7JiMzODMwNjsmIzI1OTY4OyYjMTIzOTE7JiMyMjc5MzsmIzI1NTYzOzwvdGV4dD48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3OC4wMDAxIiB4PSI3ODYuNDQiIHk9IjIyMC40OTk3Ij4mIzEyNDkzOyYjMTI0NzM7JiMxMjQ4ODsmIzEyNDM0OyYjMzg0NTA7JiMxMjM2ODs8L3RleHQ+PC9nPjwhLS1saW5rIG0xIHRvIG0yLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Im0xIiBkYXRhLWVudGl0eS0yPSJtMiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImxuazciIGlkPSJsaW5rX20xX20yIj48cGF0aCBkPSJNMTUzLDEyOC43NCBDMTUzLDE0NS45MiAxNTMsMTczLjY4IDE1MywxOTAuODUiIGZpbGw9Im5vbmUiIGlkPSJtMS10by1tMiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTUzLDE5Ni44NSwxNTcsMTg3Ljg1LDE1MywxOTEuODUsMTQ5LDE4Ny44NSwxNTMsMTk2Ljg1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIG0yIHRvIG0zLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9Im0yIiBkYXRhLWVudGl0eS0yPSJtMyIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImxuazgiIGlkPSJsaW5rX20yX20zIj48cGF0aCBkPSJNMTUzLDIyMC4wMiBDMTUzLDIzNy4yMSAxNTMsMjY0Ljk2IDE1MywyODIuMTMiIGZpbGw9Im5vbmUiIGlkPSJtMi10by1tMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTUzLDI4OC4xMywxNTcsMjc5LjEzLDE1MywyODMuMTMsMTQ5LDI3OS4xMywxNTMsMjg4LjEzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIGIxIHRvIGIyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImIxIiBkYXRhLWVudGl0eS0yPSJiMiIgZGF0YS1zb3VyY2UtbGluZT0iMTYiIGRhdGEtdWlkPSJsbmsxMyIgaWQ9ImxpbmtfYjFfYjIiPjxwYXRoIGQ9Ik00MjQsMTI4Ljc0IEM0MjQsMTQ1LjkyIDQyNCwxNzMuNjggNDI0LDE5MC44NSIgZmlsbD0ibm9uZSIgaWQ9ImIxLXRvLWIyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI0MjQsMTk2Ljg1LDQyOCwxODcuODUsNDI0LDE5MS44NSw0MjAsMTg3Ljg1LDQyNCwxOTYuODUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgYjIgdG8gYjMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYjIiIGRhdGEtZW50aXR5LTI9ImIzIiBkYXRhLXNvdXJjZS1saW5lPSIxNyIgZGF0YS11aWQ9ImxuazE0IiBpZD0ibGlua19iMl9iMyI+PHBhdGggZD0iTTQyNCwyMjAuMDIgQzQyNCwyMzcuMjEgNDI0LDI2NC45NiA0MjQsMjgyLjEzIiBmaWxsPSJub25lIiBpZD0iYjItdG8tYjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjQyNCwyODguMTMsNDI4LDI3OS4xMyw0MjQsMjgzLjEzLDQyMCwyNzkuMTMsNDI0LDI4OC4xMyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBtYXBPcCB0byBHTU4xNS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJtYXBPcCIgZGF0YS1lbnRpdHktMj0iR01OMTUiIGRhdGEtc291cmNlLWxpbmU9IjIyIiBkYXRhLXVpZD0ibG5rMTciIGlkPSJsaW5rX21hcE9wX0dNTjE1Ij48cGF0aCBkPSJNMjcwLjA0MzcsMTE5LjkxMzcgQzI3MC4yMTg1LDExOS45NTIgMjcwLjM5NiwxMTkuOTkwOCAyNzAuNTc2MSwxMjAuMDMwMiBDMjcxLjI5NjUsMTIwLjE4NzggMjcyLjA1OTMsMTIwLjM1NDYgMjcyLjg2MzMsMTIwLjUzMDUgQzI3OS4yOTU1LDEyMS45Mzc2IDI4OC4zNjY0LDEyMy45MjIxIDI5OS40ODg0LDEyNi4zNTU1IEMzMjEuNzMyNSwxMzEuMjIyMiAzNTIuMTgxMywxMzcuODg0NCAzODYuMTM1LDE0NS4zMTM4IEM0NTQuMDQyNSwxNjAuMTcyNSA1MzUuOTcsMTc4LjEgNTk0LjMyLDE5MC44NyIgZmlsbD0ibm9uZSIgaWQ9Im1hcE9wLUdNTjE1IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7c3Ryb2tlLWRhc2hhcnJheTo3LDc7Ii8+PC9nPjwhLS1saW5rIGJpbmRPcCB0byBHTU4xOC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJiaW5kT3AiIGRhdGEtZW50aXR5LTI9IkdNTjE4IiBkYXRhLXNvdXJjZS1saW5lPSIyNyIgZGF0YS11aWQ9ImxuazIwIiBpZD0ibGlua19iaW5kT3BfR01OMTgiPjxwYXRoIGQ9Ik01NDYuMTU0OCwxMjAuMjUxMiBDNTQ2LjMxLDEyMC4yOTExIDU0Ni40NjczLDEyMC4zMzE2IDU0Ni42MjY3LDEyMC4zNzI1IEM1NTEuNzI1NywxMjEuNjg0IDU1OC45MTk4LDEyMy41MzQ1IDU2Ny43NjQxLDEyNS44MDk3IEM1ODUuNDUyNSwxMzAuMzYgNjA5Ljc0MTIsMTM2LjYwODggNjM3LjA3LDE0My42NCBDNjkxLjcyNzUsMTU3LjcwMjUgNzU4LjU0NSwxNzQuODk1IDgwOS4wNCwxODcuODkiIGZpbGw9Im5vbmUiIGlkPSJiaW5kT3AtR01OMTgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTtzdHJva2UtZGFzaGFycmF5OjcsNzsiLz48L2c+PCEtLVNSQz1bUlA3RElpR200Q1ZsVU9nbmZvZWlzMU9sRlZXNlltU1ZlMkpSTDBqREt0UTN4MkIyVGxVWVhxTm4yeHpFaWsxRG5URHc0MXljampZdEMyNmZoMS1OSjlaX3AzLV9jUW84TlNlZTUxYkVTdUp3ajJUbWxmREhTQmZ1SDJaOHloNC1jdHN5dEpjbWx3bW9OM1kwMXczWUxnNmE3a3g3dTZucEhqc0RMUUR1RGdiQXQwbXA0Y0NPWFoyNERWMWpYUl9Tdmd0UlI4Mk8xdnRFZmpRUFJzdTFFbFcxSHo4eTFaVjlpRVpZbWxKZnI2LUtyZkVxQkJoODdVMjRIZDZ3YnlPcThnRjhxWDNfZG81OFc4WTFLSjhuQzRKM0E5b1MybWc0Mnk0UHlDSGkwZ2FwWDZleWJ2RkpRZHZLN3otWXZsQS1sZFlNdkxDcGxnYU0yeExHOHQtIC1keWxvNmI0clk3Und1c1ZjR0pnNE8zLVp4TWV6Ny1tUlNaZ0phclN2RkxHTHBUTUJCNC0gLVZSeTBdLS0+PC9nPjwvc3ZnPg==" class="uml" alt="uml diagram" title="" /></p>
<h4 id="_4">文字列の加算<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_strings</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;2つの数値文字列を加算する。&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">parse_int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">parse_int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">))</span>

<span class="k">assert</span> <span class="n">add_strings</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">add_strings</span><span class="p">(</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;abc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
<span class="k">assert</span> <span class="n">add_strings</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;20&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<h4 id="parse_show">parse_show の完成<a class="headerlink" href="#parse_show" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_show</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">TvShow</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;TV番組の文字列をパースする。&quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">extract_name</span><span class="p">(</span><span class="n">raw_show</span><span class="p">)</span>
    <span class="c1"># lash: Nothing の場合に代替を試す（orElse に相当）</span>
    <span class="n">year_start</span> <span class="o">=</span> <span class="n">extract_year_start</span><span class="p">(</span><span class="n">raw_show</span><span class="p">)</span><span class="o">.</span><span class="n">lash</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">extract_single_year</span><span class="p">(</span><span class="n">raw_show</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">year_end</span> <span class="o">=</span> <span class="n">extract_year_end</span><span class="p">(</span><span class="n">raw_show</span><span class="p">)</span><span class="o">.</span><span class="n">lash</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">extract_single_year</span><span class="p">(</span><span class="n">raw_show</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">year_start</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">year_end</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">TvShow</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># 使用例</span>
<span class="k">assert</span> <span class="n">parse_show</span><span class="p">(</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="n">TvShow</span><span class="p">(</span><span class="s2">&quot;Breaking Bad&quot;</span><span class="p">,</span> <span class="mi">2008</span><span class="p">,</span> <span class="mi">2013</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">parse_show</span><span class="p">(</span><span class="s2">&quot;Chernobyl (2019)&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="n">TvShow</span><span class="p">(</span><span class="s2">&quot;Chernobyl&quot;</span><span class="p">,</span> <span class="mi">2019</span><span class="p">,</span> <span class="mi">2019</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">parse_show</span><span class="p">(</span><span class="s2">&quot;Invalid&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI5NnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTc0cHg7aGVpZ2h0OjI5NnB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU3NCAyOTYiIHdpZHRoPSI1NzRweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIHBhcnNlX3Nob3cgPz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0icGFyc2Vfc2hvdyAuLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfcGFyc2Vfc2hvdyAuLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI3OC44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU1NiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1Mi45MjY1IiB4PSIyMTMuNTM2NyIgeT0iMjYuOTk1MSI+cGFyc2Vfc2hvdyAmIzEyMzk4OyYjMTI1MDE7JiMxMjUyNTsmIzEyNTQwOzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgPz8tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9Ii4uIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImNsdXN0ZXJfLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iNzMuMjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI1MDgiIHg9IjM2IiB5PSIxMTYuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNy45OTk5IiB4PSIyNzYuMDAwMSIgeT0iMTMxLjI5NTEiPiYjMjUyNzc7JiMyMDk4Njs8L3RleHQ+PC9nPjwhLS1lbnRpdHkgaW5wdXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iaW5wdXQiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iZW50aXR5X2lucHV0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMDUuNTEzNyIgeD0iMTc0LjI0IiB5PSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE4NS41MTM3IiB4PSIxODQuMjQiIHk9IjYyLjk5NTEiPkJyZWFraW5nIEJhZCAoMjAwOC0yMDEzKTwvdGV4dD48L2c+PCEtLWVudGl0eSByZXN1bHQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0icmVzdWx0IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfcmVzdWx0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNzYuMTIyMSIgeD0iMTM4Ljk0IiB5PSIyNTIuNTkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNTYuMTIyMSIgeD0iMTQ4Ljk0IiB5PSIyNjguNTg1MSI+VHZTaG93KCdCcmVha2luZyBCYWQnLCAyMDA4LCAyMDEzKTwvdGV4dD48L2c+PCEtLWVudGl0eSBlbi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJlbiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfZW4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjExNi42MTIzIiB4PSI1MS42OSIgeT0iMTUxLjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5Ni42MTIzIiB4PSI2MS42OSIgeT0iMTY3LjI5NTEiPmV4dHJhY3RfbmFtZTwvdGV4dD48L2c+PCEtLWVudGl0eSBleXMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZXlzIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9leXMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0Ny43NSIgeD0iMjAzLjEzIiB5PSIxNTEuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy43NSIgeD0iMjEzLjEzIiB5PSIxNjcuMjk1MSI+ZXh0cmFjdF95ZWFyX3N0YXJ0PC90ZXh0PjwvZz48IS0tZW50aXR5IGV5ZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJleWUiIGRhdGEtc291cmNlLWxpbmU9IjkiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iZW50aXR5X2V5ZSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTQxLjUxNTYiIHg9IjM4Ni4yNCIgeT0iMTUxLjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMjEuNTE1NiIgeD0iMzk2LjI0IiB5PSIxNjcuMjk1MSI+ZXh0cmFjdF95ZWFyX2VuZDwvdGV4dD48L2c+PCEtLWxpbmsgaW5wdXQgdG8gZW4tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iaW5wdXQiIGRhdGEtZW50aXR5LTI9ImVuIiBkYXRhLXNvdXJjZS1saW5lPSIxNCIgZGF0YS11aWQ9ImxuazkiIGlkPSJsaW5rX2lucHV0X2VuIj48cGF0aCBkPSJNMjU2LjAyLDY5LjYxIEMyMzcuMzIsNzkuMTMgMjA5LjM4LDkzLjg3IDE4NiwxMDguMyBDMTYzLjY2LDEyMi4wNyAxNDMuNzgzMSwxMzYuMjgwOSAxMjguNzgzMSwxNDcuMzgwOSIgZmlsbD0ibm9uZSIgaWQ9ImlucHV0LXRvLWVuIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxMjMuOTYsMTUwLjk1LDEzMy41NzM5LDE0OC44MTE4LDEyNy45NzkyLDE0Ny45NzU4LDEyOC44MTUyLDE0Mi4zODEsMTIzLjk2LDE1MC45NSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tbGluayBpbnB1dCB0byBleXMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iaW5wdXQiIGRhdGEtZW50aXR5LTI9ImV5cyIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfaW5wdXRfZXlzIj48cGF0aCBkPSJNMjc3LDY5LjcxIEMyNzcsODkuNDEgMjc3LDEyNS41NSAyNzcsMTQ1LjA5IiBmaWxsPSJub25lIiBpZD0iaW5wdXQtdG8tZXlzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyNzcsMTUxLjA5LDI4MSwxNDIuMDksMjc3LDE0Ni4wOSwyNzMsMTQyLjA5LDI3NywxNTEuMDkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgaW5wdXQgdG8gZXllLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImlucHV0IiBkYXRhLWVudGl0eS0yPSJleWUiIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0ibG5rMTEiIGlkPSJsaW5rX2lucHV0X2V5ZSI+PHBhdGggZD0iTTI5Ny4wMiw2OS42NCBDMzE1LjU1LDc5LjQzIDM0My44LDk0LjU1IDM2OCwxMDguMyBDMzkzLjE5LDEyMi42MSA0MTYuNzc4NywxMzYuODEzOSA0MzQuNjE4NywxNDcuNzAzOSIgZmlsbD0ibm9uZSIgaWQ9ImlucHV0LXRvLWV5ZSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNDM5Ljc0LDE1MC44Myw0MzQuMTQyMiwxNDIuNzI2Niw0MzUuNDcyMywxNDguMjI0OSw0MjkuOTc0LDE0OS41NTQ5LDQzOS43NCwxNTAuODMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgZW4gdG8gcmVzdWx0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVuIiBkYXRhLWVudGl0eS0yPSJyZXN1bHQiIGRhdGEtc291cmNlLWxpbmU9IjE3IiBkYXRhLXVpZD0ibG5rMTIiIGlkPSJsaW5rX2VuX3Jlc3VsdCI+PHBhdGggZD0iTTEyNy44NywxNzQuMDcgQzE2MC4wMSwxOTMuMTggMjIyLjA1MjMsMjMwLjA3NDQgMjU0LjEwMjMsMjQ5LjEyNDQiIGZpbGw9Im5vbmUiIGlkPSJlbi10by1yZXN1bHQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI1OS4yNiwyNTIuMTksMjUzLjU2NzIsMjQ0LjE1MzEsMjU0Ljk2MTksMjQ5LjYzNTMsMjQ5LjQ3OTcsMjUxLjAzLDI1OS4yNiwyNTIuMTkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyOC4zNTUiIHg9IjIwOS40NiIgeT0iMjE4LjY1NjkiPmJpbmQ8L3RleHQ+PC9nPjwhLS1saW5rIGV5cyB0byByZXN1bHQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZXlzIiBkYXRhLWVudGl0eS0yPSJyZXN1bHQiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0ibG5rMTMiIGlkPSJsaW5rX2V5c19yZXN1bHQiPjxwYXRoIGQ9Ik0yNzcsMTc0LjA3IEMyNzcsMTkzLjE4IDI3NywyMjcuMTQgMjc3LDI0Ni4xOSIgZmlsbD0ibm9uZSIgaWQ9ImV5cy10by1yZXN1bHQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjI3NywyNTIuMTksMjgxLDI0My4xOSwyNzcsMjQ3LjE5LDI3MywyNDMuMTksMjc3LDI1Mi4xOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI4LjM1NSIgeD0iMjc4IiB5PSIyMTguNjU2OSI+YmluZDwvdGV4dD48L2c+PCEtLWxpbmsgZXllIHRvIHJlc3VsdC0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJleWUiIGRhdGEtZW50aXR5LTI9InJlc3VsdCIgZGF0YS1zb3VyY2UtbGluZT0iMTkiIGRhdGEtdWlkPSJsbmsxNCIgaWQ9ImxpbmtfZXllX3Jlc3VsdCI+PHBhdGggZD0iTTQzNy43NCwxNzQuMDcgQzQwMy4wOSwxOTMuMTggMzM1LjkyNDIsMjMwLjI0MjkgMzAxLjM3NDIsMjQ5LjI5MjkiIGZpbGw9Im5vbmUiIGlkPSJleWUtdG8tcmVzdWx0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIyOTYuMTIsMjUyLjE5LDMwNS45MzI3LDI1MS4zNDcyLDMwMC40OTg1LDI0OS43NzU4LDMwMi4wNywyNDQuMzQxNiwyOTYuMTIsMjUyLjE5IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjguODgxOCIgeD0iMzc4Ljc4IiB5PSIyMTguNjU2OSI+bWFwPC90ZXh0PjwvZz48IS0tU1JDPVtST3VfM2U5RzNDUnRUdWhBZVlRSTgyeDZtTzRodzR1Z0Q0WTRJanZ4X2VqbkMwbWN4WHYzM3MzcUQ0SkY4UTE2RDJ2RHMtX3hzYnpEWm9hY0kyOENNR1g5ZGFPRThXOFpHUWQ4TFVGZjBoQmpBS2lGTU5oQ3FlaTFRLTZYekM1bTlFNGF2MDBTekE1WE1yUk5qQXJzZnNhMEFXV3ZjVWNsVV9WenpST3hWLUFxcjE4enhKQjZMNFE4VnZHTGVOSUxIZ2NWLWFoekNuM3hCdmQ0SGhtU21fYVcxc19LZ3VwcjVYSUdITnJKSWJBcEFDU2lRUzRxLW1MNFBTV19MWVNJbjZOeHA0NEZIWTd4OGhWenRUQnREaVA0UjF1MF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h3 id="65">6.5 安全な操作<a class="headerlink" href="#65" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch06_option.py</code></p>
<h4 id="_5">安全な除算<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">safe_divide</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;安全な除算。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Nothing</span>
    <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">a</span> <span class="o">//</span> <span class="n">b</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">safe_divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">safe_divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<h4 id="_6">安全なリストアクセス<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">safe_head</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;リストの最初の要素を安全に取得する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Nothing</span>
    <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">def</span><span class="w"> </span><span class="nf">safe_find</span><span class="p">(</span><span class="n">lst</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">predicate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;条件を満たす最初の要素を安全に見つける。&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">predicate</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">assert</span> <span class="n">safe_head</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">safe_head</span><span class="p">([])</span> <span class="o">==</span> <span class="n">Nothing</span>
<span class="k">assert</span> <span class="n">safe_find</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<h3 id="66">6.6 エラーハンドリング戦略<a class="headerlink" href="#66" title="Permanent link">&para;</a></h3>
<p>複数のパース処理を行う場合、2つの戦略があります。</p>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch06_option.py</code></p>
<h4 id="best-effort">Best-effort 戦略<a class="headerlink" href="#best-effort" title="Permanent link">&para;</a></h4>
<p>パースできたものだけ返す。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_shows_best_effort</span><span class="p">(</span><span class="n">raw_shows</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TvShow</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;パースできたものだけ返す（Best-effort戦略）。&quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">raw_shows</span><span class="p">:</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_show</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parsed</span><span class="p">,</span> <span class="n">Some</span><span class="p">):</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parsed</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="n">shows</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">,</span> <span class="s2">&quot;Invalid&quot;</span><span class="p">,</span> <span class="s2">&quot;Mad Men (2007-2015)&quot;</span><span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parse_shows_best_effort</span><span class="p">(</span><span class="n">shows</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>  <span class="c1"># Invalid は無視される</span>
</code></pre></div>
<h4 id="all-or-nothing">All-or-nothing 戦略<a class="headerlink" href="#all-or-nothing" title="Permanent link">&para;</a></h4>
<p>全部成功するか、全部失敗するか。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_shows_all_or_nothing</span><span class="p">(</span><span class="n">raw_shows</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">TvShow</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;全部成功するか、全部失敗するか（All-or-nothing戦略）。&quot;&quot;&quot;</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">TvShow</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">raw_shows</span><span class="p">:</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_show</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parsed</span><span class="p">,</span> <span class="n">Some</span><span class="p">):</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parsed</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Nothing</span>
    <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="c1"># 全て成功</span>
<span class="n">shows_ok</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">,</span> <span class="s2">&quot;Mad Men (2007-2015)&quot;</span><span class="p">]</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parse_shows_all_or_nothing</span><span class="p">(</span><span class="n">shows_ok</span><span class="p">),</span> <span class="n">Some</span><span class="p">)</span>

<span class="c1"># 一つでも失敗すると Nothing</span>
<span class="n">shows_mixed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Breaking Bad (2008-2013)&quot;</span><span class="p">,</span> <span class="s2">&quot;Invalid&quot;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">parse_shows_all_or_nothing</span><span class="p">(</span><span class="n">shows_mixed</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI1N3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NTY2cHg7aGVpZ2h0OjI1N3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDU2NiAyNTciIHdpZHRoPSI1NjZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIzOS41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjU0OCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIyMDkuMDAwMyIgeT0iMjYuOTk1MSI+JiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMxMjQ5NTsmIzEyNTMxOyYjMTI0ODk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMyNTEyNjsmIzMwMDUzOzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgYmUtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9ImJlIiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImNsdXN0ZXJfYmUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTcyLjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjM4IiB4PSIzNiIgeT0iNTUiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODUuODkzNiIgeD0iMTEyLjA1MzIiIHk9IjY5Ljk5NTEiPkJlc3QtZWZmb3J0PC90ZXh0PjwvZz48IS0tY2x1c3RlciBhb24tLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9ImFvbiIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA3IiBpZD0iY2x1c3Rlcl9hb24iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTcyLjU5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjM4IiB4PSIyOTgiIHk9IjU1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS42MDc0IiB4PSIzNjIuMTk2MyIgeT0iNjkuOTk1MSI+QWxsLW9yLW5vdGhpbmc8L3RleHQ+PC9nPjwhLS1lbnRpdHkgYmVfaW5wdXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYmVfaW5wdXQiIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X2JlX2lucHV0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzcuNTMwMyIgeD0iODMuMjMiIHk9IjkwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE3LjUzMDMiIHg9IjkzLjIzIiB5PSIxMDUuOTk1MSI+WydBJywgJ0ludmFsaWQnLCAnQiddPC90ZXh0PjwvZz48IS0tZW50aXR5IGJlX291dHB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJiZV9vdXRwdXQiIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X2JlX291dHB1dCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjA1LjQ3MjciIHg9IjUyLjI2IiB5PSIxODkuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODUuNDcyNyIgeD0iNjIuMjYiIHk9IjIwNS4yODUxIj5bVHZTaG93KCdBJyksIFR2U2hvdygnQicpXTwvdGV4dD48L2c+PCEtLWVudGl0eSBhb25faW5wdXQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYW9uX2lucHV0IiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfYW9uX2lucHV0Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMzcuNTMwMyIgeD0iMzE0LjIzIiB5PSI5MCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy41MzAzIiB4PSIzMjQuMjMiIHk9IjEwNS45OTUxIj5bJ0EnLCAnSW52YWxpZCcsICdCJ108L3RleHQ+PC9nPjwhLS1lbnRpdHkgYW9uX291dHB1dC0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJhb25fb3V0cHV0IiBkYXRhLXNvdXJjZS1saW5lPSIxMiIgZGF0YS11aWQ9ImVudDAwMDkiIGlkPSJlbnRpdHlfYW9uX291dHB1dCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzUuMDQ5OCIgeD0iMzE0LjQ4IiB5PSIxODkuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI1NS4wNDk4IiB4PSIzMjQuNDgiIHk9IjIwNS4yODUxIj5Ob3RoaW5nPC90ZXh0PjwvZz48IS0tbGluayBiZV9pbnB1dCB0byBiZV9vdXRwdXQtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iYmVfaW5wdXQiIGRhdGEtZW50aXR5LTI9ImJlX291dHB1dCIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX2JlX2lucHV0X2JlX291dHB1dCI+PHBhdGggZD0iTTE1Mi4zMiwxMTIuNTYgQzE1Mi45LDEzMS4xOSAxNTMuOTA0OSwxNjQuMDIyOSAxNTQuNDg0OSwxODIuODEyOSIgZmlsbD0ibm9uZSIgaWQ9ImJlX2lucHV0LXRvLWJlX291dHB1dCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTU0LjY3LDE4OC44MSwxNTguMzkwNCwxNzkuNjkwOSwxNTQuNTE1NywxODMuODEyNCwxNTAuMzk0MiwxNzkuOTM3NywxNTQuNjcsMTg4LjgxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA0LjAwMDEiIHg9IjE1NC42OCIgeT0iMTU1LjM1NjkiPiYjMjUxMDQ7JiMyMTE1MTsmIzEyMzc1OyYjMTIzODM7JiMxMjQxODsmIzEyMzk4OyYjMTIzODQ7JiMxMjM2OTs8L3RleHQ+PC9nPjwhLS1saW5rIGFvbl9pbnB1dCB0byBhb25fb3V0cHV0LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImFvbl9pbnB1dCIgZGF0YS1lbnRpdHktMj0iYW9uX291dHB1dCIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfYW9uX2lucHV0X2Fvbl9vdXRwdXQiPjxwYXRoIGQ9Ik0zNzkuNjgsMTEyLjU2IEMzNzMuNzUsMTMxLjE5IDM2My4xODk2LDE2NC4zMDI2IDM1Ny4yMDk2LDE4My4wOTI2IiBmaWxsPSJub25lIiBpZD0iYW9uX2lucHV0LXRvLWFvbl9vdXRwdXQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjM1NS4zOSwxODguODEsMzYxLjkzMSwxODEuNDQ2OSwzNTYuOTA2MywxODQuMDQ1NSwzNTQuMzA3OCwxNzkuMDIwOCwzNTUuMzksMTg4LjgxIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY5LjAwMDIiIHg9IjM3MC4zNiIgeT0iMTU1LjM1NjkiPiYjMTk5Njg7JiMxMjM4ODsmIzEyMzkxOyYjMTI0MTg7JiMyMjgzMzsmIzI1OTQzOyYjMTIzNzc7JiMxMjQyNzsmIzEyMzkyOyYjMjA4NDA7JiMxMjM5MDsmIzIyODMzOyYjMjU5NDM7PC90ZXh0PjwvZz48IS0tU1JDPVtLb3A5SUNyRExJWjhJU3BDdS04Z0lhcWtJU25CcHFiTEs3aFNqRTlueXloN3BOaVVEX1NfUmp4eWtCZHBTVkNnNEFEZm14RUVQUy1kQmJMSWc0UE14dkhRTkFBUmNmUU1OcklZZjkxT2g5MksyZkhGSlluQUtMMkFMZFRLcnI1R3p5bWhJeXA5SjA0bmRUSFplT2hZQ19DQUlhalcyYUZBV1pGb29wTTB3WkxyNTYwUzl0TERrRWh5cVhBR1NmVy0xTHJURXVJbVdmTjJpdXU5SnhsY0Zzd1NfaFhuX2tFY2ZpVUR3bnV0QmRaU0U5Nmg1aUxwWlphdmtsYjVrZGR2OUhjUFVVYldtbkZweXVYbUM1MExZZWx6SzRzMGtHLWszRW4wWDBKR1hLenNEM25rTkZBdVNKZEdVSy1OUjdtczVVWktjTy1Sa1h5dGhkWlFrazludXBBODhEMzFqRzAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="67-maybe">6.7 Maybe のユーティリティ<a class="headerlink" href="#67-maybe" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch06_option.py</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># デフォルト値を取得</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_value_or_default</span><span class="p">(</span><span class="n">maybe</span><span class="p">:</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">maybe</span><span class="o">.</span><span class="n">value_or</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">get_value_or_default</span><span class="p">(</span><span class="n">Some</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>
<span class="k">assert</span> <span class="n">get_value_or_default</span><span class="p">(</span><span class="n">Nothing</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="c1"># 最初の Some を返す</span>
<span class="k">def</span><span class="w"> </span><span class="nf">first_some</span><span class="p">(</span><span class="n">maybes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">maybes</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Some</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">m</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">assert</span> <span class="n">first_some</span><span class="p">([</span><span class="n">Nothing</span><span class="p">,</span> <span class="n">Nothing</span><span class="p">,</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">Some</span><span class="p">(</span><span class="mi">4</span><span class="p">)])</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># Some の値だけを抽出</span>
<span class="k">def</span><span class="w"> </span><span class="nf">filter_some</span><span class="p">(</span><span class="n">maybes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">unwrap</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">maybes</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Some</span><span class="p">)]</span>

<span class="k">assert</span> <span class="n">filter_some</span><span class="p">([</span><span class="n">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Nothing</span><span class="p">,</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="c1"># 全ての Maybe が Some なら、値のリストを返す</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sequence_maybes</span><span class="p">(</span><span class="n">maybes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]]:</span>
    <span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">maybes</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Some</span><span class="p">):</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Nothing</span>
    <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">sequence_maybes</span><span class="p">([</span><span class="n">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Some</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">==</span> <span class="n">Some</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">sequence_maybes</span><span class="p">([</span><span class="n">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Nothing</span><span class="p">,</span> <span class="n">Some</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<hr />
<h2 id="7-result">第7章: Result 型と複合的なエラー処理<a class="headerlink" href="#7-result" title="Permanent link">&para;</a></h2>
<h3 id="71-maybe">7.1 Maybe の限界<a class="headerlink" href="#71-maybe" title="Permanent link">&para;</a></h3>
<p><code>Maybe</code> は失敗を表現できますが、<strong>なぜ失敗したか</strong>を伝えることができません。</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Maybe では失敗理由がわからない</span>
<span class="k">assert</span> <span class="n">parse_int</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>  <span class="c1"># なぜ失敗した？文字？空文字？</span>
</code></pre></div>
<h3 id="72-result">7.2 Result 型の基本<a class="headerlink" href="#72-result" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p><code>Result</code> 型を使うと、成功時は値を、失敗時はエラーメッセージを保持できます。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">returns.result</span><span class="w"> </span><span class="kn">import</span> <span class="n">Result</span><span class="p">,</span> <span class="n">Success</span><span class="p">,</span> <span class="n">Failure</span>

<span class="k">def</span><span class="w"> </span><span class="nf">parse_int_result</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;文字列を整数に変換し、エラーメッセージを返す。&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot parse &#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&#39; as integer&quot;</span><span class="p">)</span>

<span class="c1"># 使用例</span>
<span class="k">assert</span> <span class="n">parse_int_result</span><span class="p">(</span><span class="s2">&quot;42&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Success</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parse_int_result</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Failure</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;Cannot parse&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">failure</span><span class="p">()</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6NzExcHg7aGVpZ2h0OjI5OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDcxMSAyOTgiIHdpZHRoPSI3MTFweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFJlc3VsdCA/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJSZXN1bHQgLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyX1Jlc3VsdCAuIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI4MC41OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjUzOCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY4Ljk0MDQiIHg9IjI0Ni41Mjk4IiB5PSIyNi45OTUxIj5SZXN1bHQgJiMyMjQxMTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIHN1Y2Nlc3MtLT48ZyBjbGFzcz0iY2x1c3RlciIgZGF0YS1lbnRpdHk9InN1Y2Nlc3MiIGRhdGEtc291cmNlLWxpbmU9IjQiIGRhdGEtdWlkPSJlbnQwMDAzIiBpZD0iY2x1c3Rlcl9zdWNjZXNzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE4MS41OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIwMCIgeD0iMzYiIHk9IjcxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijg5LjYwNTQiIHg9IjkxLjE5NzMiIHk9Ijg1Ljk5NTEiPlN1Y2Nlc3MoJiMyMDUxNjspPC90ZXh0PjwvZz48IS0tY2x1c3RlciBmYWlsdXJlLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJmYWlsdXJlIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJjbHVzdGVyX2ZhaWx1cmUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMTk3LjU4IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjUwIiB4PSIyNjgiIHk9IjYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwOS43NzEzIiB4PSIzMzguMTE0MyIgeT0iNzcuOTk1MSI+RmFpbHVyZSgmIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDspPC90ZXh0PjwvZz48IS0tZW50aXR5IHMxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InMxIiBkYXRhLXNvdXJjZS1saW5lPSI1IiBkYXRhLXVpZD0iZW50MDAwNCIgaWQ9ImVudGl0eV9zMSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTY3LjczMTQiIHg9IjUyLjEzIiB5PSIxMDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDcuNzMxNCIgeD0iNjIuMTMiIHk9IjEyMS45OTUxIj5wYXJzZV9pbnRfcmVzdWx0KCc0MicpPC90ZXh0PjwvZz48IS0tZW50aXR5IHMyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InMyIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9zMiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTA1LjA5MzgiIHg9IjgzLjQ1IiB5PSIyMTQuMjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4NS4wOTM4IiB4PSI5My40NSIgeT0iMjMwLjI3NTEiPlN1Y2Nlc3MoNDIpPC90ZXh0PjwvZz48IS0tZW50aXR5IGYxLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImYxIiBkYXRhLXNvdXJjZS1saW5lPSIxMSIgZGF0YS11aWQ9ImVudDAwMDgiIGlkPSJlbnRpdHlfZjEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE3NS4wODAxIiB4PSIyOTkuNDYiIHk9IjEwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1NS4wODAxIiB4PSIzMDkuNDYiIHk9IjEyMS45OTUxIj5wYXJzZV9pbnRfcmVzdWx0KCdhYmMnKTwvdGV4dD48L2c+PCEtLWVudGl0eSBmMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJmMiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X2YyIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxOTMuMzU5NCIgeD0iMjkyLjMyIiB5PSIyMTQuMjgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzMuMzU5NCIgeD0iMzAyLjMyIiB5PSIyMzAuMjc1MSI+RmFpbHVyZSgnQ2Fubm90IHBhcnNlLi4uJyk8L3RleHQ+PC9nPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJHTU4xMSIgZGF0YS1zb3VyY2UtbGluZT0iMTgiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5X0dNTjExIj48cGF0aCBkPSJNNTY2LDIwNS4zIEw1NjYsMjQ1LjU2NTYgTDcwNC4wMDAxLDI0NS41NjU2IEw3MDQuMDAwMSwyMTUuMyBMNjk0LjAwMDEsMjA1LjMgTDU2NiwyMDUuMyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik02OTQuMDAwMSwyMDUuMyBMNjk0LjAwMDEsMjE1LjMgTDcwNC4wMDAxLDIxNS4zIEw2OTQuMDAwMSwyMDUuMyIgZmlsbD0iI0ZGRkZGRiIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy4wMDAxIiB4PSI1NzIiIHk9IjIyMi4zNjY5Ij4mIzEyNDU2OyYjMTI1MjE7JiMxMjU0MDsmIzEyMzk4OyYjMjk3MDI7JiMzMDAwMTsmIzEyNDM0OyYjMjA0NDU7JiMyNTM0NTs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEuMDAwMSIgeD0iNTcyIiB5PSIyMzcuNDk5NyI+JiMxMjQ4NzsmIzEyNDk2OyYjMTI0ODM7JiMxMjQ2NDsmIzEyMzY0OyYjMjM0ODE7JiMyNjEzMTs8L3RleHQ+PC9nPjwhLS1saW5rIHMxIHRvIHMyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InMxIiBkYXRhLWVudGl0eS0yPSJzMiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX3MxX3MyIj48cGF0aCBkPSJNMTM2LDEyOC43MyBDMTM2LDE0OS4xIDEzNiwxODcuNTYgMTM2LDIwNy45IiBmaWxsPSJub25lIiBpZD0iczEtdG8tczIiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjEzNiwyMTMuOSwxNDAsMjA0LjksMTM2LDIwOC45LDEzMiwyMDQuOSwxMzYsMjEzLjkiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxMyIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNiIgeD0iMTM3IiB5PSIxNzEuMzY2OSI+JiMyNTEwNDsmIzIxMTUxOzwvdGV4dD48L2c+PCEtLWxpbmsgZjEgdG8gZjItLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZjEiIGRhdGEtZW50aXR5LTI9ImYyIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImxuazEwIiBpZD0ibGlua19mMV9mMiI+PHBhdGggZD0iTTM4Ny4yLDEyOC43MyBDMzg3LjU4LDE0OS4xIDM4OC4zMDc5LDE4Ny41NjEgMzg4LjY4NzksMjA3LjkwMSIgZmlsbD0ibm9uZSIgaWQ9ImYxLXRvLWYyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIzODguOCwyMTMuOSwzOTIuNjMxMiwyMDQuODI2OSwzODguNzA2NiwyMDguOTAwOSwzODQuNjMyNiwyMDQuOTc2MywzODguOCwyMTMuOSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjEzIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI2IiB4PSIzODkuMDYiIHk9IjE3MS4zNjY5Ij4mIzIyODMzOyYjMjU5NDM7PC90ZXh0PjwvZz48IS0tbGluayBmYWlsdXJlIHRvIEdNTjExLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImZhaWx1cmUiIGRhdGEtZW50aXR5LTI9IkdNTjExIiBkYXRhLXNvdXJjZS1saW5lPSIxOCIgZGF0YS11aWQ9ImxuazEzIiBpZD0ibGlua19mYWlsdXJlX0dNTjExIj48cGF0aCBkPSJNNTE4LjAzNjksMTI0Ljk4MjcgQzUxOC4yMTg0LDEyNS4xMzcgNTE4LjQwMjcsMTI1LjI5MzcgNTE4LjU4OTUsMTI1LjQ1MjUgQzUxOC45NjMzLDEyNS43NzAyIDUxOS4zNDc1LDEyNi4wOTY4IDUxOS43NDE5LDEyNi40MzIxIEM1MjAuNTMwNiwxMjcuMTAyNiA1MjEuMzYsMTI3LjgwNzYgNTIyLjIyNzIsMTI4LjU0NDggQzUyOS4xNjUsMTM0LjQ0MjggNTM4LjUyNjMsMTQyLjQwMTkgNTQ4LjkwNSwxNTEuMjI2MyBDNTY5LjY2MjUsMTY4Ljg3NSA1OTQuNDksMTg5Ljk4NSA2MTIuMTQsMjA0Ljk5IiBmaWxsPSJub25lIiBpZD0iZmFpbHVyZS1HTU4xMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Nyw3OyIvPjwvZz48IS0tU1JDPVtLb3A5SUNyRExJWjhJU3BDdS04Z0lhcWtJU25CcHFiTEswZkFCSXhEQUw1dUVnelJJUTRRTUlBdUQzYXZqUlhPdXNkMzRhcWJYU0hZWE1BODA1MUxTYzlIWWU5SUdNOUhTTWZ5UGJ2OVYxN08zMHJyNG9Ecmc1OTNnMWdPOElQNkswYVpoYzkzMUxyVEVvMUJtS2hYTVNVNGZydHBrTWZITkVJTWM5YkpNZklneVJYZm5VRmNiTy1SenEycWZhNjR5TFlWYzlHQ2pKeURQWl9DQjdOZG5Cb3lfMTg1aTJPekZKc09FWUVrRDhYcHFhM0VVUmZhdXhFZnF1N0UwSmU4ZzNmTDhJY19mMkdfTG80XzNNT3g1em5IWm5sTkZQX0d6ZHBBbmlURGF2eGlkX2tpZnY3aFNORnh1LU85WnZrUjdwVGpVRHBPeXRKVHBjU3A5ZEVidmdLZVcwbTMwMDAwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h4 id="_7">安全な除算（エラーメッセージ付き）<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">safe_divide_result</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;安全な除算（エラーメッセージ付き）。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Division by zero&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">a</span> <span class="o">//</span> <span class="n">b</span><span class="p">)</span>

<span class="k">assert</span> <span class="n">safe_divide_result</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">Success</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">safe_divide_result</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Division by zero&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="73-tvresult">7.3 TV番組のパース（Result 版）<a class="headerlink" href="#73-tvresult" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_name_result</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;番組名を抽出する（エラーメッセージ付き）。&quot;&quot;&quot;</span>
    <span class="n">bracket_open</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bracket_open</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">raw_show</span><span class="p">[:</span><span class="n">bracket_open</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t extract name from &#39;</span><span class="si">{</span><span class="n">raw_show</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">extract_year_start_result</span><span class="p">(</span><span class="n">raw_show</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;開始年を抽出する（エラーメッセージ付き）。&quot;&quot;&quot;</span>
    <span class="n">bracket_open</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
    <span class="n">dash</span> <span class="o">=</span> <span class="n">raw_show</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bracket_open</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">dash</span> <span class="o">&gt;</span> <span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">year_str</span> <span class="o">=</span> <span class="n">raw_show</span><span class="p">[</span><span class="n">bracket_open</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">dash</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">parse_int_result</span><span class="p">(</span><span class="n">year_str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Can&#39;t extract start year from &#39;</span><span class="si">{</span><span class="n">raw_show</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="74">7.4 バリデーション<a class="headerlink" href="#74" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p>Result 型はバリデーションに最適です。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_age</span><span class="p">(</span><span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;年齢を検証する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Age cannot be negative&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Age cannot be greater than 150&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_email</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;メールアドレスを検証する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Email must contain &#39;@&#39;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;.com&quot;</span><span class="p">,</span> <span class="s2">&quot;.org&quot;</span><span class="p">,</span> <span class="s2">&quot;.net&quot;</span><span class="p">,</span> <span class="s2">&quot;.jp&quot;</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Email must have a valid domain&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_password</span><span class="p">(</span><span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;パスワードを検証する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Password must be at least 8 characters&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Password must contain at least one uppercase letter&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Password must contain at least one digit&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjE3M3B4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODE2cHg7aGVpZ2h0OjE3M3B4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDgxNiAxNzMiIHdpZHRoPSI4MTZweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMyIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJjbHVzdGVyXy4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE1NS41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijc5OCIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1My45OTkzIiB4PSIzMzQuMDAwMyIgeT0iMjYuOTk1MSI+JiMxMjQ5NjsmIzEyNTIyOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDcxOyYjMTI1MTk7JiMxMjUzMTsmIzEyNDgxOyYjMTI0NTU7JiMxMjU0MDsmIzEyNTMxOzwvdGV4dD48L2c+PCEtLWVudGl0eSB2MS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJ2MSIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfdjEiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzNC4xNzM4IiB4PSI4Ny45MSIgeT0iNDciLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTQuMTczOCIgeD0iOTcuOTEiIHk9IjYyLjk5NTEiPnZhbGlkYXRlX2FnZSgtNSk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgcjEtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0icjEiIGRhdGEtc291cmNlLWxpbmU9IjUiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iZW50aXR5X3IxIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyNTMuNTA4OCIgeD0iMjguMjUiIHk9IjEyOS4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIzMy41MDg4IiB4PSIzOC4yNSIgeT0iMTQ1LjI4NTEiPkZhaWx1cmUoJ0FnZSBjYW5ub3QgYmUgbmVnYXRpdmUnKTwvdGV4dD48L2c+PCEtLWVudGl0eSB2Mi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJ2MiIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfdjIiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE4Ni43MzU0IiB4PSIyOTYuNjMiIHk9IjQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY2LjczNTQiIHg9IjMwNi42MyIgeT0iNjIuOTk1MSI+dmFsaWRhdGVfZW1haWwoJ2ludmFsaWQnKTwvdGV4dD48L2c+PCEtLWVudGl0eSByMi0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyMiIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfcjIiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjIzOS43Mjc1IiB4PSIzMTcuMTQiIHk9IjEyOS4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIxOS43Mjc1IiB4PSIzMjcuMTQiIHk9IjE0NS4yODUxIj5GYWlsdXJlKCdFbWFpbCBtdXN0IGNvbnRhaW4gQCcpPC90ZXh0PjwvZz48IS0tZW50aXR5IHYzLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9InYzIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfdjMiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI3NS4zMTU0IiB4PSI1MTguMzQiIHk9IjQ3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjU1LjMxNTQiIHg9IjUyOC4zNCIgeT0iNjIuOTk1MSI+dmFsaWRhdGVfcGFzc3dvcmQoJ1NlY3VyZVBhc3MxMjMnKTwvdGV4dD48L2c+PCEtLWVudGl0eSByMy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJyMyIgZGF0YS1zb3VyY2UtbGluZT0iMTEiIGRhdGEtdWlkPSJlbnQwMDA4IiBpZD0iZW50aXR5X3IzIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIyMDEuNzQ3MSIgeD0iNTkyLjEzIiB5PSIxMjkuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODEuNzQ3MSIgeD0iNjAyLjEzIiB5PSIxNDUuMjg1MSI+U3VjY2VzcygnU2VjdXJlUGFzczEyMycpPC90ZXh0PjwvZz48IS0tbGluayB2MSB0byByMS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJ2MSIgZGF0YS1lbnRpdHktMj0icjEiIGRhdGEtc291cmNlLWxpbmU9IjEzIiBkYXRhLXVpZD0ibG5rOSIgaWQ9ImxpbmtfdjFfcjEiPjxwYXRoIGQ9Ik0xNTUsNjkuNjQgQzE1NSw4NS4wMyAxNTUsMTA3LjU1IDE1NSwxMjIuOTQiIGZpbGw9Im5vbmUiIGlkPSJ2MS10by1yMSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMTU1LDEyOC45NCwxNTksMTE5Ljk0LDE1NSwxMjMuOTQsMTUxLDExOS45NCwxNTUsMTI4Ljk0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHYyIHRvIHIyLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9InYyIiBkYXRhLWVudGl0eS0yPSJyMiIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJsbmsxMCIgaWQ9ImxpbmtfdjJfcjIiPjxwYXRoIGQ9Ik0zOTYuMTQsNjkuNjQgQzQwNS4xNSw4NS4wMyA0MTguODIxMSwxMDguMzcwNiA0MjcuODIxMSwxMjMuNzYwNiIgZmlsbD0ibm9uZSIgaWQ9InYyLXRvLXIyIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSI0MzAuODUsMTI4Ljk0LDQyOS43NTk2LDExOS4xNTE3LDQyOC4zMjU5LDEyNC42MjM5LDQyMi44NTM4LDEyMy4xOTAyLDQzMC44NSwxMjguOTQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgdjMgdG8gcjMtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0idjMiIGRhdGEtZW50aXR5LTI9InIzIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazExIiBpZD0ibGlua192M19yMyI+PHBhdGggZD0iTTY2MC44NCw2OS42NCBDNjY3LjkzLDg1LjAzIDY3OC41NTk1LDEwOC4xMDA1IDY4NS42NDk1LDEyMy40OTA1IiBmaWxsPSJub25lIiBpZD0idjMtdG8tcjMiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9IjY4OC4xNiwxMjguOTQsNjg4LjAyNzIsMTE5LjA5Miw2ODYuMDY3OSwxMjQuMzk4Nyw2ODAuNzYxMiwxMjIuNDM5NCw2ODguMTYsMTI4Ljk0IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W1JPLW5KaUNtNDhQdEZ5TUg5TTc4NDVraTVHbmJIa2UzZUNDdmZQT0lmeDhUQ28wNndlNkxqd1o0c2U2NWp4YU5RVEFhSXM3eHgtd3hKdFN0T0tpVG1RdjVPdUxtZjBGUWZZTjhFN3JuLWtScW9VY056cC1TM2ZvRWQzdnVWdld3d1BaMWN6M2VRaVdZamdSNkdDX09LNTdVdE1RMDdjQXJKMV9IajhFWjhkemUyM0hRc21UdThSM0tPMzJIeVhidGJSWXNLSlRrNWhjbnZ5eDJITmNqTkt5T1Q4Q0ZlN2lSblpfV19ZQUxWd0d4ekZ3clR0TUhScVlGLXF6Wk5LYnJpUWs1dG1uUWFfVl9LcXU5NElpZW96THFUZkhwYVlBZ0VJZG5WVzgwXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="75-adt">7.5 代数的データ型（ADT）<a class="headerlink" href="#75-adt" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p>Python では <code>Enum</code> と <code>dataclass</code> を組み合わせて代数的データ型を表現します。</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">auto</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MusicGenre</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;音楽ジャンルを表す列挙型。&quot;&quot;&quot;</span>
    <span class="n">HEAVY_METAL</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">POP</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">HARD_ROCK</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">JAZZ</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
    <span class="n">CLASSICAL</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Location</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;場所を表す列挙型。&quot;&quot;&quot;</span>
    <span class="n">US</span> <span class="o">=</span> <span class="s2">&quot;U.S.&quot;</span>
    <span class="n">UK</span> <span class="o">=</span> <span class="s2">&quot;U.K.&quot;</span>
    <span class="n">JAPAN</span> <span class="o">=</span> <span class="s2">&quot;Japan&quot;</span>
    <span class="n">GERMANY</span> <span class="o">=</span> <span class="s2">&quot;Germany&quot;</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">PeriodInYears</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;年の期間を表すデータクラス。&quot;&quot;&quot;</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span>  <span class="c1"># None はまだアクティブなことを示す</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Artist</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;アーティストを表すデータクラス。&quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">genre</span><span class="p">:</span> <span class="n">MusicGenre</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n">Location</span>
    <span class="n">years_active</span><span class="p">:</span> <span class="n">PeriodInYears</span>
</code></pre></div>
<h4 id="_8">アーティストの活動判定<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">was_artist_active</span><span class="p">(</span><span class="n">artist</span><span class="p">:</span> <span class="n">Artist</span><span class="p">,</span> <span class="n">year_start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">year_end</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;アーティストが指定期間中にアクティブだったかを判定する。&quot;&quot;&quot;</span>
    <span class="n">period</span> <span class="o">=</span> <span class="n">artist</span><span class="o">.</span><span class="n">years_active</span>
    <span class="k">if</span> <span class="n">period</span><span class="o">.</span><span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># まだアクティブ</span>
        <span class="k">return</span> <span class="n">period</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">year_end</span>
    <span class="c1"># 活動終了済み</span>
    <span class="k">return</span> <span class="n">period</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">year_end</span> <span class="ow">and</span> <span class="n">period</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">year_start</span>

<span class="c1"># 使用例</span>
<span class="n">metallica</span> <span class="o">=</span> <span class="n">Artist</span><span class="p">(</span><span class="s2">&quot;Metallica&quot;</span><span class="p">,</span> <span class="n">MusicGenre</span><span class="o">.</span><span class="n">HEAVY_METAL</span><span class="p">,</span> <span class="n">Location</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="n">PeriodInYears</span><span class="p">(</span><span class="mi">1981</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="k">assert</span> <span class="n">was_artist_active</span><span class="p">(</span><span class="n">metallica</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2020</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="k">assert</span> <span class="n">was_artist_active</span><span class="p">(</span><span class="n">metallica</span><span class="p">,</span> <span class="mi">1970</span><span class="p">,</span> <span class="mi">1975</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span>
</code></pre></div>
<h3 id="76">7.6 検索条件のモデリング<a class="headerlink" href="#76" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p>Python 3.10+ のパターンマッチングを使って、検索条件を表現します。</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SearchByGenre</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ジャンルで検索する条件。&quot;&quot;&quot;</span>
    <span class="n">genres</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">MusicGenre</span><span class="p">]</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SearchByOrigin</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;出身地で検索する条件。&quot;&quot;&quot;</span>
    <span class="n">locations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Location</span><span class="p">]</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SearchByActiveYears</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;活動期間で検索する条件。&quot;&quot;&quot;</span>
    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">end</span><span class="p">:</span> <span class="nb">int</span>

<span class="c1"># Union 型で検索条件を定義</span>
<span class="n">SearchCondition</span> <span class="o">=</span> <span class="n">SearchByGenre</span> <span class="o">|</span> <span class="n">SearchByOrigin</span> <span class="o">|</span> <span class="n">SearchByActiveYears</span>
</code></pre></div>
<h4 id="_9">パターンマッチングによる条件判定<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches_condition</span><span class="p">(</span><span class="n">artist</span><span class="p">:</span> <span class="n">Artist</span><span class="p">,</span> <span class="n">condition</span><span class="p">:</span> <span class="n">SearchCondition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;アーティストが検索条件に一致するかを判定する。&quot;&quot;&quot;</span>
    <span class="k">match</span> <span class="n">condition</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">SearchByGenre</span><span class="p">(</span><span class="n">genres</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">artist</span><span class="o">.</span><span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span>
        <span class="k">case</span> <span class="n">SearchByOrigin</span><span class="p">(</span><span class="n">locations</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">artist</span><span class="o">.</span><span class="n">origin</span> <span class="ow">in</span> <span class="n">locations</span>
        <span class="k">case</span> <span class="n">SearchByActiveYears</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">was_artist_active</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</code></pre></div>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjI5OHB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6ODU3cHg7aGVpZ2h0OjI5OHB4O2JhY2tncm91bmQ6I0ZGRkZGRjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDg1NyAyOTgiIHdpZHRoPSI4NTdweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI4MC41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjgzOSIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSIzNjguNTAwMyIgeT0iMjYuOTk1MSI+JiMxMjQ5NzsmIzEyNDc5OyYjMTI1NDA7JiMxMjUzMTsmIzEyNTEwOyYjMTI0ODM7JiMxMjQ4MTsmIzEyNTMxOyYjMTI0NjQ7PC90ZXh0PjwvZz48IS0tY2x1c3RlciBtYXRjaC0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0ibWF0Y2giIGRhdGEtc291cmNlLWxpbmU9IjYiIGRhdGEtdWlkPSJlbnQwMDA0IiBpZD0iY2x1c3Rlcl9tYXRjaCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSI4OS4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNzc1IiB4PSI0NCIgeT0iOTMuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI3LjY0NzUiIHg9IjM2Ny42NzYzIiB5PSIxMDguMjg1MSI+bWF0Y2ggY29uZGl0aW9uPC90ZXh0PjwvZz48IS0tZW50aXR5IGNvbmQtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iY29uZCIgZGF0YS1zb3VyY2UtbGluZT0iNCIgZGF0YS11aWQ9ImVudDAwMDMiIGlkPSJlbnRpdHlfY29uZCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODQuNzI5NSIgeD0iNzUwLjY0IiB5PSI0NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY0LjcyOTUiIHg9Ijc2MC42NCIgeT0iNjIuOTk1MSI+Y29uZGl0aW9uPC90ZXh0PjwvZz48IS0tZW50aXR5IGFydGlzdC5nZW5yZSBpbiBnZW5yZXMtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iYXJ0aXN0LmdlbnJlIGluIGdlbnJlcyIgZGF0YS1zb3VyY2UtbGluZT0iMTMiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X2FydGlzdC5nZW5yZSBpbiBnZW5yZXMiPjxlbGxpcHNlIGN4PSIxNjIiIGN5PSIyNDcuNTkiIGZpbGw9IiNGRkZGRkYiIHJ4PSI4IiByeT0iOCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE1MS4zODg3IiB4PSI4Ni4zMDU3IiB5PSIyNzcuNTg1MSI+YXJ0aXN0LmdlbnJlIGluIGdlbnJlczwvdGV4dD48L2c+PCEtLWVudGl0eSBhcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJhcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucyIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJlbnQwMDExIiBpZD0iZW50aXR5X2FydGlzdC5vcmlnaW4gaW4gbG9jYXRpb25zIj48ZWxsaXBzZSBjeD0iMzkyIiBjeT0iMjQ3LjU5IiBmaWxsPSIjRkZGRkZGIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNjUuMzEzNSIgeD0iMzA5LjM0MzMiIHk9IjI3Ny41ODUxIj5hcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9uczwvdGV4dD48L2c+PCEtLWVudGl0eSB3YXNfYXJ0aXN0X2FjdGl2ZSguLi4pLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Indhc19hcnRpc3RfYWN0aXZlLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE1IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV93YXNfYXJ0aXN0X2FjdGl2ZS4uLi4uIj48ZWxsaXBzZSBjeD0iNjUyIiBjeT0iMjQ3LjU5IiBmaWxsPSIjRkZGRkZGIiByeD0iOCIgcnk9IjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNDQuNjQ4NCIgeD0iNTc5LjY3NTgiIHk9IjI3Ny41ODUxIj53YXNfYXJ0aXN0X2FjdGl2ZSguLi4pPC90ZXh0PjwvZz48IS0tZW50aXR5IGctLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iZyIgZGF0YS1zb3VyY2UtbGluZT0iNyIgZGF0YS11aWQ9ImVudDAwMDUiIGlkPSJlbnRpdHlfZyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTg3Ljk1OSIgeD0iNjguMDIiIHk9IjEzNi4yOSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Ny45NTkiIHg9Ijc4LjAyIiB5PSIxNTIuMjg1MSI+U2VhcmNoQnlHZW5yZShnZW5yZXMpPC90ZXh0PjwvZz48IS0tZW50aXR5IG8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ibyIgZGF0YS1zb3VyY2UtbGluZT0iOCIgZGF0YS11aWQ9ImVudDAwMDYiIGlkPSJlbnRpdHlfbyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjAyLjM3NiIgeD0iMjkwLjgxIiB5PSIxMzYuMjkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxODIuMzc2IiB4PSIzMDAuODEiIHk9IjE1Mi4yODUxIj5TZWFyY2hCeU9yaWdpbihsb2NhdGlvbnMpPC90ZXh0PjwvZz48IS0tZW50aXR5IHktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0ieSIgZGF0YS1zb3VyY2UtbGluZT0iOSIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfeSI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMjQ3LjQ0NTMiIHg9IjUyOC4yOCIgeT0iMTM2LjI5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjI3LjQ0NTMiIHg9IjUzOC4yOCIgeT0iMTUyLjI4NTEiPlNlYXJjaEJ5QWN0aXZlWWVhcnMoc3RhcnQsIGVuZCk8L3RleHQ+PC9nPjwhLS1saW5rIGNvbmQgdG8gbWF0Y2gtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iY29uZCIgZGF0YS1lbnRpdHktMj0ibWF0Y2giIGRhdGEtc291cmNlLWxpbmU9IjEyIiBkYXRhLXVpZD0ibG5rOCIgaWQ9ImxpbmtfY29uZF9tYXRjaCI+PHBhdGggZD0iTTc5NS4xNCw2OS41IEM3OTYuMjkyNSw3NS4xIDc5Ny44MTY5LDgyLjUwMDYgNzk5LjQ2NTUsOTAuNTAxMiBDNzk5LjU2ODUsOTEuMDAxMyA3OTkuNjcyLDkxLjUwMzcgNzk5Ljc3Niw5Mi4wMDgxIEM3OTkuODI3OSw5Mi4yNjAzIDc5OS44OCw5Mi41MTMxIDc5OS45MzIyLDkyLjc2NjMgQzc5OS45NTgzLDkyLjg5MjkgNzk4Ljc3MzQsODcuMTQzMSA3OTguNzk5Niw4Ny4yNjk5IiBmaWxsPSJub25lIiBpZD0iY29uZC10by1tYXRjaCIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iODAwLjAxMDUsOTMuMTQ2NCw4MDIuMTExNyw4My41MjQzLDc5OS4wMDE0LDg4LjI0OTMsNzk0LjI3NjQsODUuMTM5LDgwMC4wMTA1LDkzLjE0NjQiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgZyB0byBhcnRpc3QuZ2VucmUgaW4gZ2VucmVzLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImciIGRhdGEtZW50aXR5LTI9ImFydGlzdC5nZW5yZSBpbiBnZW5yZXMiIGRhdGEtc291cmNlLWxpbmU9IjEzIiBkYXRhLXVpZD0ibG5rMTAiIGlkPSJsaW5rX2dfYXJ0aXN0LmdlbnJlIGluIGdlbnJlcyI+PHBhdGggZD0iTTE2MiwxNTguOTUgQzE2MiwxNzguNzMgMTYyLDIxNS4wOSAxNjIsMjMyLjY4IiBmaWxsPSJub25lIiBpZD0iZy10by1hcnRpc3QuZ2VucmUgaW4gZ2VucmVzIiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxNjIsMjM4LjY4LDE2NiwyMjkuNjgsMTYyLDIzMy42OCwxNTgsMjI5LjY4LDE2MiwyMzguNjgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLWxpbmsgbyB0byBhcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucy0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJvIiBkYXRhLWVudGl0eS0yPSJhcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucyIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJsbmsxMiIgaWQ9Imxpbmtfb19hcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucyI+PHBhdGggZD0iTTM5MiwxNTguOTUgQzM5MiwxNzguNzMgMzkyLDIxNS4wOSAzOTIsMjMyLjY4IiBmaWxsPSJub25lIiBpZD0iby10by1hcnRpc3Qub3JpZ2luIGluIGxvY2F0aW9ucyIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iMzkyLDIzOC42OCwzOTYsMjI5LjY4LDM5MiwyMzMuNjgsMzg4LDIyOS42OCwzOTIsMjM4LjY4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1saW5rIHkgdG8gd2FzX2FydGlzdF9hY3RpdmUoLi4uKS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJ5IiBkYXRhLWVudGl0eS0yPSJ3YXNfYXJ0aXN0X2FjdGl2ZS4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIxNSIgZGF0YS11aWQ9ImxuazE0IiBpZD0ibGlua195X3dhc19hcnRpc3RfYWN0aXZlLi4uLi4iPjxwYXRoIGQ9Ik02NTIsMTU4Ljk1IEM2NTIsMTc4LjczIDY1MiwyMTUuMDkgNjUyLDIzMi42OCIgZmlsbD0ibm9uZSIgaWQ9InktdG8td2FzX2FydGlzdF9hY3RpdmUoLi4uKSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9IiMwMDAwMDAiIHBvaW50cz0iNjUyLDIzOC42OCw2NTYsMjI5LjY4LDY1MiwyMzMuNjgsNjQ4LDIyOS42OCw2NTIsMjM4LjY4IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7Ii8+PC9nPjwhLS1TUkM9W05PdXpRV0NuNDRSeEVTTE9ySGhpRks4V1JiQWNJOU5BM0RmMUFyWEJHSDhuWXQ1WHdtSS1XQ3pXSTZsbU9OSUhNOThKTTNWM18zby1VUkZHeXVSblFvMWowMXBCRzRPRFoyQjVLcGhVS2hvYy05RllFU01PdVk3dG51bDA3S1hvN0dmZkpRVTNqYU9XVVNwSjk2RDNHVk91WFVoa0ItMjNvU2ItRFJ3blNUb2VORnN5U0VnOVU3VFFRVENDTGJCRVViM3NZTmdMR05fcHZ0dG9aR19hbVdCUFQ5S1RPRy1HUE4ydlZBYVVlNGVseGczc2VJdF9LSGtpOFdCaXY2b0JHaHhfTW1XT0F4OGJsd3hPY2VmM3F4UmpOQzMtNW0wMF0tLT48L2c+PC9zdmc+" class="uml" alt="uml diagram" title="" /></p>
<h4 id="_10">検索の実行<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">search_artists</span><span class="p">(</span>
    <span class="n">artists</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Artist</span><span class="p">],</span>
    <span class="n">required_conditions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SearchCondition</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Artist</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;条件を全て満たすアーティストを検索する。&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">artist</span>
        <span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">artists</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">matches_condition</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">cond</span><span class="p">)</span> <span class="k">for</span> <span class="n">cond</span> <span class="ow">in</span> <span class="n">required_conditions</span><span class="p">)</span>
    <span class="p">]</span>

<span class="c1"># 使用例</span>
<span class="n">metallica</span> <span class="o">=</span> <span class="n">Artist</span><span class="p">(</span><span class="s2">&quot;Metallica&quot;</span><span class="p">,</span> <span class="n">MusicGenre</span><span class="o">.</span><span class="n">HEAVY_METAL</span><span class="p">,</span> <span class="n">Location</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="n">PeriodInYears</span><span class="p">(</span><span class="mi">1981</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="n">queen</span> <span class="o">=</span> <span class="n">Artist</span><span class="p">(</span><span class="s2">&quot;Queen&quot;</span><span class="p">,</span> <span class="n">MusicGenre</span><span class="o">.</span><span class="n">HARD_ROCK</span><span class="p">,</span> <span class="n">Location</span><span class="o">.</span><span class="n">UK</span><span class="p">,</span> <span class="n">PeriodInYears</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span> <span class="mi">1995</span><span class="p">))</span>
<span class="n">artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">metallica</span><span class="p">,</span> <span class="n">queen</span><span class="p">]</span>

<span class="c1"># ジャンルで検索</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">search_artists</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="p">[</span><span class="n">SearchByGenre</span><span class="p">([</span><span class="n">MusicGenre</span><span class="o">.</span><span class="n">HEAVY_METAL</span><span class="p">])])</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Metallica&quot;</span>

<span class="c1"># 複数条件で検索</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">search_artists</span><span class="p">(</span><span class="n">artists</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">SearchByGenre</span><span class="p">([</span><span class="n">MusicGenre</span><span class="o">.</span><span class="n">HARD_ROCK</span><span class="p">]),</span>
    <span class="n">SearchByOrigin</span><span class="p">([</span><span class="n">Location</span><span class="o">.</span><span class="n">UK</span><span class="p">])</span>
<span class="p">])</span>
<span class="k">assert</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Queen&quot;</span>
</code></pre></div>
<h3 id="77-result">7.7 Result の合成<a class="headerlink" href="#77-result" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p>複数のバリデーションを組み合わせてユーザーを作成します。</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ユーザーを表すデータクラス。&quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_user</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="n">User</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ユーザーを作成する（バリデーション付き）。&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">validate_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">valid_email</span><span class="p">:</span> <span class="n">validate_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">valid_age</span><span class="p">:</span> <span class="n">User</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">valid_email</span><span class="p">,</span> <span class="n">valid_age</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>

<span class="c1"># 使用例</span>
<span class="k">assert</span> <span class="n">create_user</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;alice@example.com&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="o">==</span> <span class="n">Success</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="s2">&quot;alice@example.com&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">create_user</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="s2">&quot;invalid&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Failure</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;Email must contain &#39;@&#39;&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">failure</span><span class="p">()</span>
</code></pre></div>
<h3 id="78">7.8 型付きエラー<a class="headerlink" href="#78" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<p>文字列の代わりに Enum を使うと、より型安全なエラー処理ができます。</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;バリデーションエラーの種類。&quot;&quot;&quot;</span>
    <span class="n">EMPTY_NAME</span> <span class="o">=</span> <span class="s2">&quot;Name cannot be empty&quot;</span>
    <span class="n">INVALID_EMAIL</span> <span class="o">=</span> <span class="s2">&quot;Invalid email format&quot;</span>
    <span class="n">AGE_TOO_YOUNG</span> <span class="o">=</span> <span class="s2">&quot;Age must be at least 18&quot;</span>
    <span class="n">AGE_TOO_OLD</span> <span class="o">=</span> <span class="s2">&quot;Age cannot exceed 120&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_name_typed</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;名前を検証する（型付きエラー）。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="n">ValidationError</span><span class="o">.</span><span class="n">EMPTY_NAME</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_age_typed</span><span class="p">(</span><span class="n">age</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;年齢を検証する（型付きエラー）。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="n">ValidationError</span><span class="o">.</span><span class="n">AGE_TOO_YOUNG</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">120</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="n">ValidationError</span><span class="o">.</span><span class="n">AGE_TOO_OLD</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
</code></pre></div>
<h3 id="79-result">7.9 Result のユーティリティ<a class="headerlink" href="#79-result" title="Permanent link">&para;</a></h3>
<p><strong>ソースファイル</strong>: <code>app/python/src/grokking_fp/ch07_either.py</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">returns.maybe</span><span class="w"> </span><span class="kn">import</span> <span class="n">Maybe</span><span class="p">,</span> <span class="n">Some</span><span class="p">,</span> <span class="n">Nothing</span>

<span class="k">def</span><span class="w"> </span><span class="nf">result_to_maybe</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Result</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result を Maybe に変換する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Success</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">Nothing</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_or_else</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Result</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">default</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Result から値を取得するか、デフォルト値を返す。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Success</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">unwrap</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">default</span>

<span class="k">def</span><span class="w"> </span><span class="nf">map_error</span><span class="p">(</span><span class="n">result</span><span class="p">:</span> <span class="n">Result</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">f</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;エラーを変換する。&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">Failure</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">failure</span><span class="p">()))</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sequence_results</span><span class="p">(</span><span class="n">results</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Result</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;全ての Result が Success なら、値のリストを返す。&quot;&quot;&quot;</span>
    <span class="n">values</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">Success</span><span class="p">):</span>
            <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">unwrap</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># 使用例</span>
<span class="k">assert</span> <span class="n">get_or_else</span><span class="p">(</span><span class="n">Success</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">42</span>
<span class="k">assert</span> <span class="n">get_or_else</span><span class="p">(</span><span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

<span class="k">assert</span> <span class="n">sequence_results</span><span class="p">([</span><span class="n">Success</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Success</span><span class="p">(</span><span class="mi">2</span><span class="p">)])</span> <span class="o">==</span> <span class="n">Success</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="k">assert</span> <span class="n">sequence_results</span><span class="p">([</span><span class="n">Success</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)])</span> <span class="o">==</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="_11">まとめ<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<h3 id="part-iii_1">Part III で学んだこと<a class="headerlink" href="#part-iii_1" title="Permanent link">&para;</a></h3>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkRFU0NSSVBUSU9OIiBoZWlnaHQ9IjM2MXB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTAwMHB4O2hlaWdodDozNjFweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDAwIDM2MSIgd2lkdGg9IjEwMDBweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbHVzdGVyIFBhcnQgSUlJOiA/Pz8/Pz8/Pz8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iUGFydCBJSUkuIC4uLi4uLi4uLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSIzIiBkYXRhLXVpZD0iZW50MDAwMiIgaWQ9ImNsdXN0ZXJfUGFydCBJSUkuIC4uLi4uLi4uLi4uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjM0My44OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9Ijk4MiIgeD0iMTIiIHk9IjEyIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjMwMi4yNzczIiB4PSIzNTEuODYxNCIgeT0iMjYuOTk1MSI+UGFydCBJSUk6ICYjMTI0NTY7JiMxMjUyMTsmIzEyNTQwOyYjMTI0OTU7JiMxMjUzMTsmIzEyNDg5OyYjMTI1MjI7JiMxMjUzMTsmIzEyNDY0OyYjMTIzOTI7JiMyMjQxMTsmIzEyMzk1OyYjMTI0MjQ7JiMxMjQyNzsmIzIzNDMzOyYjMjA4NDA7JiMyNDYxNTs8L3RleHQ+PC9nPjwhLS1jbHVzdGVyIGNoNi0tPjxnIGNsYXNzPSJjbHVzdGVyIiBkYXRhLWVudGl0eT0iY2g2IiBkYXRhLXNvdXJjZS1saW5lPSI0IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImNsdXN0ZXJfY2g2Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE3OC41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQwMyIgeD0iNDQiIHk9IjYzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjM3Ljc0MTEiIHg9IjIyNi42Mjk1IiB5PSI3Ny45OTUxIj4mIzMxNTMyOzYmIzMxNDU2OzwvdGV4dD48L2c+PCEtLWNsdXN0ZXIgY2g3LS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtZW50aXR5PSJjaDciIGRhdGEtc291cmNlLWxpbmU9IjExIiBkYXRhLXVpZD0iZW50MDAwOCIgaWQ9ImNsdXN0ZXJfY2g3Ij48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjE3MS41OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjQ3NSIgeD0iNDg3IiB5PSIxNTIuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzNy43NDExIiB4PSI3MDUuNjI5NSIgeT0iMTY3LjI5NTEiPiYjMzE1MzI7NyYjMzE0NTY7PC90ZXh0PjwvZz48IS0tZW50aXR5IE1heWJlID8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iTWF5YmUgLiIgZGF0YS1zb3VyY2UtbGluZT0iNSIgZGF0YS11aWQ9ImVudDAwMDQiIGlkPSJlbnRpdHlfTWF5YmUgLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iODQuODkzNSIgeD0iOTQuNTUiIHk9IjEwNiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY0Ljg5MzUiIHg9IjEwNC41NSIgeT0iMTIxLjk5NTEiPk1heWJlICYjMjI0MTE7PC90ZXh0PjwvZz48IS0tZW50aXR5IFNvbWUgLyBOb3RoaW5nLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlNvbWUgLiBOb3RoaW5nIiBkYXRhLXNvdXJjZS1saW5lPSI2IiBkYXRhLXVpZD0iZW50MDAwNSIgaWQ9ImVudGl0eV9Tb21lIC4gTm90aGluZyI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTI4LjM3MDEiIHg9IjIxNC44MSIgeT0iMTA2Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTA4LjM3MDEiIHg9IjIyNC44MSIgeT0iMTIxLjk5NTEiPlNvbWUgLyBOb3RoaW5nPC90ZXh0PjwvZz48IS0tZW50aXR5IGJpbmQgLyBtYXAgLyBsYXNoLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9ImJpbmQgLiBtYXAgLiBsYXNoIiBkYXRhLXNvdXJjZS1saW5lPSI3IiBkYXRhLXVpZD0iZW50MDAwNiIgaWQ9ImVudGl0eV9iaW5kIC4gbWFwIC4gbGFzaCI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTM3LjUwOTgiIHg9IjY4LjI1IiB5PSIxOTUuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExNy41MDk4IiB4PSI3OC4yNSIgeT0iMjExLjI5NTEiPmJpbmQgLyBtYXAgLyBsYXNoPC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4uLi4uIiBkYXRhLXNvdXJjZS1saW5lPSI4IiBkYXRhLXVpZD0iZW50MDAwNyIgaWQ9ImVudGl0eV8uLi4uLi4uLi4uLiI+PHJlY3QgZmlsbD0iI0ZGRkZGRiIgaGVpZ2h0PSIyMi4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMTczLjk5OTMiIHg9IjI0MSIgeT0iMTk1LjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iMjUxIiB5PSIyMTEuMjk1MSI+JiMxMjQ1NjsmIzEyNTIxOyYjMTI1NDA7JiMxMjQ5NTsmIzEyNTMxOyYjMTI0ODk7JiMxMjUyMjsmIzEyNTMxOyYjMTI0NjQ7JiMyNTEyNjsmIzMwMDUzOzwvdGV4dD48L2c+PCEtLWVudGl0eSBSZXN1bHQgPy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJSZXN1bHQgLiIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGRhdGEtdWlkPSJlbnQwMDA5IiBpZD0iZW50aXR5X1Jlc3VsdCAuIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI4Mi4zMzY5IiB4PSI1MTAuODMiIHk9IjE5NS4zIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IlZlcmRhbmEiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjIuMzM2OSIgeD0iNTIwLjgzIiB5PSIyMTEuMjk1MSI+UmVzdWx0ICYjMjI0MTE7PC90ZXh0PjwvZz48IS0tZW50aXR5IFN1Y2Nlc3MgLyBGYWlsdXJlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IlN1Y2Nlc3MgLiBGYWlsdXJlIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImVudDAwMTAiIGlkPSJlbnRpdHlfU3VjY2VzcyAuIEZhaWx1cmUiPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjEzNy42MjYiIHg9IjYyOC4xOSIgeT0iMTk1LjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iVmVyZGFuYSIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTcuNjI2IiB4PSI2MzguMTkiIHk9IjIxMS4yOTUxIj5TdWNjZXNzIC8gRmFpbHVyZTwvdGV4dD48L2c+PCEtLWVudGl0eSA/Pz8/Pz8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9Ii4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE0IiBkYXRhLXVpZD0iZW50MDAxMSIgaWQ9ImVudGl0eV8uLi4uLi4uIj48cmVjdCBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjIyLjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSIxMTcuOTk5NiIgeD0iODAxIiB5PSIxOTUuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjgxMSIgeT0iMjExLjI5NTEiPiYjMTI0OTY7JiMxMjUyMjsmIzEyNDg3OyYjMTI1NDA7JiMxMjQ3MTsmIzEyNTE5OyYjMTI1MzE7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iLi4uLi4uLiIgZGF0YS1zb3VyY2UtbGluZT0iMTUiIGRhdGEtdWlkPSJlbnQwMDEyIiBpZD0iZW50aXR5Xy4uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjExNy45OTk2IiB4PSI1MTEiIHk9IjI3Ny41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk3Ljk5OTYiIHg9IjUyMSIgeT0iMjkzLjU4NTEiPiYjMjAxOTU7JiMyNTk2ODsmIzMwMzQwOyYjMTI0ODc7JiMxMjU0MDsmIzEyNDc5OyYjMjI0MTE7PC90ZXh0PjwvZz48IS0tZW50aXR5ID8/Pz8/Pz8/Py0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSIuLi4uLi4uLi4iIGRhdGEtc291cmNlLWxpbmU9IjE2IiBkYXRhLXVpZD0iZW50MDAxMyIgaWQ9ImVudGl0eV8uLi4uLi4uLi4iPjxyZWN0IGZpbGw9IiNGRkZGRkYiIGhlaWdodD0iMjIuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjE0NS45OTk1IiB4PSI2NjQiIHk9IjI3Ny41OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJWZXJkYW5hIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNS45OTk1IiB4PSI2NzQiIHk9IjI5My41ODUxIj4mIzEyNDk3OyYjMTI0Nzk7JiMxMjU0MDsmIzEyNTMxOyYjMTI1MTA7JiMxMjQ4MzsmIzEyNDgxOyYjMTI1MzE7JiMxMjQ2NDs8L3RleHQ+PC9nPjwhLS1saW5rIGNoNiB0byBjaDctLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iY2g2IiBkYXRhLWVudGl0eS0yPSJjaDciIGRhdGEtc291cmNlLWxpbmU9IjIwIiBkYXRhLXVpZD0ibG5rMTQiIGlkPSJsaW5rX2NoNl9jaDciPjxwYXRoIGQ9Ik00NDcuMTMzNywxMTguMTc0MyBDNDQ3LjY2MDksMTE4LjE3NjIgNDQ4LjIxMjMsMTE4LjE3ODIgNDQ4Ljc4NzQsMTE4LjE4MDQgQzQ0OS45Mzc3LDExOC4xODQ4IDQ1MS4xODMsMTE4LjE4OTcgNDUyLjUxOTksMTE4LjE5NTIgQzQ1NS4xOTM2LDExOC4yMDYzIDQ1OC4yMzM0LDExOC4yMTk4IDQ2MS42MTE5LDExOC4yMzYzIEM0NzUuMTI1NiwxMTguMzAyMSA0OTQuMDU2MywxMTguNDE0NiA1MTYuNjM1LDExOC42MDIzIEM1NjEuNzkyNSwxMTguOTc3OCA2MjEuNTQyNSwxMTkuNjU0NCA2ODEuNzM1LDEyMC44NjEyIEM4MDIuMTIsMTIzLjI3NSA5MjQuMjc1LDEyNy44MSA5MzUsMTM2LjMgQzkzOC4wMjYzLDEzOC42OTUgOTQwLjU5ODEsMTQxLjUyMzkgOTQyLjc4MTMsMTQ0LjY0NjUgQzk0My44NzI5LDE0Ni4yMDc4IDk0NC44NjczLDE0Ny44NDI1IDk0NS43NzI4LDE0OS41MzMxIEM5NDYuMjI1NSwxNTAuMzc4NSA5NDQuMTA0NSwxNDUuODA3MyA5NDQuNTEzOCwxNDYuNjc4NCIgZmlsbD0ibm9uZSIgaWQ9ImNoNi10by1jaDciIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMDAwMDAwIiBwb2ludHM9Ijk0Ny4wNjUzLDE1Mi4xMDg4LDk0Ni44NTgzLDE0Mi4yNjIxLDk0NC45MzksMTQ3LjU4MzQsOTM5LjYxNzcsMTQ1LjY2NDEsOTQ3LjA2NTMsMTUyLjEwODgiIHN0eWxlPSJzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1bVlQwbkl5RDA2MFJXRlJfWWxCc3VqVTNXQTZIR0g3XzF6TmVxV01qUVNmVDFIMzN0QVJQcUs4U2szYUtHUlJJYjUxbVM1Rm1uZHFkLVhkVkxyRWhXNGlCeG1sUy10OE9FSDRVR2RjSFh2N2NudTlmNVJJYTh0TVVuOWh4bFJuNHE2UzhabVhsMjlTOHBtVzNYb1ZzTzFRUFBGWHZZRWFOSkhwRkN2dUZ5RjJqRTl2R1NoenlnUHhEd0VSc2JYMmQyV3hlakVPalJYRXdvZXdPV3pXQnozV3d4cmg5OXpoZXcyQURzYkpSM2c2Tkoza2xQaHNHZ2c4Zl9QNE5fZUhwVEstXzQtbURmXzQwUUF5WTFLOGRLbG9HOXZxOGZFeFozR2ZkNE9oSzlMeWtIMnBUaE5YMGNUaDBnRnJ4bFlqNllsM2NoLWxVcmFtWk5EYlhnQk5NQzAwWmZiek92aFRJekpRc3N4TVlWXS0tPjwvZz48L3N2Zz4=" class="uml" alt="uml diagram" title="" /></p>
<h3 id="maybe-vs-result">Maybe vs Result<a class="headerlink" href="#maybe-vs-result" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>特徴</th>
<th>Maybe</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>成功時</td>
<td><code>Some(値)</code></td>
<td><code>Success(値)</code></td>
</tr>
<tr>
<td>失敗時</td>
<td><code>Nothing</code></td>
<td><code>Failure(エラー)</code></td>
</tr>
<tr>
<td>エラー情報</td>
<td>なし</td>
<td>あり</td>
</tr>
<tr>
<td>用途</td>
<td>値がない可能性</td>
<td>失敗理由が必要</td>
</tr>
</tbody>
</table>
<h3 id="_12">キーポイント<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>概念</th>
<th>Python での実現方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>Maybe 型</td>
<td><code>returns.maybe.Maybe</code>, <code>Some</code>, <code>Nothing</code></td>
</tr>
<tr>
<td>Result 型</td>
<td><code>returns.result.Result</code>, <code>Success</code>, <code>Failure</code></td>
</tr>
<tr>
<td>合成</td>
<td><code>bind</code>, <code>map</code>, <code>lash</code></td>
</tr>
<tr>
<td>ADT</td>
<td><code>Enum</code>, <code>dataclass</code>, Union 型</td>
</tr>
<tr>
<td>パターンマッチング</td>
<td><code>match</code>/<code>case</code> 文</td>
</tr>
</tbody>
</table>
<h3 id="_13">重要な法則<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>例外を避ける</strong>: 型で失敗を表現する</li>
<li><strong>合成可能性</strong>: <code>bind</code> と <code>map</code> でチェーン</li>
<li><strong>早期リターン</strong>: 最初の失敗で処理を停止</li>
<li><strong>型による安全性</strong>: コンパイル時にエラー処理を強制</li>
</ol>
<h3 id="python">Python 特有のポイント<a class="headerlink" href="#python" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>returns</code> ライブラリ</strong>: <code>Maybe</code>, <code>Result</code> を提供</li>
<li><strong><code>lash</code> メソッド</strong>: <code>orElse</code> に相当（Nothing/Failure 時の代替）</li>
<li><strong><code>bind</code> メソッド</strong>: <code>flatMap</code> に相当</li>
<li><strong>パターンマッチング</strong>: Python 3.10+ の <code>match</code>/<code>case</code></li>
<li><strong>Union 型</strong>: <code>|</code> で直和型を表現</li>
</ul>
<hr />
<h2 id="_14">演習問題<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h2>
<h3 id="1-maybe">問題 1: Maybe を使った安全な辞書アクセス<a class="headerlink" href="#1-maybe" title="Permanent link">&para;</a></h3>
<p>辞書から安全に値を取得する関数を実装してください。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">safe_get</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
    <span class="o">...</span>

<span class="c1"># 期待される動作</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">safe_get</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Some</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">safe_get</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Nothing</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">safe_get</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">T</span><span class="p">],</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Some</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">Nothing</span>
</code></pre></div>

</details>

<h3 id="2-result">問題 2: Result を使ったバリデーション<a class="headerlink" href="#2-result" title="Permanent link">&para;</a></h3>
<p>ユーザー名のバリデーション関数を実装してください。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_username</span><span class="p">(</span><span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - 空文字列: Failure(&quot;Username cannot be empty&quot;)</span>
<span class="sd">    - 3文字未満: Failure(&quot;Username must be at least 3 characters&quot;)</span>
<span class="sd">    - 20文字超: Failure(&quot;Username must be at most 20 characters&quot;)</span>
<span class="sd">    - それ以外: Success(username)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">validate_username</span><span class="p">(</span><span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Username cannot be empty&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Username must be at least 3 characters&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Failure</span><span class="p">(</span><span class="s2">&quot;Username must be at most 20 characters&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Success</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</code></pre></div>

</details>

<h3 id="3">問題 3: 検索条件の追加<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p>名前の部分一致で検索する条件を追加してください。</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SearchByName</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;名前で検索する条件。&quot;&quot;&quot;</span>
    <span class="n">name_contains</span><span class="p">:</span> <span class="nb">str</span>

<span class="c1"># SearchCondition に追加</span>
<span class="n">SearchCondition</span> <span class="o">=</span> <span class="n">SearchByGenre</span> <span class="o">|</span> <span class="n">SearchByOrigin</span> <span class="o">|</span> <span class="n">SearchByActiveYears</span> <span class="o">|</span> <span class="n">SearchByName</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">matches_condition</span><span class="p">(</span><span class="n">artist</span><span class="p">:</span> <span class="n">Artist</span><span class="p">,</span> <span class="n">condition</span><span class="p">:</span> <span class="n">SearchCondition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">match</span> <span class="n">condition</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">SearchByGenre</span><span class="p">(</span><span class="n">genres</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">artist</span><span class="o">.</span><span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span>
        <span class="k">case</span> <span class="n">SearchByOrigin</span><span class="p">(</span><span class="n">locations</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">artist</span><span class="o">.</span><span class="n">origin</span> <span class="ow">in</span> <span class="n">locations</span>
        <span class="k">case</span> <span class="n">SearchByActiveYears</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">was_artist_active</span><span class="p">(</span><span class="n">artist</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">SearchByName</span><span class="p">(</span><span class="n">name_contains</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">name_contains</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">artist</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre></div>

</details>

<h3 id="4-sequence">問題 4: sequence の実装<a class="headerlink" href="#4-sequence" title="Permanent link">&para;</a></h3>
<p><code>Maybe</code> のリストを <code>Maybe[list]</code> に変換する関数を、<code>bind</code> を使って実装してください。</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sequence_maybes_v2</span><span class="p">(</span><span class="n">maybes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;bind を使って sequence を実装する。&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div>
<details>
<summary>解答</summary>

<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">reduce</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sequence_maybes_v2</span><span class="p">(</span><span class="n">maybes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]]:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">append_if_some</span><span class="p">(</span><span class="n">acc</span><span class="p">:</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span> <span class="n">m</span><span class="p">:</span> <span class="n">Maybe</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">T</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="n">acc</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="k">lambda</span> <span class="n">lst</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">lst</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span><span class="p">]))</span>

    <span class="k">return</span> <span class="n">reduce</span><span class="p">(</span><span class="n">append_if_some</span><span class="p">,</span> <span class="n">maybes</span><span class="p">,</span> <span class="n">Some</span><span class="p">([]))</span>
</code></pre></div>

</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://github.com/k2works" target="_blank" rel="noopener" title="GitHub Repository/claude-code-booster" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
      
        <script src="../../docs/assets/js/extra.js"></script>
      
    
  </body>
</html>